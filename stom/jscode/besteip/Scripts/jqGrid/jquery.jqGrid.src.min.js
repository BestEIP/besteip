/**
* 20170610 add setGridWidthP by jerry
* 20170726 �ק���X�����������D line 15413 for(var s in this[i]) �᭱�W�[ {}
* 20170802 12278 ���O�� inline edit fource ���D
* 20170807 15394 �ק�©���m
* 20170906 1438 tbot < dh �אּ tbot <= dh
* 20180315 15442~15477 ���X������m�ק�(hideover����)
* @license Guriddo jqGrid JS - v5.2.1 - 2017-05-01
* Copyright(c) 2008, Tony Tomov, tony@trirand.com
* 
* License: http://guriddo.net/?page_id=103334
*/
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){"use strict";function nt(n,t){var i,r,u=[],f;if(!this||typeof n!="function"||n instanceof RegExp)throw new TypeError;for(f=this.length,i=0;i<f;i++)if(this.hasOwnProperty(i)&&(r=this[i],n.call(t,r,i,this))){u.push(r);break}return u}var t,w,r,o;n.jgrid=n.jgrid||{};n.jgrid.hasOwnProperty("defaults")||(n.jgrid.defaults={});n.extend(n.jgrid,{version:"5.2.1",htmlDecode:function(n){return n&&(n==="&nbsp;"||n==="&#160;"||n.length===1&&n.charCodeAt(0)===160)?"":n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},template:function(t){var r=n.makeArray(arguments).slice(1),i,u=r.length;return t==null&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(t,f){if(!isNaN(parseInt(f,10)))return r[parseInt(f,10)];for(i=0;i<u;i++)if(n.isArray(r[i]))for(var e=r[i],o=e.length;o--;)if(f===e[o].nm)return e[o].v})},msie:function(){return n.jgrid.msiever()>0},msiever:function(){var n=0,t=window.navigator.userAgent,i=t.indexOf("MSIE");return i>0?n=parseInt(t.substring(i+5,t.indexOf(".",i))):!navigator.userAgent.match(/Trident\/7\./)||(n=11),n},getCellIndex:function(t){var i=n(t);return i.is("tr")?-1:(i=(!i.is("td")&&!i.is("th")?i.closest("td,th"):i)[0],n.jgrid.msie())?n.inArray(i,i.parentNode.cells):i.cellIndex},stripHtml:function(n){n=String(n);return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stripPref:function(t,i){var r=n.type(t);return(r==="string"||r==="number")&&(t=String(t),i=t!==""?String(i).replace(String(t),""):i),i},useJSON:!0,parse:function(t){var i=t;return i.substr(0,9)==="while(1);"&&(i=i.substr(9)),i.substr(0,2)==="/*"&&(i=i.substr(2,i.length-4)),i||(i="{}"),n.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(i):eval("("+i+")")},parseDate:function(t,i,r,u){var rt=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),l=typeof i=="string"?i.match(rt):null,c=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,s,o,nt,tt=function(n,t){return n===0?t===12&&(t=0):t!==12&&(t+=12),t},h=0,v;if(u===undefined&&(u=n.jgrid.getRegional(this,"formatter.date")),u.parseRe===undefined&&(u.parseRe=/[#%\\\/:_;.,\t\s-]/),u.masks.hasOwnProperty(t)&&(t=u.masks[t]),i&&i!=null)if(isNaN(+i)||String(t).toLowerCase()!=="u")if(i.constructor===Date)e=i;else if(l!==null)e=new Date(parseInt(l[1],10)),l[3]&&(h=Number(l[5])*60+Number(l[6]),h*=l[4]==="-"?1:-1,h-=e.getTimezoneOffset(),e.setTime(Number(Number(e)+h*6e4)));else{for(u.srcformat==="ISO8601Long"&&i.charAt(i.length-1)==="Z"&&(h-=(new Date).getTimezoneOffset()),i=String(i).replace(/\T/g,"#").replace(/\t/,"%").split(u.parseRe),t=t.replace(/\T/g,"#").replace(/\t/,"%").split(u.parseRe),o=0,nt=t.length;o<nt;o++){switch(t[o]){case"M":s=n.inArray(i[o],u.monthNames);s!==-1&&s<12&&(i[o]=s+1,f.m=i[o]);break;case"F":s=n.inArray(i[o],u.monthNames,12);s!==-1&&s>11&&(i[o]=s+1-12,f.m=i[o]);break;case"n":t[o]="m";break;case"j":t[o]="d";break;case"a":s=n.inArray(i[o],u.AmPm);s!==-1&&s<2&&i[o]===u.AmPm[s]&&(i[o]=s,f.h=tt(i[o],f.h));break;case"A":s=n.inArray(i[o],u.AmPm);s!==-1&&s>1&&i[o]===u.AmPm[s]&&(i[o]=s-2,f.h=tt(i[o],f.h));break;case"g":f.h=parseInt(i[o],10)}i[o]!==undefined&&(f[t[o].toLowerCase()]=parseInt(i[o],10))}if(f.f&&(f.m=f.f),f.m===0&&f.y===0&&f.d===0)return"&#160;";f.m=parseInt(f.m,10)-1;v=f.y;v>=70&&v<=99?f.y=1900+f.y:v>=0&&v<=69&&(f.y=2e3+f.y);e=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u);h!==0&&e.setTime(Number(Number(e)+h*6e4))}else e=new Date(parseFloat(i)*1e3);else e=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u);if(u.userLocalTime&&h===0&&(h-=(new Date).getTimezoneOffset(),h!==0&&e.setTime(Number(Number(e)+h*6e4))),r===undefined)return e;u.masks.hasOwnProperty(r)?r=u.masks[r]:r||(r="Y-m-d");var a=e.getHours(),ut=e.getMinutes(),w=e.getDate(),y=e.getMonth()+1,d=e.getTimezoneOffset(),ft=e.getSeconds(),et=e.getMilliseconds(),b=e.getDay(),p=e.getFullYear(),k=(b+6)%7+1,g=(new Date(p,y-1,w)-new Date(p,0,1))/864e5,it={d:c(w),D:u.dayNames[b],j:w,l:u.dayNames[b+7],N:k,S:u.S(w),w:b,z:g,W:k<5?Math.floor((g+k-1)/7)+1:Math.floor((g+k-1)/7)||((new Date(p-1,0,1).getDay()+6)%7<4?53:52),F:u.monthNames[y- -11],m:c(y),M:u.monthNames[y-1],n:y,t:"?",L:"?",o:"?",Y:p,y:String(p).substring(2),a:a<12?u.AmPm[0]:u.AmPm[1],A:a<12?u.AmPm[2]:u.AmPm[3],B:"?",g:a%12||12,G:a,h:c(a%12||12),H:c(a),i:c(ut),s:c(ft),u:et,e:"?",I:"?",O:(d>0?"-":"+")+c(Math.floor(Math.abs(d)/60)*100+Math.abs(d)%60,4),P:"?",T:(String(e).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return it.hasOwnProperty(n)?it[n]:n.substring(1)})},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(t){return(t||n.jgrid.uidPref)+n.jgrid.guid++},getAccessor:function(n,t){var i,f,r=[],u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},getXmlData:function(t,i,r){var f,u=typeof i=="string"?i.match(/^(.*)\[(\w+)\]$/):null;return typeof i=="function"?i(t):u&&u[2]?u[1]?n(u[1],t).attr(u[2]):n(t).attr(u[2]):(f=n(i,t),r)?f:f.length>0?n(f).text():undefined},cellWidth:function(){var t=n("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'><\/td><\/tr><\/table><\/div>"),i=t.appendTo("body").find("td").width();return t.remove(),Math.abs(i-5)>.1},isLocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}},getRegional:function(t,i,r){var u;return r!==undefined?r:(t.p&&t.p.regional&&n.jgrid.regional&&(u=n.jgrid.getAccessor(n.jgrid.regional[t.p.regional]||{},i)),u===undefined&&(u=n.jgrid.getAccessor(n.jgrid,i)),u)},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)?!0:!1}catch(n){return!1}},cell_width:!0,ajaxOptions:{},from:function(t){var i=this,r=function(t,r){typeof t=="string"&&(t=n.data(t));var u=this,f=t,c=!0,s=!1,e=r,y=/[\$,%]/g,l=null,p=null,w=0,o=!1,v="",h=[],a=!0;if(typeof t=="object"&&t.push)t.length>0&&(a=typeof t[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return f===null?!1:f.length===0?!1:!0},this._getStr=function(n){var t=[];return s&&t.push("jQuery.trim("),t.push("String("+n+")"),s&&t.push(")"),c||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(t){return s&&(t=n.trim(t)),t=t.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),c?t:t.toLowerCase()},this._funcLoop=function(t){var i=[];return n.each(f,function(n,r){i.push(t(r))}),i},this._append=function(n){var t;for(e===null?e="":e+=v===""?" && ":v,t=0;t<w;t++)e+="(";o&&(e+="!");e+="("+n+")";o=!1;v="";w=0},this._setCommand=function(n,t){l=n;p=t},this._resetNegate=function(){o=!1},this._repeatCommand=function(n,t){return l===null?u:n!==null&&t!==null?l(n,t):p===null?l(n):a?l(p,n):l(n)},this._equals=function(n,t){return u._compare(n,t,1)===0},this._compare=function(n,t,i){var r=Object.prototype.toString;return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:r.call(n)==="[object Date]"&&r.call(t)==="[object Date]"?n<t?-i:n>t?i:0:(c||typeof n=="number"||typeof t=="number"||(n=String(n),t=String(t)),n<t)?-i:n>t?i:0},this._performSort=function(){h.length!==0&&(f=u._doSort(f,0))},this._doSort=function(n,t){var s=h[t].by,c=h[t].dir,l=h[t].type,a=h[t].datefmt,v=h[t].sfunc,f,e,i,r,o;if(t===h.length-1)return u._getOrder(n,s,c,l,a,v);for(t++,f=u._getGroup(n,s,c,l,a),e=[],i=0;i<f.length;i++)for(o=u._doSort(f[i].items,t),r=0;r<o.length;r++)e.push(o[r]);return e},this._getOrder=function(t,r,f,e,o,s){var v=[],l=[],p=f==="a"?1:-1,w,h,a,b,k;for(e===undefined&&(e="text"),b=e==="float"||e==="number"||e==="currency"||e==="numeric"?function(n){var t=parseFloat(String(n).replace(y,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:e==="int"||e==="integer"?function(n){return n?parseFloat(String(n).replace(y,"")):Number.NEGATIVE_INFINITY}:e==="date"||e==="datetime"?function(t){return n.jgrid.parseDate.call(i,o,t).getTime()}:n.isFunction(e)?e:function(t){return t=t?n.trim(String(t)):"",c?t:t.toLowerCase()},n.each(t,function(t,i){h=r!==""?n.jgrid.getAccessor(i,r):i;h===undefined&&(h="");h=b(h,i);l.push({vSort:h,index:t})}),n.isFunction(s)?l.sort(function(n,t){return s.call(this,n.vSort,t.vSort,p,n,t)}):l.sort(function(n,t){return u._compare(n.vSort,t.vSort,p)}),a=0,k=t.length;a<k;)w=l[a].index,v.push(t[w]),a++;return v},this._getGroup=function(t,i,r,f,e){var h=[],o=null,c=null,s;return n.each(u._getOrder(t,i,r,f,e),function(t,r){s=n.jgrid.getAccessor(r,i);s==null&&(s="");u._equals(c,s)||(c=s,o!==null&&h.push(o),o=u._group(i,s));o.items.push(r)}),o!==null&&h.push(o),h},this.ignoreCase=function(){return c=!1,u},this.useCase=function(){return c=!0,u},this.trim=function(){return s=!0,u},this.noTrim=function(){return s=!1,u},this.execute=function(){var t=e,i=[];return t===null?u:(n.each(f,function(){eval(t)&&i.push(this)}),f=i,u)},this.data=function(){return f},this.select=function(t){if(u._performSort(),!u._hasData())return[];if(u.execute(),n.isFunction(t)){var i=[];return n.each(f,function(n,r){i.push(t(r))}),i}return f},this.hasMatch=function(){return u._hasData()?(u.execute(),f.length>0):!1},this.andNot=function(n,t,i){return o=!o,u.and(n,t,i)},this.orNot=function(n,t,i){return o=!o,u.or(n,t,i)},this.not=function(n,t,i){return u.andNot(n,t,i)},this.and=function(n,t,i){return(v=" && ",n===undefined)?u:u._repeatCommand(n,t,i)},this.or=function(n,t,i){return(v=" || ",n===undefined)?u:u._repeatCommand(n,t,i)},this.orBegin=function(){return w++,u},this.orEnd=function(){return e!==null&&(e+=")"),u},this.isNot=function(n){return o=!o,u.is(n)},this.is=function(n){return u._append("this."+n),u._resetNegate(),u},this._compareValues=function(t,r,f,e,o){var h,s,c;if(h=a?"jQuery.jgrid.getAccessor(this,'"+r+"')":"this",f===undefined&&(f=null),s=f,c=o.stype===undefined?"text":o.stype,f!==null)switch(c){case"int":case"integer":s=isNaN(Number(s))||s===""?"0":s;h="parseInt("+h+",10)";s="parseInt("+s+",10)";break;case"float":case"number":case"numeric":s=String(s).replace(y,"");s=isNaN(Number(s))||s===""?"0":s;h="parseFloat("+h+")";s="parseFloat("+s+")";break;case"date":case"datetime":s=String(n.jgrid.parseDate.call(i,o.srcfmt||"Y-m-d",s).getTime());h='jQuery.jgrid.parseDate.call(jQuery("#'+n.jgrid.jqID(i.p.id)+'")[0],"'+o.srcfmt+'",'+h+").getTime()";break;default:h=u._getStr(h);s=u._getStr('"'+u._toStr(s)+'"')}return u._append(h+" "+e+" "+s),u._setCommand(t,r),u._resetNegate(),u},this.equals=function(n,t,i){return u._compareValues(u.equals,n,t,"==",i)},this.notEquals=function(n,t,i){return u._compareValues(u.equals,n,t,"!==",i)},this.isNull=function(n,t,i){return u._compareValues(u.equals,n,null,"===",i)},this.greater=function(n,t,i){return u._compareValues(u.greater,n,t,">",i)},this.less=function(n,t,i){return u._compareValues(u.less,n,t,"<",i)},this.greaterOrEquals=function(n,t,i){return u._compareValues(u.greaterOrEquals,n,t,">=",i)},this.lessOrEquals=function(n,t,i){return u._compareValues(u.lessOrEquals,n,t,"<=",i)},this.startsWith=function(t,i){var f=i==null?t:i,r=s?n.trim(f.toString()).length:f.toString().length;return a?u._append(u._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr(0,"+r+") == "+u._getStr('"'+u._toStr(i)+'"')):(i!=null&&(r=s?n.trim(i.toString()).length:i.toString().length),u._append(u._getStr("this")+".substr(0,"+r+") == "+u._getStr('"'+u._toStr(t)+'"'))),u._setCommand(u.startsWith,t),u._resetNegate(),u},this.endsWith=function(t,i){var r=i==null?t:i,f=s?n.trim(r.toString()).length:r.toString().length;return a?u._append(u._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr("+u._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".length-"+f+","+f+') == "'+u._toStr(i)+'"'):u._append(u._getStr("this")+".substr("+u._getStr("this")+'.length-"'+u._toStr(t)+'".length,"'+u._toStr(t)+'".length) == "'+u._toStr(t)+'"'),u._setCommand(u.endsWith,t),u._resetNegate(),u},this.contains=function(n,t){return a?u._append(u._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+u._toStr(t)+'",0) > -1'):u._append(u._getStr("this")+'.indexOf("'+u._toStr(n)+'",0) > -1'),u._setCommand(u.contains,n),u._resetNegate(),u},this.groupBy=function(n,t,i,r){return u._hasData()?u._getGroup(f,n,t,i,r):null},this.orderBy=function(t,i,r,f,e){return i=i==null?"a":n.trim(i.toString().toLowerCase()),r==null&&(r="text"),f==null&&(f="Y-m-d"),e==null&&(e=!1),(i==="desc"||i==="descending")&&(i="d"),(i==="asc"||i==="ascending")&&(i="a"),h.push({by:t,dir:i,type:r,datefmt:f,sfunc:e}),u},u};return new r(t,null)},getMethod:function(t){return this.getAccessor(n.fn.jqGrid,t)},extend:function(t){n.extend(n.fn.jqGrid,t);this.no_legacy_api||n.fn.extend(t)},clearBeforeUnload:function(t){var r=n("#"+n.jgrid.jqID(t))[0],u,i,e,f;if(r.grid){for(u=r.grid,n.isFunction(u.emptyRows)&&u.emptyRows.call(r,!0,!0),n(document).off("mouseup.jqGrid"+r.p.id),n(u.hDiv).off("mousemove"),n(r).off(),e=u.headers.length,f=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p","addLocalData"],i=0;i<e;i++)u.headers[i].el=null;for(i in u)u.hasOwnProperty(i)&&(u[i]=null);for(i in r.p)r.p.hasOwnProperty(i)&&(r.p[i]=n.isArray(r.p[i])?[]:null);for(e=f.length,i=0;i<e;i++)r.hasOwnProperty(f[i])&&(r[f[i]]=null,delete r[f[i]])}},gridUnload:function(t){var i,f,u,r;t&&(t=n.trim(t),t.indexOf("#")===0&&(t=t.substring(1)),i=n("#"+n.jgrid.jqID(t))[0],i.grid)&&(f={id:n(i).attr("id"),cl:n(i).attr("class")},i.p.pager&&n(i.p.pager).off().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),u=document.createElement("table"),u.className=f.cl,r=n.jgrid.jqID(i.id),n(u).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+r),n(i.p.pager).parents("#gbox_"+r).length===1&&n(i.p.pager).insertBefore("#gbox_"+r),n.jgrid.clearBeforeUnload(t),n("#gbox_"+r).remove(),n(u).attr({id:f.id}),n("#alertmod_"+n.jgrid.jqID(t)).remove())},gridDestroy:function(t){if(t){t=n.trim(t);t.indexOf("#")===0&&(t=t.substring(1));var i=n("#"+n.jgrid.jqID(t))[0];if(i.grid){i.p.pager&&n(i.p.pager).remove();try{n.jgrid.clearBeforeUnload(t);n("#gbox_"+n.jgrid.jqID(t)).remove()}catch(r){}}}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",stripedTable:"ui-jqgrid-table-striped",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control",icon_menu:"glyphicon-menu-hamburger",icon_sort_asc:"glyphicon-sort-by-alphabet",icon_sort_desc:"glyphicon-sort-by-alphabet-alt",icon_columns:"glyphicon-list-alt",icon_filter:"glyphicon-filter",icon_group:"glyphicon-align-left",icon_freeze:"glyphicon-object-align-horizontal",icon_move:"glyphicon-move"}}}});n.fn.jqGrid=function(t){var i,r;if(typeof t=="string"){if(i=n.jgrid.getMethod(t),!i)throw"jqGrid - No such method: "+t;return r=n.makeArray(arguments).slice(1),i.apply(this,r)}return this.each(function(){function kr(t,r,u,f){if(i.p.multiselect&&i.p.multiboxonly||i.p.multimail)if(r)n(i).jqGrid("setSelection",t,f,u);else if(i.p.multiboxonly&&i.p.multimail)n(i).triggerHandler("jqGridSelectRow",[t,!1,u]),i.p.onSelectRow&&i.p.onSelectRow.call(i,t,!1,u);else{var e=i.p.frozenColumns?i.p.id+"_frozen":"";n(i.p.selarrrow).each(function(t,r){var u=n(i).jqGrid("getGridRowById",r);u&&n(u).removeClass(rt);n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1);e&&(n("#"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(e)).removeClass(rt),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(e))[i.p.useProp?"prop":"attr"]("checked",!1))});i.p.selarrrow=[];n(i).jqGrid("setSelection",t,f,u)}else n(i).jqGrid("setSelection",t,f,u)}var dt,u,i,r,o,si,hi,y,ft,wr,wt,ht,di,bt,gi,kt,a,g,nr,fi,tr,ei,oi,dr,gr,nu;if(!this.grid){if(t!=null&&t.data!==undefined&&(dt=t.data,t.data=[]),u=n.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,multiboxonly:!1,multimail:!1,multiselectWidth:30,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",scrollMaxBuffer:0,storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",responsive:!1,restoreCellonFail:!0,colFilters:{},colMenu:!1},n.jgrid.defaults,t),dt!==undefined&&(u.data=dt,t.data=dt),i=this,r={headers:[],cols:[],footers:[],dragStart:function(t,r,f){var e=n(this.bDiv).offset().left;this.resizing={idx:t,startX:r.pageX,sOL:r.pageX-e};this.hDiv.style.cursor="col-resize";this.curGbox=n("#rs_m"+n.jgrid.jqID(u.id),"#gbox_"+n.jgrid.jqID(u.id));this.curGbox.css({display:"block",left:r.pageX-e,top:f[1],height:f[2]});n(i).triggerHandler("jqGridResizeStart",[r,t]);n.isFunction(u.resizeStart)&&u.resizeStart.call(i,r,t);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.pageX-this.resizing.startX,i=this.headers[this.resizing.idx],f=u.direction==="ltr"?i.width+t:i.width-t,r,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),u.forceFit===!0?(r=this.headers[this.resizing.idx+u.nv],e=u.direction==="ltr"?r.width-t:r.width+t,e>u.minColWidth&&(i.newWidth=f,r.newWidth=e)):(this.newWidth=u.direction==="ltr"?u.tblwidth+t:u.tblwidth-t,i.newWidth=f))}},dragEnd:function(t){if(this.hDiv.style.cursor="default",this.resizing){var r=this.resizing.idx,f=this.headers[r].newWidth||this.headers[r].width;f=parseInt(f,10);this.resizing=!1;n("#rs_m"+n.jgrid.jqID(u.id)).css("display","none");u.colModel[r].width=f;this.headers[r].width=f;this.headers[r].el.style.width=f+"px";this.cols[r].style.width=f+"px";this.footers.length>0&&(this.footers[r].style.width=f+"px");u.forceFit===!0?(f=this.headers[r+u.nv].newWidth||this.headers[r+u.nv].width,this.headers[r+u.nv].width=f,this.headers[r+u.nv].el.style.width=f+"px",this.cols[r+u.nv].style.width=f+"px",this.footers.length>0&&(this.footers[r+u.nv].style.width=f+"px"),u.colModel[r+u.nv].width=f):(u.tblwidth=this.newWidth||u.tblwidth,n("table:first",this.bDiv).css("width",u.tblwidth+"px"),n("table:first",this.hDiv).css("width",u.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,u.footerrow&&(n("table:first",this.sDiv).css("width",u.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));t&&(n(i).triggerHandler("jqGridResizeStop",[f,r]),n.isFunction(u.resizeStop)&&u.resizeStop.call(i,f,r))}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var c,t,y,o;if(r.timer&&clearTimeout(r.timer),r.timer=null,c=n(r.bDiv).height(),c){if(t=n("table:first",r.bDiv),t[0].rows.length)try{y=t[0].rows[1];o=y?n(y).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(w){o=r.prevRowHeight}if(o){r.prevRowHeight=o;var s=u.rowNum,h=r.scrollTop=r.bDiv.scrollTop,l=Math.round(t.position().top)-h,a=l+t.height(),f=o*s,e,v,p;if(a<=c&&l<=0&&(u.lastpage===undefined||(parseInt((a+h+f-1)/f,10)||0)<=u.lastpage)&&(v=parseInt((c-a+f-1)/f,10)||1,a>=0||v<2||u.scroll===!0?(e=(Math.round((a+h)/f)||0)+1,l=-1):l=1),l>0&&(e=(parseInt(h/f,10)||0)+1,v=(parseInt((h+c)/f,10)||0)+2-e,p=!0),v){if(u.lastpage&&(e>u.lastpage||u.lastpage===1||e===u.page&&e===u.lastpage))return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,u.scrollTimeout):(u.page=e,u.scrollMaxBuffer>0&&(s>0&&u.scrollMaxBuffer<s&&(u.scrollMaxBuffer=s+1),u.reccount>u.scrollMaxBuffer-(s>0?s:0)&&(p=!0)),p&&(r.selectionPreserver(t[0]),r.emptyRows.call(t[0],!1,!1)),r.populate(v));u.scrollPopUp&&u.lastpage!=null&&(n("#scroll_g"+u.id).show().html(n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",u.pgtext),u.page,u.lastpage)).css({top:u.scrollTopOffset+h*((parseInt(u.height,10)-45)/(parseInt(o,10)*parseInt(u.records,10)))+"px",left:u.scrollLeftOffset}),n(this).mouseout(function(){n("#scroll_g"+u.id).hide()}))}}}},scrollGrid:function(t){if(u.scroll){var i=r.bDiv.scrollTop;r.scrollTop===undefined&&(r.scrollTop=0);i!==r.scrollTop&&(r.scrollTop=i,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,u.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft;u.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft);u.frozenColumns&&n(r.fbDiv).scrollTop(r.bDiv.scrollTop);t&&t.stopPropagation()},selectionPreserver:function(t){var i=t.p,u=i.selrow,r=i.selarrrow?n.makeArray(i.selarrrow):null,e=t.grid.bDiv.scrollLeft,f=function(){var o;if(i.selrow=null,i.selarrrow=[],i.multiselect&&r&&r.length>0)for(o=0;o<r.length;o++)r[o]!==u&&n(t).jqGrid("setSelection",r[o],!1,null);u&&n(t).jqGrid("setSelection",u,!1,null);t.grid.bDiv.scrollLeft=e;n(t).off(".selectionPreserver",f)};n(t).on("jqGridGridComplete.selectionPreserver",f)}},this.tagName.toUpperCase()!=="TABLE"||this.id==null){alert("Element is not a table or has no id!");return}if(document.documentMode!==undefined&&document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return}o=0;for(hi in n.jgrid.regional)n.jgrid.regional.hasOwnProperty(hi)&&(o===0&&(si=hi),o++);if(o===1&&si!==u.regional&&(u.regional=si),n(this).empty().attr("tabindex","0"),this.p=u,this.p.useProp=!!n.fn.prop,this.p.colNames.length===0)for(o=0;o<this.p.colModel.length;o++)this.p.colNames[o]=this.p.colModel[o].label||this.p.colModel[o].name;if(this.p.colNames.length!==this.p.colModel.length){alert(n.jgrid.getRegional(this,"errors.model"));return}var f=n.jgrid.getMethod("getStyleUI"),e=i.p.styleUI+".common",h=f(e,"disabled",!0),rt=f(e,"highlight",!0),v=f(e,"hover",!0),tu=f(e,"cornerall",!0),w=f(e,"icon_base",!0),p=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].colmenu,ir=n.jgrid.msie(),tt,st=[],ci=[],ut=[];e=i.p.styleUI+".base";tt=n("<div "+f(e,"viewBox",!1,"ui-jqgrid-view")+" role='grid'><\/div>");i.p.direction=n.trim(i.p.direction.toLowerCase());i.p._ald=!1;n.inArray(i.p.direction,["ltr","rtl"])===-1&&(i.p.direction="ltr");y=i.p.direction;n(tt).insertBefore(this);n(this).appendTo(tt);ft=n("<div "+f(e,"entrieBox",!1,"ui-jqgrid")+"><\/div>");n(ft).attr({id:"gbox_"+this.id,dir:y}).insertBefore(tt);n(tt).attr("id","gview_"+this.id).appendTo(ft);n("<div "+f(i.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'><\/div>").insertBefore(tt);n("<div "+f(e,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+n.jgrid.getRegional(i,"defaults.loadtext",this.p.loadtext)+"<\/div>").insertBefore(tt);n(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var b=function(n,t){return(n=parseInt(n,10),isNaN(n))?t||0:n},lt=function(t,u,f,e,o,s){var h=i.p.colModel[t],y,p=h.align,l='style="',v=h.classes,w=h.name,a,c=[];return p&&(l+="text-align:"+p+";"),h.hidden===!0&&(l+="display:none;"),u===0?l+="width: "+r.headers[t].width+"px;":(n.isFunction(h.cellattr)||typeof h.cellattr=="string"&&n.jgrid.cellattr!=null&&n.isFunction(n.jgrid.cellattr[h.cellattr]))&&(y=n.isFunction(h.cellattr)?h.cellattr:n.jgrid.cellattr[h.cellattr],a=y.call(i,o,f,e,h,s),a&&typeof a=="string"&&(a=a.replace(/style/i,"style").replace(/title/i,"title"),a.indexOf("title")>-1&&(h.title=!1),a.indexOf("class")>-1&&(v=undefined),c=a.replace(/\-style/g,"-sti").split(/style/),c.length===2?(c[1]=n.trim(c[1].replace(/\-sti/g,"-style").replace("=","")),(c[1].indexOf("'")===0||c[1].indexOf('"')===0)&&(c[1]=c[1].substring(1)),l+=c[1].replace(/'/gi,'"')):l+='"')),c.length||(c[0]="",l+='"'),l+=(v!==undefined?' class="'+v+'"':"")+(h.title&&f?' title="'+n.jgrid.stripHtml(f)+'"':""),l+=' aria-describedby="'+i.p.id+"_"+w+'"',l+c[0]},rr=function(t){return t==null||t===""?"&#160;":i.p.autoencode?n.jgrid.htmlEncode(t):String(t)},ur=function(t,r,u,f,e){var o=i.p.colModel[u],s,h;return o.formatter!==undefined?(t=String(i.p.idPrefix)!==""?n.jgrid.stripPref(i.p.idPrefix,t):t,h={rowId:t,colModel:o,gid:i.p.id,pos:u,styleUI:i.p.styleUI},s=n.isFunction(o.formatter)?o.formatter.call(i,r,h,f,e):n.fmatter?n.fn.fmatter.call(i,o.formatter,r,h,f,e):rr(r)):s=rr(r),s},li=function(n,t,i,r,u,f){var e,o;return e=ur(n,t,i,u,"add"),o=lt(i,r,e,u,n,f),'<td role="gridcell" '+o+">"+e+"<\/td>"},fr=function(n,t,r,u,f){var e='<input role="checkbox" type="checkbox" id="jqg_'+i.p.id+"_"+n+'" '+f+' name="jqg_'+i.p.id+"_"+n+'"'+(u?'checked="checked"':"")+"/>",o=lt(t,r,"",null,n,!0);return'<td role="gridcell" '+o+">"+e+"<\/td>"},er=function(n,t,i,r,u){var f=(parseInt(i,10)-1)*parseInt(r,10)+1+t,e=lt(n,t,f,null,t,!0);return'<td role="gridcell" '+u+" "+e+">"+f+"<\/td>"},ai=function(n){for(var t,f=[],r=0,u=0;u<i.p.colModel.length;u++)t=i.p.colModel[u],t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"&&(f[r]=n==="local"?t.name:n==="xml"||n==="xmlstring"?t.xmlmap||t.name:t.jsonmap||t.name,i.p.keyName!==!1&&t.key===!0&&(i.p.keyName=f[r],i.p.keyIndex=r),r++);return f},gt=function(t){var r=i.p.remapColumns;return r&&r.length||(r=n.map(i.p.colModel,function(n,t){return t})),t&&(r=n.map(r,function(n){return n<t?null:n-t})),r},at=function(t,i){var r;this.p.deepempty?n(this.rows).slice(1).remove():(r=this.rows.length>0?this.rows[0]:null,n(this.firstChild).empty().append(r));t&&this.p.scroll&&(n(this.grid.bDiv.firstChild).css({height:"auto"}),n(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),this.grid.bDiv.scrollTop!==0&&(this.grid.bDiv.scrollTop=0));i===!0&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},or=function(){var t=i.p,c=t.data,d=c.length,e,s,r,f,u,h,w,l,o=t.localReader,y=t.colModel,a=o.cell,v=(t.multiselect===!0?1:0)+(t.subGrid===!0?1:0)+(t.rownumbers===!0?1:0),g=t.scroll?n.jgrid.randId():1,b,k,p;if(t.datatype==="local"&&o.repeatitems===!0)for(b=gt(v),k=ai("local"),f=t.keyName===!1?n.isFunction(o.id)?o.id.call(i,c):o.id:t.keyName,e=0;e<d;e++){for(r=c[e],u=n.jgrid.getAccessor(r,f),u===undefined&&(typeof f=="number"&&y[f+v]!=null&&(u=n.jgrid.getAccessor(r,y[f+v].name)),u===undefined&&(u=g+e,a&&(h=n.jgrid.getAccessor(r,a)||r,u=h!=null&&h[f]!==undefined?h[f]:u,h=null))),l={},l[o.id]=u,a&&(r=n.jgrid.getAccessor(r,a)||r),p=n.isArray(r)?b:k,s=0;s<p.length;s++)w=n.jgrid.getAccessor(r,p[s]),l[y[s+v].name]=w;c[e]=l}},vi=function(){var f=i.p.data.length,u,t,r;for(u=i.p.keyName===!1||i.p.loadonce===!0?i.p.localReader.id:i.p.keyName,i.p._index=[],t=0;t<f;t++)r=n.jgrid.getAccessor(i.p.data[t],u),r===undefined&&(r=String(t+1)),i.p._index[r]=t},yi=function(t,r,u,f,e){var c="-1",l="",s,h=r?"display:none;":"",o=n(i).triggerHandler("jqGridRowAttr",[f,e,t]);if(typeof o!="object"&&(o=n.isFunction(i.p.rowattr)?i.p.rowattr.call(i,f,e,t):typeof i.p.rowattr=="string"&&n.jgrid.rowattr!=null&&n.isFunction(n.jgrid.rowattr[i.p.rowattr])?n.jgrid.rowattr[i.p.rowattr].call(i,f,e,t):{}),!n.isEmptyObject(o)){o.hasOwnProperty("id")&&(t=o.id,delete o.id);o.hasOwnProperty("tabindex")&&(c=o.tabindex,delete o.tabindex);o.hasOwnProperty("style")&&(h+=o.style,delete o.style);o.hasOwnProperty("class")&&(u+=" "+o["class"],delete o["class"]);try{delete o.role}catch(a){}for(s in o)o.hasOwnProperty(s)&&(l+=" "+s+"="+o[s])}return'<tr role="row" id="'+t+'" tabindex="'+c+'" class="'+u+'"'+(h===""?"":' style="'+h+'"')+l+">"},pi=function(t,r,u,o){var ti=new Date,et=i.p.datatype!=="local"&&i.p.loadonce||i.p.datatype==="xmlstring",ot="_id_",h=i.p.xmlReader,ii=i.p.datatype==="local"?"local":"xml",tt,kt,dt,ni;if(et&&(i.p.data=[],i.p._index={},i.p.localReader.id=ot),i.p.reccount=0,n.isXMLDoc(t))i.p.treeANode!==-1||i.p.scroll?r=r>1?r:1:(at.call(i,!1,!0),r=1);else return;var nt=n(i),p,st,w=0,k,y=i.p.multiselect===!0?1:0,d=0,yt,a=i.p.rownumbers===!0?1:0,it,lt,ut=[],ft,s={},v,l,c=[],ri=f(e,"rowBox",!0,"jqgrow ui-row-"+i.p.direction);i.p.subGrid===!0&&(d=1,yt=n.jgrid.getMethod("addSubGridCell"));h.repeatitems||(ut=ai(ii));it=i.p.keyName===!1?n.isFunction(h.id)?h.id.call(i,t):h.id:i.p.keyName;h.repeatitems&&i.p.keyName&&isNaN(it)&&(it=i.p.keyIndex);lt=String(it).indexOf("[")===-1?ut.length?function(t,i){return n(it,t).text()||i}:function(t,i){return n(h.cell,t).eq(it).text()||i}:function(n,t){return n.getAttribute(it.replace(/[\[\]]/g,""))||t};i.p.userData={};i.p.page=b(n.jgrid.getXmlData(t,h.page),i.p.page);i.p.lastpage=b(n.jgrid.getXmlData(t,h.total),1);i.p.records=b(n.jgrid.getXmlData(t,h.records));n.isFunction(h.userdata)?i.p.userData=h.userdata.call(i,t)||{}:n.jgrid.getXmlData(t,h.userdata,!0).each(function(){i.p.userData[this.getAttribute("name")]=n(this).text()});tt=n.jgrid.getXmlData(t,h.root,!0);tt=n.jgrid.getXmlData(tt,h.row,!0);tt||(tt=[]);var rt=tt.length,g=0,ht=[],ct=parseInt(i.p.rowNum,10),pt=i.p.scroll?n.jgrid.randId():1,wt=n(i).find("tbody:first"),bt=!1,vt;if(i.p.grouping&&(bt=i.p.groupingView.groupCollapse===!0,vt=n.jgrid.getMethod("groupingPrepare")),rt>0&&i.p.page<=0&&(i.p.page=1),tt&&rt){o&&(ct*=o+1);for(var ui=n.isFunction(i.p.afterInsertRow),fi=a?f(e,"rownumBox",!1,"jqgrid-rownum"):"",ei=y?f(e,"multiBox",!1,"cbox"):"";g<rt;){if(v=tt[g],l=lt(v,pt+g),l=i.p.idPrefix+l,kt=c.length,c.push(""),a&&c.push(er(0,g,i.p.page,i.p.rowNum,fi)),y&&c.push(fr(l,a,g,!1,ei)),d&&c.push(yt.call(nt,y+a,g+r)),h.repeatitems)ft||(ft=gt(y+d+a)),dt=n.jgrid.getXmlData(v,h.cell,!0),n.each(ft,function(n){var t=dt[this];if(!t)return!1;k=t.textContent||t.text;s[i.p.colModel[n+y+d+a].name]=k;c.push(li(l,k,n+y+d+a,g+r,v,s))});else for(p=0;p<ut.length;p++)k=n.jgrid.getXmlData(v,ut[p]),s[i.p.colModel[p+y+d+a].name]=k,c.push(li(l,k,p+y+d+a,g+r,v,s));if(c[kt]=yi(l,bt,ri,s,v),c.push("<\/tr>"),i.p.grouping&&(ht.push(c),i.p.groupingView._locgr||vt.call(nt,s,g),c=[]),(et||i.p.treeGrid===!0&&!i.p._ald)&&(s[ot]=n.jgrid.stripPref(i.p.idPrefix,l),i.p.data.push(s),i.p._index[s[ot]]=i.p.data.length-1),i.p.gridview===!1&&(wt.append(c.join("")),nt.triggerHandler("jqGridAfterInsertRow",[l,s,v]),ui&&i.p.afterInsertRow.call(i,l,s,v),c=[]),s={},w++,g++,w===ct)break}}if(i.p.gridview===!0&&(st=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?et||(nt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,ct),ht=null):i.p.treeGrid===!0&&st>0?n(i.rows[st]).after(c.join("")):(wt.append(c.join("")),i.grid.cols=i.rows[0].cells)),i.p.totaltime=new Date-ti,c=null,i.p.subGrid===!0)try{nt.jqGrid("addSubGrid",y+a)}catch(oi){}if(w>0&&i.p.records===0&&(i.p.records=rt),i.p.treeGrid===!0)try{nt.jqGrid("setTreeNode",st+1,w+st+1)}catch(si){}if(i.p.reccount=w,i.p.treeANode=-1,i.p.userDataOnFooter&&nt.jqGrid("footerData","set",i.p.userData,!0),et&&(i.p.records=rt,i.p.lastpage=Math.ceil(rt/ct)),u||i.updatepager(!1,!0),et){while(w<rt){if(v=tt[w],l=lt(v,w+pt),l=i.p.idPrefix+l,h.repeatitems)ft||(ft=gt(y+d+a)),ni=n.jgrid.getXmlData(v,h.cell,!0),n.each(ft,function(n){var t=ni[this];if(!t)return!1;k=t.textContent||t.text;s[i.p.colModel[n+y+d+a].name]=k});else for(p=0;p<ut.length;p++)k=n.jgrid.getXmlData(v,ut[p]),s[i.p.colModel[p+y+d+a].name]=k;s[ot]=n.jgrid.stripPref(i.p.idPrefix,l);i.p.grouping&&vt.call(nt,s,w);i.p.data.push(s);i.p._index[s[ot]]=i.p.data.length-1;s={};w++}i.p.grouping&&(i.p.groupingView._locgr=!0,nt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,ct),ht=null)}},ni=function(t,r,u,o){var oi=new Date,c,ft,vt,et,ct,ei,lt;if(t)i.p.treeANode!==-1||i.p.scroll?r=r>1?r:1:(at.call(i,!1,!0),r=1);else return;ft="_id_";et=i.p.datatype!=="local"&&i.p.loadonce||i.p.datatype==="jsonstring";et&&(i.p.data=[],i.p._index={},i.p.localReader.id=ft);i.p.reccount=0;i.p.datatype==="local"?(c=i.p.localReader,vt="local"):(c=i.p.jsonReader,vt="json");var nt=n(i),w=0,yt,d,k,bt=[],h,p=i.p.multiselect?1:0,g=i.p.subGrid===!0?1:0,kt,y=i.p.rownumbers===!0?1:0,dt=gt(p+g+y),ni=ai(vt),it,ut,tt,a,l={},ot,s,v=[],ti=f(e,"rowBox",!0,"jqgrow ui-row-"+i.p.direction);i.p.page=b(n.jgrid.getAccessor(t,c.page),i.p.page);i.p.lastpage=b(n.jgrid.getAccessor(t,c.total),1);i.p.records=b(n.jgrid.getAccessor(t,c.records));i.p.userData=n.jgrid.getAccessor(t,c.userdata)||{};g&&(kt=n.jgrid.getMethod("addSubGridCell"));a=i.p.keyName===!1?n.isFunction(c.id)?c.id.call(i,t):c.id:i.p.keyName;c.repeatitems&&i.p.keyName&&isNaN(a)&&(a=i.p.keyIndex);tt=n.jgrid.getAccessor(t,c.root);tt==null&&n.isArray(t)&&(tt=t);tt||(tt=[]);ut=tt.length;d=0;ut>0&&i.p.page<=0&&(i.p.page=1);var st=parseInt(i.p.rowNum,10),ii=i.p.scroll?n.jgrid.randId():1,ri=!1,pt;o&&(st*=o+1);i.p.datatype!=="local"||i.p.deselectAfterSort||(ri=!0);var si=n.isFunction(i.p.afterInsertRow),ht=[],ui=!1,wt,fi=n(i).find("tbody:first"),hi=y?f(e,"rownumBox",!1,"jqgrid-rownum"):"",ci=p?f(e,"multiBox",!1,"cbox"):"";for(i.p.grouping&&(ui=i.p.groupingView.groupCollapse===!0,wt=n.jgrid.getMethod("groupingPrepare"));d<ut;){for(h=tt[d],s=n.jgrid.getAccessor(h,a),s===undefined&&(typeof a=="number"&&i.p.colModel[a+p+g+y]!=null&&(s=n.jgrid.getAccessor(h,i.p.colModel[a+p+g+y].name)),s===undefined&&(s=ii+d,bt.length===0&&c.cell&&(ct=n.jgrid.getAccessor(h,c.cell)||h,s=ct!=null&&ct[a]!==undefined?ct[a]:s,ct=null))),s=i.p.idPrefix+s,ri&&(pt=i.p.multiselect?n.inArray(s,i.p.selarrrow)!==-1:s===i.p.selrow),ei=v.length,v.push(""),y&&v.push(er(0,d,i.p.page,i.p.rowNum,hi)),p&&v.push(fr(s,y,d,pt,ci)),g&&v.push(kt.call(nt,p+y,d+r)),it=ni,c.repeatitems&&(c.cell&&(h=n.jgrid.getAccessor(h,c.cell)||h),n.isArray(h)&&(it=dt)),k=0;k<it.length;k++)yt=n.jgrid.getAccessor(h,it[k]),l[i.p.colModel[k+p+g+y].name]=yt,v.push(li(s,yt,k+p+g+y,d+r,h,l));if(v[ei]=yi(s,ui,pt?ti+" "+rt:ti,l,h),v.push("<\/tr>"),i.p.grouping&&(ht.push(v),i.p.groupingView._locgr||wt.call(nt,l,d),v=[]),(et||i.p.treeGrid===!0&&!i.p._ald)&&(l[ft]=n.jgrid.stripPref(i.p.idPrefix,s),i.p.data.push(l),i.p._index[l[ft]]=i.p.data.length-1),i.p.gridview===!1&&(fi.append(v.join("")),nt.triggerHandler("jqGridAfterInsertRow",[s,l,h]),si&&i.p.afterInsertRow.call(i,s,l,h),v=[]),l={},w++,d++,w===st)break}if(i.p.gridview===!0&&(ot=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?et||(nt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,st),ht=null):i.p.treeGrid===!0&&ot>0?n(i.rows[ot]).after(v.join("")):(fi.append(v.join("")),i.grid.cols=i.rows[0].cells)),i.p.totaltime=new Date-oi,v=null,i.p.subGrid===!0)try{nt.jqGrid("addSubGrid",p+y)}catch(vi){}if(w>0&&i.p.records===0&&(i.p.records=ut),i.p.treeGrid===!0)try{nt.jqGrid("setTreeNode",ot+1,w+ot+1)}catch(pi){}if(i.p.reccount=w,i.p.treeANode=-1,i.p.userDataOnFooter&&nt.jqGrid("footerData","set",i.p.userData,!0),et&&(i.p.records=ut,i.p.lastpage=Math.ceil(ut/st)),u||i.updatepager(!1,!0),et){while(w<ut&&tt[w]){if(h=tt[w],s=n.jgrid.getAccessor(h,a),s===undefined&&(typeof a=="number"&&i.p.colModel[a+p+g+y]!=null&&(s=n.jgrid.getAccessor(h,i.p.colModel[a+p+g+y].name)),s===undefined&&(s=ii+w,bt.length===0&&c.cell&&(lt=n.jgrid.getAccessor(h,c.cell)||h,s=lt!=null&&lt[a]!==undefined?lt[a]:s,lt=null))),h){for(s=i.p.idPrefix+s,it=ni,c.repeatitems&&(c.cell&&(h=n.jgrid.getAccessor(h,c.cell)||h),n.isArray(h)&&(it=dt)),k=0;k<it.length;k++)l[i.p.colModel[k+p+g+y].name]=n.jgrid.getAccessor(h,it[k]);l[ft]=n.jgrid.stripPref(i.p.idPrefix,s);i.p.grouping&&wt.call(nt,l,w);i.p.data.push(l);i.p._index[l[ft]]=i.p.data.length-1;l={}}w++}i.p.grouping&&(i.p.groupingView._locgr=!0,nt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,st),ht=null)}},sr=function(t){function et(t){var s=0,e,h,l,c,f,o;if(t.groups!=null){for(h=t.groups.length&&t.groupOp.toString().toUpperCase()==="OR",h&&r.orBegin(),e=0;e<t.groups.length;e++){s>0&&h&&r.or();try{et(t.groups[e])}catch(a){alert(a)}s++}h&&r.orEnd()}if(t.rules!=null)try{for(l=t.rules.length&&t.groupOp.toString().toUpperCase()==="OR",l&&r.orBegin(),e=0;e<t.rules.length;e++)f=t.rules[e],c=t.groupOp.toString().toUpperCase(),d[f.op]&&f.field&&(s>0&&c&&c==="OR"&&(r=r.or()),o=u[f.field],o.stype==="date"&&o.srcfmt&&o.newfmt&&o.srcfmt!==o.newfmt&&(f.data=n.jgrid.parseDate.call(i,o.newfmt,f.data,o.srcfmt)),r=d[f.op](r,c)(f.field,f.data,u[f.field])),s++;l&&r.orEnd()}catch(v){alert(v)}}var f=i.p.multiSort?[]:"",ut=[],nt=!1,u={},tt=[],ft=[],p,y,w,s,b,k,e,h,d,r,l,v,ot,c,ht;if(n.isArray(i.p.data)){if(b=i.p.grouping?i.p.groupingView:!1,n.each(i.p.colModel,function(){if(y=this.sorttype||"text",h=this.index||this.name,y==="date"||y==="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?(p=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:n.jgrid.getRegional(i,"formatter.date.srcformat"),w=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:n.jgrid.getRegional(i,"formatter.date.newformat")):p=w=this.datefmt||"Y-m-d",u[h]={stype:y,srcfmt:p,newfmt:w,sfunc:this.sortfunc||null}):u[h]={stype:y,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},i.p.grouping)for(e=0,k=b.groupField.length;e<k;e++)this.name===b.groupField[e]&&(tt[e]=u[h],ft[e]=h);i.p.multiSort||nt||h!==i.p.sortname||(f=h,nt=!0)}),i.p.multiSort&&(f=st,ut=ci),i.p.treeGrid&&i.p._sort){n(i).jqGrid("SortTree",f,i.p.sortorder,u[f].stype||"text",u[f].srcfmt||"");return}if(d={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return t==="OR"?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return t==="OR"?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return t==="OR"?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return t==="OR"?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return t==="OR"?n.orNot().isNull:n.andNot().isNull}},r=n.jgrid.from.call(i,i.p.data),i.p.ignoreCase&&(r=r.ignoreCase()),i.p.search===!0)if(l=i.p.postData.filters,l)typeof l=="string"&&(l=n.jgrid.parse(l)),et(l);else try{s=u[i.p.postData.searchField];s.stype==="date"&&s.srcfmt&&s.newfmt&&s.srcfmt!==s.newfmt&&(i.p.postData.searchString=n.jgrid.parseDate.call(i,s.newfmt,i.p.postData.searchString,s.srcfmt));r=d[i.p.postData.searchOper](r)(i.p.postData.searchField,i.p.postData.searchString,u[i.p.postData.searchField])}catch(lt){}else i.p.treeGrid&&i.p.treeGridModel==="nested"&&r.orderBy(i.p.treeReader.left_field,"asc","integer","",null);if(i.p.treeGrid&&i.p.treeGridModel==="adjacency"&&(k=0,f=null),i.p.grouping)for(e=0;e<k;e++)r.orderBy(ft[e],b.groupOrder[e],tt[e].stype,tt[e].srcfmt);i.p.multiSort?n.each(f,function(n){r.orderBy(this,ut[n],u[this].stype,u[this].srcfmt,u[this].sfunc)}):f&&i.p.sortorder&&nt&&(i.p.sortorder.toUpperCase()==="DESC"?r.orderBy(i.p.sortname,"d",u[f].stype,u[f].srcfmt,u[f].sfunc):r.orderBy(i.p.sortname,"a",u[f].stype,u[f].srcfmt,u[f].sfunc));var o=r.select(),g=parseInt(i.p.rowNum,10),it=o.length,rt=parseInt(i.p.page,10),ct=Math.ceil(it/g),a={};if((i.p.search||i.p.resetsearch)&&i.p.grouping&&i.p.groupingView._locgr){if(i.p.groupingView.groups=[],ot=n.jgrid.getMethod("groupingPrepare"),i.p.footerrow&&i.p.userDataOnFooter){for(c in i.p.userData)i.p.userData.hasOwnProperty(c)&&(i.p.userData[c]=0);ht=!0}for(v=0;v<it;v++){if(ht)for(c in i.p.userData)i.p.userData.hasOwnProperty(c)&&(i.p.userData[c]+=parseFloat(o[v][c]||0));ot.call(n(i),o[v],v,g)}}return t?o:(o=i.p.treeGrid&&i.p.search?n(i).jqGrid("searchTree",o):o.slice((rt-1)*g,rt*g),r=null,u=null,a[i.p.localReader.total]=ct,a[i.p.localReader.page]=rt,a[i.p.localReader.records]=it,a[i.p.localReader.root]=o,a[i.p.localReader.userdata]=i.p.userData,o=null,a)}},iu=function(t,r){var l,nt,o,w,a,k,y,c="",it,d=i.p.pager?n.jgrid.jqID(i.p.pager.substr(1)):"",u=d?"_"+d:"",s=i.p.toppager?"_"+i.p.toppager.substr(1):"",g,p,tt,rt,ut;o=parseInt(i.p.page,10)-1;o<0&&(o=0);o=o*parseInt(i.p.rowNum,10);a=o+i.p.reccount;i.p.scroll&&(g=n("tbody:first > tr:gt(0)",i.grid.bDiv),a>i.p.records&&(a=i.p.records),o=a-g.length,i.p.reccount=g.length,p=g.outerHeight()||i.grid.prevRowHeight,p&&(tt=o*p,rt=parseInt(i.p.records,10)*p,n(">div:first",i.grid.bDiv).css({height:rt}).children("div:first").css({height:tt,display:tt?"":"none"}),i.grid.bDiv.scrollTop===0&&i.p.page>1&&(i.grid.bDiv.scrollTop=i.p.rowNum*(i.p.page-1)*p)),i.grid.bDiv.scrollLeft=i.grid.hDiv.scrollLeft);c=i.p.pager||"";c+=i.p.toppager?c?","+i.p.toppager:i.p.toppager:"";c&&(y=n.jgrid.getRegional(i,"formatter.integer"),l=b(i.p.page),nt=b(i.p.lastpage),n(".selbox",c)[this.p.useProp?"prop":"attr"]("disabled",!1),i.p.pginput===!0&&(n("#input"+u).html(n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",i.p.pgtext)||"","<input "+f(e,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(d)+"'><\/span>")),i.p.toppager&&n("#input_t"+s).html(n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",i.p.pgtext)||"","<input "+f(e,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(d)+"_toppager'><\/span>")),n(".ui-pg-input",c).val(i.p.page),it=i.p.toppager?"#sp_1"+u+",#sp_1"+u+"_toppager":"#sp_1"+u,n(it).html(n.fmatter?n.fmatter.util.NumberFormat(i.p.lastpage,y):i.p.lastpage)),i.p.viewrecords&&(i.p.reccount===0?n(".ui-paging-info",c).html(n.jgrid.getRegional(i,"defaults.emptyrecords",i.p.emptyrecords)):(w=o+1,k=i.p.records,n.fmatter&&(w=n.fmatter.util.NumberFormat(w,y),a=n.fmatter.util.NumberFormat(a,y),k=n.fmatter.util.NumberFormat(k,y)),ut=n.jgrid.getRegional(i,"defaults.recordtext",i.p.recordtext),n(".ui-paging-info",c).html(n.jgrid.template(ut,w,a,k)))),i.p.pgbuttons===!0&&(l<=0&&(l=nt=0),l===1||l===0?(n("#first"+u+", #prev"+u).addClass(h).removeClass(v),i.p.toppager&&n("#first_t"+s+", #prev_t"+s).addClass(h).removeClass(v)):(n("#first"+u+", #prev"+u).removeClass(h),i.p.toppager&&n("#first_t"+s+", #prev_t"+s).removeClass(h)),l===nt||l===0?(n("#next"+u+", #last"+u).addClass(h).removeClass(v),i.p.toppager&&n("#next_t"+s+", #last_t"+s).addClass(h).removeClass(v)):(n("#next"+u+", #last"+u).removeClass(h),i.p.toppager&&n("#next_t"+s+", #last_t"+s).removeClass(h))));t===!0&&i.p.rownumbers===!0&&n(">td.jqgrid-rownum",i.rows).each(function(t){n(this).html(o+1+t)});r&&i.p.jqgdnd&&n(i).jqGrid("gridDnD","updateDnD");n(i).triggerHandler("jqGridGridComplete");n.isFunction(i.p.gridComplete)&&i.p.gridComplete.call(i);n(i).triggerHandler("jqGridAfterGridComplete")},vt=function(){(i.grid.hDiv.loading=!0,i.p.hiddengrid)||n(i).jqGrid("progressBar",{method:"show",loadtype:i.p.loadui,htmlcontent:n.jgrid.getRegional(i,"defaults.loadtext",i.p.loadtext)})},nt=function(){i.grid.hDiv.loading=!1;n(i).jqGrid("progressBar",{method:"hide",loadtype:i.p.loadui})},ti=function(t,r,u){var f=n(i).triggerHandler("jqGridBeforeProcessing",[t,r,u]);return f=f===undefined||typeof f!="boolean"?!0:f,n.isFunction(i.p.beforeProcessing)&&i.p.beforeProcessing.call(i,t,r,u)===!1&&(f=!1),f},hr=function(t,r){n(i).triggerHandler("jqGridLoadComplete",[t]);r&&i.p.loadComplete.call(i,t);n(i).triggerHandler("jqGridAfterLoadComplete",[t]);i.p.datatype="local";i.p.datastr=null;nt()},it=function(t){var y,c,w,p,l,e,o;if(!i.grid.hDiv.loading){var b=i.p.scroll&&t===!1,u={},a,f,r=i.p.prmNames;i.p.page<=0&&(i.p.page=Math.min(1,i.p.lastpage));r.search!==null&&(u[r.search]=i.p.search);r.nd!==null&&(u[r.nd]=(new Date).getTime());r.rows!==null&&(u[r.rows]=i.p.rowNum);r.page!==null&&(u[r.page]=i.p.page);r.sort!==null&&(u[r.sort]=i.p.sortname);r.order!==null&&(u[r.order]=i.p.sortorder);i.p.rowTotal!==null&&r.totalrows!==null&&(u[r.totalrows]=i.p.rowTotal);var v=n.isFunction(i.p.loadComplete),s=v?i.p.loadComplete:null,h=0;if(t=t||1,t>1?r.npage!==null?(u[r.npage]=t,h=t-1,t=1):s=function(n){i.p.page++;i.grid.hDiv.loading=!1;v&&i.p.loadComplete.call(i,n);it(t-1)}:r.npage!==null&&delete i.p.postData[r.npage],i.p.grouping){for(n(i).jqGrid("groupingSetup"),y=i.p.groupingView,w="",c=0;c<y.groupField.length;c++)p=y.groupField[c],n.each(i.p.colModel,function(n,t){t.name===p&&t.index&&(p=t.index)}),w+=p+" "+y.groupOrder[c]+", ";u[r.sort]=w+u[r.sort]}if(n.extend(i.p.postData,u),l=i.p.scroll?i.rows.length-1:1,n.isFunction(i.p.datatype)){i.p.datatype.call(i,i.p.postData,"load_"+i.p.id,l,t,h);return}if(e=n(i).triggerHandler("jqGridBeforeRequest"),e===!1||e==="stop")return;if(n.isFunction(i.p.beforeRequest)&&(e=i.p.beforeRequest.call(i),e===!1||e==="stop"))return;a=i.p.datatype.toLowerCase();switch(a){case"json":case"jsonp":case"xml":case"script":n.ajax(n.extend({url:i.p.url,type:i.p.mtype,dataType:a,data:n.isFunction(i.p.serializeGridData)?i.p.serializeGridData.call(i,i.p.postData):i.p.postData,success:function(r,u,f){if(!ti(r,u,f)){nt();return}a==="xml"?pi(r,l,t>1,h):ni(r,l,t>1,h);n(i).triggerHandler("jqGridLoadComplete",[r]);s&&s.call(i,r);n(i).triggerHandler("jqGridAfterLoadComplete",[r]);b&&i.grid.populateVisible();(i.p.loadonce||i.p.treeGrid)&&(i.p.datatype="local");r=null;t===1&&nt()},error:function(r,u,f){n(i).triggerHandler("jqGridLoadError",[r,u,f]);n.isFunction(i.p.loadError)&&i.p.loadError.call(i,r,u,f);t===1&&nt();r=null},beforeSend:function(t,r){var u=!0;if(u=n(i).triggerHandler("jqGridLoadBeforeSend",[t,r]),n.isFunction(i.p.loadBeforeSend)&&(u=i.p.loadBeforeSend.call(i,t,r)),u===undefined&&(u=!0),u===!1)return!1;vt()}},n.jgrid.ajaxOptions,i.p.ajaxGridOptions));break;case"xmlstring":if(vt(),f=typeof i.p.datastr!="string"?i.p.datastr:n.parseXML(i.p.datastr),!ti(f,200,null)){nt();return}pi(f);hr(f,v);break;case"jsonstring":if(vt(),f=typeof i.p.datastr=="string"?n.jgrid.parse(i.p.datastr):i.p.datastr,!ti(f,200,null)){nt();return}ni(f);hr(f,v);break;case"local":case"clientside":if(vt(),i.p.datatype="local",i.p._ald=!0,o=sr(!1),!ti(o,200,null)){nt();return}ni(o,l,t>1,h);n(i).triggerHandler("jqGridLoadComplete",[o]);s&&s.call(i,o);n(i).triggerHandler("jqGridAfterLoadComplete",[o]);b&&i.grid.populateVisible();nt();i.p._ald=!1}i.p._sort=!1}},ii=function(t){n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv)[i.p.useProp?"prop":"attr"]("checked",t);var r=i.p.frozenColumns?i.p.id+"_frozen":"";r&&n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.fhDiv)[i.p.useProp?"prop":"attr"]("checked",t)},cr=function(t,r){var tt="<td class='ui-pg-button "+h+"'><span class='ui-separator'><\/span><\/td>",c="",u="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",l="",o,rt,ut,ft,a,et,d,nt=function(t,r){var u;return(u=n(i).triggerHandler("jqGridPaging",[t,r]),u==="stop")?!1:(n.isFunction(i.p.onPaging)&&(u=i.p.onPaging.call(i,t,r)),u==="stop")?!1:(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],ii(!1)),i.p.savedRow=[],!0)},s;if(t=t.substr(1),r+="_"+t,o="pg_"+t,rt=t+"_left",ut=t+"_center",ft=t+"_right",n("#"+n.jgrid.jqID(t)).append("<div id='"+o+"' class='ui-pager-control' role='group'><table "+f(e,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+rt+"' align='left'><\/td><td id='"+ut+"' align='center' style='white-space:pre;'><\/td><td id='"+ft+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),i.p.rowList.length>0){for(l='<td dir="'+y+'">',l+="<select "+f(e,"pgSelectBox",!1,"ui-pg-selbox")+' role="listbox" title="'+(n.jgrid.getRegional(i,"defaults.pgrecs",i.p.pgrecs)||"")+'">',d=0;d<i.p.rowList.length;d++)s=i.p.rowList[d].toString().split(":"),s.length===1&&(s[1]=s[0]),l+='<option role="option" value="'+s[0]+'"'+(b(i.p.rowNum,0)===b(s[0],0)?' selected="selected"':"")+">"+s[1]+"<\/option>";l+="<\/select><\/td>"}if(y==="rtl"&&(u+=l),i.p.pginput===!0&&(c="<td id='input"+r+"' dir='"+y+"'>"+n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",i.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(t)+"'><\/span>")+"<\/td>"),i.p.pgbuttons===!0){var p=["first"+r,"prev"+r,"next"+r,"last"+r],g=f(e,"pgButtonBox",!0,"ui-pg-button"),k=[n.jgrid.getRegional(i,"defaults.pgfirst",i.p.pgfirst)||"",n.jgrid.getRegional(i,"defaults.pgprev",i.p.pgprev)||"",n.jgrid.getRegional(i,"defaults.pgnext",i.p.pgnext)||"",n.jgrid.getRegional(i,"defaults.pglast",i.p.pglast)||""];y==="rtl"&&(p.reverse(),k.reverse());u+="<td id='"+p[0]+"' class='"+g+"' title='"+k[0]+"'><span "+f(e,"icon_first",!1,w)+"><\/span><\/td>";u+="<td id='"+p[1]+"' class='"+g+"'  title='"+k[1]+"'><span "+f(e,"icon_prev",!1,w)+"><\/span><\/td>";u+=c!==""?tt+c+tt:"";u+="<td id='"+p[2]+"' class='"+g+"' title='"+k[2]+"'><span "+f(e,"icon_next",!1,w)+"><\/span><\/td>";u+="<td id='"+p[3]+"' class='"+g+"' title='"+k[3]+"'><span "+f(e,"icon_end",!1,w)+"><\/span><\/td>"}else c!==""&&(u+=c);y==="ltr"&&(u+=l);u+="<\/tr><\/tbody><\/table>";i.p.viewrecords===!0&&n("td#"+t+"_"+i.p.recordpos,"#"+o).append("<div dir='"+y+"' style='text-align:"+i.p.recordpos+"' class='ui-paging-info'><\/div>");n("td#"+t+"_"+i.p.pagerpos,"#"+o).append(u);et=n("#gbox_"+n.jgrid.jqID(i.p.id)).css("font-size")||"11px";n("#gbox_"+n.jgrid.jqID(i.p.id)).append("<div id='testpg' "+f(e,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+et+";visibility:hidden;' ><\/div>");a=n(u).clone().appendTo("#testpg").width();n("#testpg").remove();a>0&&(c!==""&&(a+=50),n("td#"+t+"_"+i.p.pagerpos,"#"+o).width(a));i.p._nvtd=[];i.p._nvtd[0]=a?Math.floor((i.p.width-a)/2):Math.floor(i.p.width/3);i.p._nvtd[1]=0;u=null;n(".ui-pg-selbox","#"+o).on("change",function(){return nt("records",this)?(i.p.page=Math.round(i.p.rowNum*(i.p.page-1)/this.value-.5)+1,i.p.rowNum=this.value,i.p.pager&&n(".ui-pg-selbox",i.p.pager).val(this.value),i.p.toppager&&n(".ui-pg-selbox",i.p.toppager).val(this.value),it(),!1):!1});if(i.p.pgbuttons===!0&&(n(".ui-pg-button","#"+o).hover(function(){n(this).hasClass(h)?this.style.cursor="default":(n(this).addClass(v),this.style.cursor="pointer")},function(){n(this).hasClass(h)||(n(this).removeClass(v),this.style.cursor="default")}),n("#first"+n.jgrid.jqID(r)+", #prev"+n.jgrid.jqID(r)+", #next"+n.jgrid.jqID(r)+", #last"+n.jgrid.jqID(r)).click(function(){if(n(this).hasClass(h))return!1;var t=b(i.p.page,1),u=b(i.p.lastpage,1),f=!1,s=!0,c=!0,e=!0,o=!0;return(u===0||u===1?(s=!1,c=!1,e=!1,o=!1):u>1&&t>=1?t===1?(s=!1,c=!1):t===u&&(e=!1,o=!1):u>1&&t===0&&(e=!1,o=!1,t=u-1),!nt(this.id.split("_")[0],this))?!1:(this.id==="first"+r&&s&&(i.p.page=1,f=!0),this.id==="prev"+r&&c&&(i.p.page=t-1,f=!0),this.id==="next"+r&&e&&(i.p.page=t+1,f=!0),this.id==="last"+r&&o&&(i.p.page=u,f=!0),f&&it(),!1)})),i.p.pginput===!0)n("#"+o).on("keypress","input.ui-pg-input",function(t){var r=t.charCode||t.keyCode||0;return r===13?nt("user",this)?(n(this).val(b(n(this).val(),1)),i.p.page=n(this).val()>0?n(this).val():i.p.page,it(),!1):!1:this})},ru=function(t,r){var o,f="",u=i.p.colModel,h=!1,c,e=i.p.frozenColumns?r:i.grid.headers[t].el,s="";n("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");n(e).attr("aria-selected","false");u[t].lso?u[t].lso==="asc"?(u[t].lso+="-desc",s="desc"):u[t].lso==="desc"?(u[t].lso+="-asc",s="asc"):(u[t].lso==="asc-desc"||u[t].lso==="desc-asc")&&(u[t].lso=""):u[t].lso=s=u[t].firstsortorder||"asc";s?(n("span.s-ico",e).show(),n("span.ui-icon-"+s,e).removeClass("ui-state-disabled"),n(e).attr("aria-selected","true")):i.p.viewsortcols[0]||n("span.s-ico",e).hide();i.p.sortorder="";n.each(u,function(n){this.lso&&(n>0&&h&&(f+=", "),o=this.lso.split("-"),f+=u[n].index||u[n].name,f+=" "+o[o.length-1],h=!0,i.p.sortorder=o[o.length-1])});c=f.lastIndexOf(i.p.sortorder);f=f.substring(0,c);i.p.sortname=f},ri=function(t,r,u,f,e){var a;if(i.p.colModel[r].sortable&&!(i.p.savedRow.length>0)){if(u||(i.p.lastsort===r&&i.p.sortname!==""?i.p.sortorder==="asc"?i.p.sortorder="desc":i.p.sortorder==="desc"&&(i.p.sortorder="asc"):i.p.sortorder=i.p.colModel[r].firstsortorder||"asc",i.p.page=1),i.p.multiSort)ru(r,e);else{if(f){if(i.p.lastsort===r&&i.p.sortorder===f&&!u)return;i.p.sortorder=f}var c=i.grid.headers[i.p.lastsort]?i.grid.headers[i.p.lastsort].el:null,s=i.p.frozenColumns?e:i.grid.headers[r].el,l=i.p.viewsortcols[1]==="single"?!0:!1,o;o=n(c).find("span.ui-grid-ico-sort");o.addClass(h);l&&n(o).css("display","none");n(c).attr("aria-selected","false");i.p.frozenColumns&&(o=i.grid.fhDiv.find("span.ui-grid-ico-sort"),o.addClass(h),l&&o.css("display","none"),i.grid.fhDiv.find("th").attr("aria-selected","false"));o=n(s).find("span.ui-icon-"+i.p.sortorder);o.removeClass(h);l&&o.css("display","");n(s).attr("aria-selected","true");i.p.viewsortcols[0]||(i.p.lastsort!==r?(i.p.frozenColumns&&i.grid.fhDiv.find("span.s-ico").hide(),n("span.s-ico",c).hide(),n("span.s-ico",s).show()):i.p.sortname===""&&n("span.s-ico",s).show());t=t.substring(5+i.p.id.length+1);i.p.sortname=i.p.colModel[r].index||t}if(n(i).triggerHandler("jqGridSortCol",[i.p.sortname,r,i.p.sortorder])==="stop"){i.p.lastsort=r;return}if(n.isFunction(i.p.onSortCol)&&i.p.onSortCol.call(i,i.p.sortname,r,i.p.sortorder)==="stop"){i.p.lastsort=r;return}i.p.datatype==="local"?i.p.deselectAfterSort&&n(i).jqGrid("resetSelection"):(i.p.selrow=null,i.p.multiselect&&ii(!1),i.p.selarrrow=[],i.p.savedRow=[]);i.p.scroll&&(a=i.grid.bDiv.scrollLeft,at.call(i,!0,!1),i.grid.hDiv.scrollLeft=a);i.p.subGrid&&i.p.datatype==="local"&&n("td.sgexpanded","#"+n.jgrid.jqID(i.p.id)).each(function(){n(this).trigger("click")});i.p._sort=!0;it();i.p.lastsort=r;i.p.sortname!==t&&r&&(i.p.lastsort=r)}},uu=function(){var t=0,u=n.jgrid.cell_width?0:b(i.p.cellLayout,0),f=0,c,h=b(i.p.scrollOffset,0),o,l=!1,a,e=0,s;n.each(i.p.colModel,function(){if(this.hidden===undefined&&(this.hidden=!1),i.p.grouping&&i.p.autowidth){var r=n.inArray(this.name,i.p.groupingView.groupField);r>=0&&i.p.groupingView.groupColumnShow.length>r&&(this.hidden=!i.p.groupingView.groupColumnShow[r])}this.widthOrg=o=b(this.width,0);this.hidden===!1&&(t+=o+u,this.fixed?e+=o+u:f++)});isNaN(i.p.width)&&(i.p.width=t+(i.p.shrinkToFit===!1&&!isNaN(i.p.height)?h:0));r.width=parseInt(i.p.width,10);i.p.tblwidth=t;i.p.shrinkToFit===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1);i.p.shrinkToFit===!0&&f>0&&(a=r.width-u*f-e,isNaN(i.p.height)||(a-=h,l=!0),t=0,n.each(i.p.colModel,function(n){this.hidden!==!1||this.fixed||(o=Math.round(a*this.width/(i.p.tblwidth-u*f-e)),this.width=o,t+=o,c=n)}),s=0,l?r.width-e-(t+u*f)!==h&&(s=r.width-e-(t+u*f)-h):l||Math.abs(r.width-e-(t+u*f))===1||(s=r.width-e-(t+u*f)),i.p.colModel[c].width+=s,i.p.tblwidth=t+s+u*f+e,i.p.tblwidth>i.p.width&&(i.p.colModel[c].width-=i.p.tblwidth-parseInt(i.p.width,10),i.p.tblwidth=i.p.width))},fu=function(n){for(var u=n,r=n,t=n+1;t<i.p.colModel.length;t++)if(i.p.colModel[t].hidden!==!0){r=t;break}return r-u},eu=function(t){var u=n(i.grid.headers[t].el),r=[u.position().left+u.outerWidth()];return i.p.direction==="rtl"&&(r[0]=i.p.width-r[0]),r[0]-=i.grid.bDiv.scrollLeft,r.push(n(i.grid.hDiv).position().top),r.push(n(i.grid.bDiv).offset().top-n(i.grid.hDiv).offset().top+n(i.grid.bDiv).height()),r},lr=function(t){for(var u=i.grid.headers,f=n.jgrid.getCellIndex(t),r=0;r<u.length;r++)if(t===u[r].el){f=r;break}return f},ou=function(t,r,u){for(var o=i.p.colModel,c=o.length,e=[],l,a=n.jgrid.getRegional(i,"colmenu"),h='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content" role="menu" tabindex="0" style="left:'+r+"px;top:"+t+'px;">',f=0;f<c;f++){var y=o[f].hidden?"":"checked",s=o[f].name,b=i.p.colNames[f];l=s==="cb"||s==="subgrid"||s==="rn"||o[f].hidedlg?"style='display:none'":"";h+="<li "+l+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+a.reorder+'"><span class="'+w+" "+p.icon_move+' notclick"><\/span><\/td><td class="menu_icon"><input class="'+p.input_checkbox+'" type="checkbox" name="'+s+'" '+y+'><\/td><td class="menu_text">'+b+"<\/td><\/tr><\/table><\/a><\/li>";e.push(f)}if(h+="<\/ul>",n(u).append(h),n("#col_menu").addClass("ui-menu "+p.menu_widget),n.fn.html5sortable())n("#col_menu").html5sortable({handle:"span",forcePlaceholderSize:!0}).on("sortupdate",function(t,r){for(e.splice(r.startindex,1),e.splice(r.endindex,0,r.startindex),n(i).jqGrid("destroyFrozenColumns"),n(i).jqGrid("remapColumns",e,!0),n(i).jqGrid("setFrozenColumns"),f=0;f<c;f++)e[f]=f});n("#col_menu > li > a").on("click",function(t){var r;n(t.target).hasClass("notclick")||(n(t.target).is(":input")?r=n(t.target).is(":checked"):(r=!n("input",this).is(":checked"),n("input",this).prop("checked",r)),r?(n(i).jqGrid("showCol",n("input",this).attr("name")),n(this).parent().attr("draggable","true")):(n(i).jqGrid("hideCol",n("input",this).attr("name")),n(this).parent().attr("draggable","false")))}).hover(function(){n(this).addClass(v)},function(){n(this).removeClass(v)})},su=function(t,r,u,f){var e=i.p.colModel[t],h,nt="",k="",tt="",it="",d="",g,rt,y="",c,s,w=n.jgrid.getRegional(i,"search"),ut=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common,o,l,b,a;if(e){h=i.p.colFilters&&i.p.colFilters[e.name]?i.p.colFilters[e.name]:!1;h&&!n.isEmptyObject(h)&&(nt=h.oper1,k=h.value1,tt=h.rule,it=h.oper2,d=h.value2);e.searchoptions||(e.searchoptions={});g=e.searchoptions.sopt?e.searchoptions.sopt:e.sorttype==="text"?["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"]:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"];rt=e.searchoptions.groupOps?e.searchoptions.groupOps:w.groupOps;s=n("<form><\/form>");o="<div>"+n.jgrid.getRegional(i,"colmenu.searchTitle")+"<\/div>";o+='<div><select id="oper1" class="'+p.filter_select+'">';n.each(w.odata,function(t,i){c=i.oper===nt?'selected="selected"':"";n.inArray(i.oper,g)!==-1&&(y+='<option value="'+i.oper+'" '+c+">"+i.text+"<\/option>")});o+=y;o+="<\/select><\/div>";s.append(o);l="";e.searchoptions.defaultValue&&(l=n.isFunction(e.searchoptions.defaultValue)?e.searchoptions.defaultValue.call(i):e.searchoptions.defaultValue);k&&(l=k);b=n.extend(e.searchoptions,{name:e.index||e.name,id:"sval1_"+i.p.idPrefix+e.name,oper:"search"});a=n.jgrid.createEl.call(i,e.stype,b,l,!1,n.extend({},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));n(a).addClass(p.filter_input);o=n("<div><\/div>").append(a);s.append(o);o='<div><select id="operand" class="'+p.filter_select+'">';n.each(rt,function(n,t){c=t.op===tt?'selected="selected"':"";o+="<option value='"+t.op+"' "+c+">"+t.text+"<\/option>"});o+="<\/select><\/div>";s.append(o);y="";n.each(w.odata,function(t,i){c=i.oper===it?'selected="selected"':"";n.inArray(i.oper,g)!==-1&&(y+='<option value="'+i.oper+'" '+c+">"+i.text+"<\/option>")});o='<div><select id="oper2" class="'+p.filter_select+'">'+y+"<\/select><\/div>";s.append(o);l=d?d:"";b=n.extend(e.searchoptions,{name:e.index||e.name,id:"sval2_"+i.p.idPrefix+e.name,oper:"search"});a=n.jgrid.createEl.call(i,e.stype,b,l,!1,n.extend({},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));n(a).addClass(p.filter_input);o=n("<div><\/div>").append(a);s.append(o);o="<div>";o+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+ut.button+" ui-reset'>"+w.Reset+"<\/a><\/div>";o+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+ut.button+" ui-search'>"+w.Find+"<\/a><\/div>";o+="<\/div>";s.append(o);s=n('<li class="ui-menu-item" role="presentation"><\/li>').append(s);s=n('<ul id="search_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="left:'+u+"px;top:"+r+'px;"><\/ul>').append(s);n(f).append(s);n("#search_menu").addClass("ui-menu "+p.menu_widget);n("#bs_reset, #bs_search","#search_menu").hover(function(){n(this).addClass(v)},function(){n(this).removeClass(v)});n("#bs_reset",s).on("click",function(){i.p.colFilters[e.name]={};i.p.postData.filters=ar();i.p.search=!1;n(i).trigger("reloadGrid");n("#column_menu").remove()});n("#bs_search",s).on("click",function(){i.p.colFilters[e.name]={oper1:n("#oper1","#search_menu").val(),value1:n("#sval1_"+i.p.idPrefix+e.name,"#search_menu").val(),rule:n("#operand","#search_menu").val(),oper2:n("#oper2","#search_menu").val(),value2:n("#sval2_"+i.p.idPrefix+e.name,"#search_menu").val()};i.p.postData.filters=ar();i.p.search=!0;n(i).trigger("reloadGrid");n("#column_menu").remove()})}},ar=function(){var t='{"groupOp":"AND","rules":[], "groups" : [',f=0,u,r;for(u in i.p.colFilters)i.p.colFilters.hasOwnProperty(u)&&(r=i.p.colFilters[u],n.isEmptyObject(r)||(f>0&&(t+=","),t+='{"groupOp": "'+r.rule+'", "rules" : [',t+='{"field":"'+u+'",',t+='"op":"'+r.oper1+'",',r.value1+="",t+='"data":"'+r.value1.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',r.value2&&(t+=',{"field":"'+u+'",',t+='"op":"'+r.oper2+'",',r.value2+="",t+='"data":"'+r.value2.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}'),t+="]}",f++));return t+"]}"},hu=function(t,r){var f=i.p.colModel[t],u=i.p.groupingView;r!==-1?u.groupField.splice(r,1):u.groupField.push(f.name);n(i).jqGrid("groupingGroupBy",u.groupField);i.p.frozenColumns&&(n(i).jqGrid("destroyFrozenColumns"),n(i).jqGrid("setFrozenColumns"))},cu=function(t,r){for(var f=[],s=i.p.colModel.length,e=-1,o=i.p.colModel,u=0;u<s;u++)o[u].frozen&&(e=u),f.push(u);f.splice(t,1);f.splice(e+(r?1:0),0,t);o[t].frozen=r;n(i).jqGrid("destroyFrozenColumns");n(i).jqGrid("remapColumns",f,!0);n(i).jqGrid("setFrozenColumns")},lu=function(t,r,u){var a;r=parseInt(r,10);u=parseInt(u,10)+25;var y=n(".ui-jqgrid-view").css("font-size")||"11px",f='<ul id="column_menu" class="ui-search-menu modal-content column-menu" role="menu" tabindex="0" style="font-size:'+y+";left:"+r+"px;top:"+u+'px;">',o=i.p.colModel[t],s=n.extend({sorting:!0,columns:!0,filtering:!0,seraching:!0,grouping:!0,freeze:!0},o.coloptions),e=n.jgrid.getRegional(i,"colmenu"),h=i.p.colNames[t],c,l;s.sorting&&(f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+p.icon_sort_asc+'"><\/span><\/td><td class="menu_text">'+e.sortasc+"<\/td><\/tr><\/table><\/a><\/li>",f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+p.icon_sort_desc+'"><\/span><\/td><td class="menu_text">'+e.sortdesc+"<\/td><\/tr><\/table><\/a><\/li>");s.columns&&(f+='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+p.icon_columns+'"><\/span><\/td><td class="menu_text">'+e.columns+"<\/td><\/tr><\/table><\/a><\/li>");s.filtering&&(f+='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+p.icon_filter+'"><\/span><\/td><td class="menu_text">'+e.filter+" "+h+"<\/td><\/tr><\/table><\/a><\/li>");s.grouping&&(c=n.inArray(o.name,i.p.groupingView.groupField),f+='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+p.icon_group+'"><\/span><\/td><td class="menu_text">'+(c!==-1?e.ungrouping:e.grouping+" "+h)+"<\/td><\/tr><\/table><\/a><\/li>");s.freeze&&(l=o.frozen&&i.p.frozenColumns?!1:!0,f+='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+p.icon_freeze+'"><\/span><\/td><td class="menu_text">'+(l?e.freeze+" "+h:e.unfreeze)+"<\/td><\/tr><\/table><\/a><\/li>");f+="<\/ul>";n("body").append(f);n("#column_menu").addClass("ui-menu "+p.menu_widget);i.p.direction==="ltr"&&(a=n("#column_menu").width()+26,n("#column_menu").css("left",r-a+"px"));n("#column_menu > li > a").hover(function(){n("#col_menu").remove();n("#search_menu").remove();var i,r;n(this).attr("value")==="columns"&&(i=n(this).parent().width()+18,r=n(this).parent().position().top-5,ou(r,i,n(this).parent()));n(this).attr("value")==="filtering"&&(i=n(this).parent().width()+18,r=n(this).parent().position().top-5,su(t,r,i,n(this).parent()));n(this).addClass(v)},function(){n(this).removeClass(v)}).click(function(){var r=n(this).attr("value"),u=i.grid.headers[t].el;r==="sortasc"?ri("jqgh_"+i.p.id+"_"+o.name,t,!0,"asc",u):r==="sortdesc"?ri("jqgh_"+i.p.id+"_"+o.name,t,!0,"desc",u):r==="grouping"?hu(t,c):r==="freeze"&&cu(t,l);(r.indexOf("sort")!==-1||r==="grouping"||r==="freeze")&&n(this).remove()})},vr;if(i.p.colMenu)n("body").on("click",function(t){n(t.target).closest(".column-menu").length||n("#column_menu").remove()});for(this.p.id=this.id,n.inArray(i.p.multikey,["shiftKey","altKey","ctrlKey"])===-1&&(i.p.multikey=!1),i.p.keyName=!1,o=0;o<i.p.colModel.length;o++)vr=typeof i.p.colModel[o].template=="string"?n.jgrid.cmTemplate!=null&&typeof n.jgrid.cmTemplate[i.p.colModel[o].template]=="object"?n.jgrid.cmTemplate[i.p.colModel[o].template]:{}:i.p.colModel[o].template,i.p.colModel[o]=n.extend(!0,{},i.p.cmTemplate,vr||{},i.p.colModel[o]),i.p.keyName===!1&&i.p.colModel[o].key===!0&&(i.p.keyName=i.p.colModel[o].name,i.p.keyIndex=o);if(i.p.sortorder=i.p.sortorder.toLowerCase(),n.jgrid.cell_width=n.jgrid.cellWidth(),i.p.grouping===!0&&(i.p.scroll=!1,i.p.rownumbers=!1,i.p.treeGrid=!1,i.p.gridview=!0),this.p.treeGrid===!0){try{n(this).jqGrid("setTreeGrid")}catch(au){}i.p.datatype!=="local"&&(i.p.localReader={id:"_id_"})}if(this.p.subGrid)try{n(i).jqGrid("setSubGrid")}catch(vu){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:n.jgrid.cell_width?i.p.multiselectWidth+i.p.cellLayout:i.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:i.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));i.p.xmlReader=n.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},i.p.xmlReader);i.p.jsonReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.jsonReader);i.p.localReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.localReader);i.p.scroll&&(i.p.pgbuttons=!1,i.p.pginput=!1,i.p.rowList=[]);i.p.data.length&&(or(),vi());var k="<thead><tr class='ui-jqgrid-labels' role='row'>",yr,wi,ui,yt,et="",l,c,pr,pt,bi="",ki="",s;if(i.p.shrinkToFit===!0&&i.p.forceFit===!0)for(o=i.p.colModel.length-1;o>=0;o--)if(!i.p.colModel[o].hidden){i.p.colModel[o].resizable=!1;break}if(i.p.viewsortcols[1]==="horizontal"?(bi=" ui-i-asc",ki=" ui-i-desc"):i.p.viewsortcols[1]==="single"&&(bi=" ui-single-sort-asc",ki=" ui-single-sort-desc",et=" style='display:none'",i.p.viewsortcols[0]=!1),yr=ir?"class='ui-th-div-ie'":"",pt="<span class='s-ico' style='display:none'>",pt+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+bi+" ui-sort-"+y+" "+h+" "+w+" "+f(e,"icon_asc",!0)+"'"+et+"><\/span>",pt+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ki+" ui-sort-"+y+" "+h+" "+w+" "+f(e,"icon_desc",!0)+"'"+et+"><\/span><\/span>",i.p.multiSort&&i.p.sortname)for(st=i.p.sortname.split(","),o=0;o<st.length;o++)ut=n.trim(st[o]).split(" "),st[o]=n.trim(ut[0]),ci[o]=ut[1]?n.trim(ut[1]):i.p.sortorder||"asc";for(o=0;o<this.p.colNames.length;o++)wr=i.p.headertitles?' title="'+n.jgrid.stripHtml(i.p.colNames[o])+'"':"",s=i.p.colModel[o],s.hasOwnProperty("colmenu")||(s.colmenu=s.name==="rn"||s.name==="cb"||s.name==="subgrid"?!1:!0),k+="<th id='"+i.p.id+"_"+s.name+"' role='columnheader' "+f(e,"headerBox",!1,"ui-th-column ui-th-"+y)+" "+wr+">",wi=s.index||s.name,k+="<div class='ui-th-div' id='jqgh_"+i.p.id+"_"+s.name+"' "+yr+">"+i.p.colNames[o],s.width=s.width?parseInt(s.width,10):150,typeof s.title!="boolean"&&(s.title=!0),s.lso="",wi===i.p.sortname&&(i.p.lastsort=o),i.p.multiSort&&(ut=n.inArray(wi,st),ut!==-1&&(s.lso=ci[ut])),k+=pt,i.p.colMenu&&s.colmenu&&(k+="<a class='colmenu' href='#/'><span class='colmenuspan "+w+" "+p.icon_menu+"'><\/span><\/a>"),k+="<\/div><\/th>";if(k+="<\/tr><\/thead>",pt=null,s=null,n(this).append(k),n("thead tr:first th",this).hover(function(){n(this).addClass(v)},function(){n(this).removeClass(v)}),this.p.multiselect){wt=[];n("#cb_"+n.jgrid.jqID(i.p.id),this).on("click",function(){i.p.selarrrow=[];var t=i.p.frozenColumns===!0?i.p.id+"_frozen":"";this.checked?(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("jqgroup")||n(this).hasClass(h)||n(this).hasClass("jqfoot")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!0),n(this).addClass(rt).attr("aria-selected","true"),i.p.selarrrow.push(this.id),i.p.selrow=this.id,t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!0),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).addClass(rt))))}),ht=!0,wt=[]):(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("jqgroup")||n(this).hasClass(h)||n(this).hasClass("jqfoot")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!1),n(this).removeClass(rt).attr("aria-selected","false"),wt.push(this.id),t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!1),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).removeClass(rt))))}),i.p.selrow=null,ht=!1);n(i).triggerHandler("jqGridSelectAll",[ht?i.p.selarrrow:wt,ht]);n.isFunction(i.p.onSelectAll)&&i.p.onSelectAll.call(i,ht?i.p.selarrrow:wt,ht)})}if(i.p.autowidth===!0&&(di=n(ft).innerWidth(),i.p.width=di>0?di:"nw"),uu(),n(ft).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+i.p.id+"'>&#160;<\/div>"),i.p.scrollPopUp&&n(ft).append("<div "+f(e,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+i.p.id+"'><\/div>"),n(tt).css("width",r.width+"px"),k=n("thead:first",i).get(0),bt="",i.p.footerrow&&(bt+="<table role='presentation' style='width:"+i.p.tblwidth+"px' "+f(e,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+f(e,"footerBox",!1,"footrow footrow-"+y)+">"),gi=n("tr:first",k),kt="<tr class='jqgfirstrow' role='row'>",i.p.disableClick=!1,n("th",gi).each(function(t){var f,u;s=i.p.colModel[t];ui=s.width;s.resizable===undefined&&(s.resizable=!0);s.resizable?(yt=document.createElement("span"),n(yt).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+y).css("cursor","col-resize"),n(this).addClass(i.p.resizeclass)):yt="";n(this).css("width",ui+"px").prepend(yt);yt=null;f="";s.hidden&&(n(this).css("display","none"),f="display:none;");kt+="<td role='gridcell' style='height:0px;width:"+ui+"px;"+f+"'><\/td>";r.headers[t]={width:ui,el:this};et=s.sortable;typeof et!="boolean"&&(s.sortable=!0,et=!0);u=s.name;u==="cb"||u==="subgrid"||u==="rn"||i.p.viewsortcols[2]&&n(">div",this).addClass("ui-jqgrid-sortable");et&&(i.p.multiSort?i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),i.tmpcm.lso&&n("div span.ui-icon-"+s.lso,this).removeClass(h).css("display","")):s.lso&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+s.lso,this).removeClass(h).css("display","")):i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),t===i.p.lastsort&&n("div span.ui-icon-"+i.p.sortorder,this).removeClass(h).css("display","")):t===i.p.lastsort&&i.p.sortname!==""&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+i.p.sortorder,this).removeClass(h).css("display","")));i.p.footerrow&&(bt+="<td role='gridcell' "+lt(t,0,"",null,"",!1)+">&#160;<\/td>")}).mousedown(function(t){if(n(t.target).closest("th>span.ui-jqgrid-resize").length===1){var u=lr(this);return i.p.forceFit===!0&&(i.p.nv=fu(u)),r.dragStart(u,t,eu(u)),!1}}).click(function(t){var f,o,s,r,u,h,e;if(i.p.disableClick)return i.p.disableClick=!1,!1;if(f="th>div.ui-jqgrid-sortable",i.p.viewsortcols[2]||(f="th>div>span>span.ui-grid-ico-sort"),r=n(t.target).closest(f),r.length===1){if(i.p.frozenColumns?(h=n(this)[0].id.substring(i.p.id.length+1),n(i.p.colModel).each(function(n){if(this.name===h)return u=n,!1})):u=lr(this),n(t.target).hasClass("colmenuspan")){if(n("#column_menu")[0]!=null&&n("#column_menu").remove(),e=n.jgrid.getCellIndex(t.target),e===-1)return;var c=n(this).offset(),l=c.left,a=c.top;i.p.direction==="ltr"&&(l+=n(this).outerWidth());lu(e,l,a,r);t.stopPropagation();return}return i.p.viewsortcols[2]||(o=!0,s=r.attr("sort")),u!=null&&ri(n("div",this)[0].id,u,o,s,this),!1}}),s=null,i.p.sortable&&n.fn.sortable)try{n(i).jqGrid("sortableColumns",gi)}catch(yu){}i.p.footerrow&&(bt+="<\/tr><\/tbody><\/table>");kt+="<\/tr>";pr=document.createElement("tbody");this.appendChild(pr);n(this).addClass(f(e,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(kt);i.p.altRows&&n(this).addClass(f(e,"stripedTable",!0,""));kt=null;var br=n("<table "+f(e,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+i.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'><\/table>").append(k),d=i.p.caption&&i.p.hiddengrid===!0?!0:!1,ct=n("<div class='ui-jqgrid-hbox"+(y==="rtl"?"-rtl":"")+"'><\/div>"),ot=i.p.styleUI==="Bootstrap"&&!isNaN(i.p.height)?2:0;if(k=null,r.hDiv=document.createElement("div"),r.hDiv.style.width=r.width-ot+"px",r.hDiv.className=f(e,"headerDiv",!0,"ui-jqgrid-hdiv"),n(r.hDiv).append(ct),n(ct).append(br),br=null,d&&n(r.hDiv).hide(),i.p.pager&&(typeof i.p.pager=="string"?i.p.pager.substr(0,1)!=="#"&&(i.p.pager="#"+i.p.pager):i.p.pager="#"+n(i.p.pager).attr("id"),n(i.p.pager).css({width:r.width+"px"}).addClass(f(e,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(ft),d&&n(i.p.pager).hide(),cr(i.p.pager,"")),i.p.cellEdit===!1&&i.p.hoverrows===!0)n(i).on({mouseover:function(t){c=n(t.target).closest("tr.jqgrow");n(c).attr("class")!=="ui-subgrid"&&n(c).addClass(v)},mouseout:function(t){c=n(t.target).closest("tr.jqgrow");n(c).removeClass(v)}});n(i).before(r.hDiv).on({click:function(t){var r,u,o;if(l=t.target,c=n(l,i.rows).closest("tr.jqgrow"),n(c).length===0||c[0].className.indexOf(h)>-1||(n(l,i).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==i.id)return this;if(r=n(l).filter(":enabled").hasClass("cbox"),u=n(i).triggerHandler("jqGridBeforeSelectRow",[c[0].id,t]),u=u===!1||u==="stop"?!1:!0,n.isFunction(i.p.beforeSelectRow)&&(o=i.p.beforeSelectRow.call(i,c[0].id,t),(o===!1||o==="stop")&&(u=!1)),l.tagName!=="A"&&(l.tagName!=="INPUT"&&l.tagName!=="TEXTAREA"&&l.tagName!=="OPTION"&&l.tagName!=="SELECT"||r)){if(a=c[0].id,l=n(l).closest("tr.jqgrow>td"),l.length>0&&(g=n.jgrid.getCellIndex(l)),i.p.cellEdit===!0){if(i.p.multiselect&&r&&u)n(i).jqGrid("setSelection",a,!0,t);else if(l.length>0)try{n(i).jqGrid("editCell",c[0].rowIndex,g,!0)}catch(k){}return}if(l.length>0&&(nr=n(l).closest("td,th").html(),n(i).triggerHandler("jqGridCellSelect",[a,g,nr,t]),n.isFunction(i.p.onCellSelect)&&i.p.onCellSelect.call(i,a,g,nr,t)),u)if(i.p.multimail&&i.p.multiselect){if(t.shiftKey){if(r){var s=n(i).jqGrid("getGridParam","selrow"),v=n(i).jqGrid("getInd",a),y=n(i).jqGrid("getInd",s),f="",e="";v>y?(f=s,e=a):(f=a,e=s);var p=!1,w=!1,b=!0;n.inArray(a,i.p.selarrrow)>-1&&(b=!1);n.each(n(this).getDataIDs(),function(t,r){return(w=r===f||w)&&n(i).jqGrid("resetSelection",r),r!==e});b&&n.each(n(this).getDataIDs(),function(t,r){return(p=r===f||p)&&n(i).jqGrid("setSelection",r,!1),r!==e});i.p.selrow=v>y?e:f;return}window.getSelection().removeAllRanges()}kr(a,r,t,!1)}else i.p.multikey?t[i.p.multikey]?n(i).jqGrid("setSelection",a,!0,t):i.p.multiselect&&r&&(r=n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+a).is(":checked"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+a)[i.p.useProp?"prop":"attr"]("checked",!r)):kr(a,r,t,!0)}},reloadGrid:function(t,r){if(i.p.treeGrid===!0&&(i.p.datatype=i.p.treedatatype),r=r||{},r.current&&i.grid.selectionPreserver(i),i.p.datatype==="local"?(n(i).jqGrid("resetSelection"),i.p.data.length&&(or(),vi())):i.p.treeGrid||(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],ii(!1)),i.p.savedRow=[]),i.p.scroll&&at.call(i,!0,!1),r.page){var u=r.page;u>i.p.lastpage&&(u=i.p.lastpage);u<1&&(u=1);i.p.page=u;i.grid.bDiv.scrollTop=i.grid.prevRowHeight?(u-1)*i.grid.prevRowHeight*i.p.rowNum:0}return i.grid.prevRowHeight&&i.p.scroll&&r.page===undefined?(delete i.p.lastpage,i.grid.populateVisible()):i.grid.populate(),i.p.inlineNav===!0&&n(i).jqGrid("showAddEditButtons"),!1},dblclick:function(t){if(l=t.target,c=n(l,i.rows).closest("tr.jqgrow"),n(c).length!==0){a=c[0].rowIndex;g=n.jgrid.getCellIndex(l);var r=n(i).triggerHandler("jqGridDblClickRow",[n(c).attr("id"),a,g,t]);return r!=null?r:n.isFunction(i.p.ondblClickRow)&&(r=i.p.ondblClickRow.call(i,n(c).attr("id"),a,g,t),r!=null)?r:void 0}},contextmenu:function(t){if(l=t.target,c=n(l,i.rows).closest("tr.jqgrow"),n(c).length!==0){i.p.multiselect||n(i).jqGrid("setSelection",c[0].id,!0,t);a=c[0].rowIndex;g=n.jgrid.getCellIndex(l);var r=n(i).triggerHandler("jqGridRightClickRow",[n(c).attr("id"),a,g,t]);return r!=null?r:n.isFunction(i.p.onRightClickRow)&&(r=i.p.onRightClickRow.call(i,n(c).attr("id"),a,g,t),r!=null)?r:void 0}}});if(r.bDiv=document.createElement("div"),ir&&String(i.p.height).toLowerCase()==="auto"&&(i.p.height="100%"),n(r.bDiv).append(n('<div style="position:relative;"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:i.p.height+(isNaN(i.p.height)?"":"px"),width:r.width-ot+"px"}).scroll(r.scrollGrid),n("table:first",r.bDiv).css({width:i.p.tblwidth+"px"}),n.support.tbody||n("tbody",this).length===2&&n("tbody:gt(0)",this).remove(),i.p.multikey)if(n.jgrid.msie())n(r.bDiv).on("selectstart",function(){return!1});else n(r.bDiv).on("mousedown",function(){return!1});d&&n(r.bDiv).hide();fi=w+" "+f(e,"icon_caption_open",!0);tr=w+" "+f(e,"icon_caption_close",!0);r.cDiv=document.createElement("div");ei=i.p.hidegrid===!0?n("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+tu+"' title='"+(n.jgrid.getRegional(i,"defaults.showhide",i.p.showhide)||"")+"' />").hover(function(){ei.addClass(v)},function(){ei.removeClass(v)}).append("<span class='ui-jqgrid-headlink "+fi+"'><\/span>").css(y==="rtl"?"left":"right","0px"):"";n(r.cDiv).append(ei).append("<span class='ui-jqgrid-title'>"+i.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(y==="rtl"?"-rtl":"")+" "+f(e,"gridtitleBox",!0));n(r.cDiv).insertBefore(r.hDiv);i.p.toolbar[0]&&(oi=f(e,"customtoolbarBox",!0,"ui-userdata"),r.uDiv=document.createElement("div"),i.p.toolbar[1]==="top"?n(r.uDiv).insertBefore(r.hDiv):i.p.toolbar[1]==="bottom"&&n(r.uDiv).insertAfter(r.hDiv),i.p.toolbar[1]==="both"?(r.ubDiv=document.createElement("div"),n(r.uDiv).addClass(oi+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(r.hDiv).width(r.width-ot),n(r.ubDiv).addClass(oi+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(r.hDiv).width(r.width-ot),d&&n(r.ubDiv).hide()):n(r.uDiv).width(r.width-ot).addClass(oi+" ui-userdata-top").attr("id","t_"+this.id),d&&n(r.uDiv).hide());i.p.toppager&&(i.p.toppager=n.jgrid.jqID(i.p.id)+"_toppager",r.topDiv=n("<div id='"+i.p.toppager+"'><\/div>")[0],i.p.toppager="#"+i.p.toppager,n(r.topDiv).addClass(f(e,"toppagerBox",!0,"ui-jqgrid-toppager")).width(r.width-ot).insertBefore(r.hDiv),cr(i.p.toppager,"_t"));i.p.footerrow&&(r.sDiv=n("<div class='ui-jqgrid-sdiv'><\/div>")[0],ct=n("<div class='ui-jqgrid-hbox"+(y==="rtl"?"-rtl":"")+"'><\/div>"),n(r.sDiv).append(ct).width(r.width-ot).insertAfter(r.hDiv),n(ct).append(bt),r.footers=n(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,i.p.rownumbers&&(r.footers[0].className=f(e,"rownumBox",!0,"jqgrid-rownum")),d&&n(r.sDiv).hide());ct=null;i.p.caption?(dr=i.p.datatype,i.p.hidegrid===!0&&(n(".ui-jqgrid-titlebar-close",r.cDiv).click(function(t){var e=n.isFunction(i.p.onHeaderClick),u=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,o=this;return i.p.toolbar[0]===!0&&(i.p.toolbar[1]==="both"&&(u+=", #"+n(r.ubDiv).attr("id")),u+=", #"+n(r.uDiv).attr("id")),f=n(u,"#gview_"+n.jgrid.jqID(i.p.id)).length,i.p.gridstate==="visible"?n(u,"#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast",function(){f--;f===0&&(n("span",o).removeClass(fi).addClass(tr),i.p.gridstate="hidden",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).hide(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),e&&(d||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}):i.p.gridstate==="hidden"&&n(u,"#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast",function(){f--;f===0&&(n("span",o).removeClass(tr).addClass(fi),d&&(i.p.datatype=dr,it(),d=!1),i.p.gridstate="visible",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).show(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),e&&(d||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}),!1}),d&&(i.p.datatype="local",n(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))):(n(r.cDiv).hide(),i.p.toppager||n(r.hDiv).addClass(f(i.p.styleUI+".common","cornertop",!0)));n(r.hDiv).after(r.bDiv).mousemove(function(n){if(r.resizing)return r.dragMove(n),!1});n(".ui-jqgrid-labels",r.hDiv).on("selectstart",function(){return!1});n(document).on("mouseup.jqGrid"+i.p.id,function(){return r.resizing?(r.dragEnd(!0),!1):!0});if(i.p.direction==="rtl")n(i).on("jqGridAfterGridComplete.setRTLPadding",function(){var t=r.bDiv.offsetWidth-r.bDiv.clientWidth;i.p.scrollOffset=t;n("div:first",r.hDiv).css({paddingLeft:t+"px"});r.hDiv.scrollLeft=r.bDiv.scrollLeft});if(i.formatCol=lt,i.sortData=ri,i.updatepager=iu,i.refreshIndex=vi,i.setHeadCheckBox=ii,i.constructTr=yi,i.formatter=function(n,t,i,r,u){return ur(n,t,i,r,u)},n.extend(r,{populate:it,emptyRows:at,beginReq:vt,endReq:nt}),this.grid=r,i.addXmlData=function(n){pi(n)},i.addJSONData=function(n){ni(n)},i.addLocalData=function(n){return sr(n)},this.grid.cols=this.rows[0].cells,n.isFunction(i.p.onInitGrid)&&i.p.onInitGrid.call(i),it(),i.p.hiddengrid=!1,i.p.responsive){gr="onorientationchange"in window;nu=gr?"orientationchange":"resize";n(window).on(nu,function(){n(i).jqGrid("resizeGrid")})}}})};n.jgrid.extend({getGridParam:function(t,i){var u=this[0],r;if(u&&u.grid){if(i===undefined&&typeof i!="string"&&(i="jqGrid"),r=u.p,i!=="jqGrid")try{r=n(u).data(i)}catch(f){r=u.p}return t?r[t]!==undefined?r[t]:null:r}},setGridParam:function(t,i){return this.each(function(){if(i==null&&(i=!1),this.grid&&typeof t=="object")if(i===!0){var r=n.extend({},this.p,t);this.p=r}else n.extend(!0,this.p,t)})},getGridRowById:function(t){var i;return this.each(function(){try{for(var r=this.rows.length;r--;)if(t.toString()===this.rows[r].id){i=this.rows[r];break}}catch(u){i=n(this.grid.bDiv).find("#"+n.jgrid.jqID(t))}}),i},getDataIDs:function(){var r=[],t=0,i,u=0;return this.each(function(){if(i=this.rows.length,i&&i>0)while(t<i)n(this.rows[t]).hasClass("jqgrow")&&(r[u]=this.rows[t].id,u++),t++}),r},setSelection:function(t,i,r){return this.each(function(){function p(t){var f=n(u.grid.bDiv)[0].clientHeight,i=n(u.grid.bDiv)[0].scrollTop,r=n(u.rows[t]).position().top,e=u.rows[t].clientHeight;r+e>=f+i?n(u.grid.bDiv)[0].scrollTop=r-(f+i)+e+i:r<f+i&&r<i&&(n(u.grid.bDiv)[0].scrollTop=r)}var u=this,e,f,c,h,l,o,a,v=n.jgrid.getMethod("getStyleUI"),s=v(u.p.styleUI+".common","highlight",!0),y=v(u.p.styleUI+".common","disabled",!0);t!==undefined&&((i=i===!1?!1:!0,f=n(u).jqGrid("getGridRowById",t),!f||!f.className||f.className.indexOf(y)>-1)||(u.p.scrollrows===!0&&(c=n(u).jqGrid("getGridRowById",t).rowIndex,c>=0&&p(c)),u.p.frozenColumns===!0&&(o=u.p.id+"_frozen"),u.p.multiselect?(u.setHeadCheckBox(!1),u.p.selrow=f.id,h=n.inArray(u.p.selrow,u.p.selarrrow),h===-1?(f.className!=="ui-subgrid"&&n(f).addClass(s).attr("aria-selected","true"),e=!0,u.p.selarrrow.push(u.p.selrow)):(f.className!=="ui-subgrid"&&n(f).removeClass(s).attr("aria-selected","false"),e=!1,u.p.selarrrow.splice(h,1),l=u.p.selarrrow[0],u.p.selrow=l===undefined?null:l),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(f.id))[u.p.useProp?"prop":"attr"]("checked",e),o&&(h===-1?n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass(s):n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).removeClass(s),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o))[u.p.useProp?"prop":"attr"]("checked",e)),i&&(n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&u.p.onSelectRow.call(u,f.id,e,r))):f.className!=="ui-subgrid"&&(u.p.selrow!==f.id?(a=n(u).jqGrid("getGridRowById",u.p.selrow),a&&n(a).removeClass(s).attr({"aria-selected":"false",tabindex:"-1"}),n(f).addClass(s).attr({"aria-selected":"true",tabindex:"0"}),o&&(n("#"+n.jgrid.jqID(u.p.selrow),"#"+n.jgrid.jqID(o)).removeClass(s),n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass(s)),e=!0):e=!1,u.p.selrow=f.id,i&&(n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&u.p.onSelectRow.call(u,f.id,e,r)))))})},resetSelection:function(t){return this.each(function(){var i=this,u,r,o=n.jgrid.getMethod("getStyleUI"),f=o(i.p.styleUI+".common","highlight",!0),s=o(i.p.styleUI+".common","hover",!0),e;i.p.frozenColumns===!0&&(r=i.p.id+"_frozen");t!==undefined?(u=t===i.p.selrow?i.p.selrow:t,n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(u)).removeClass(f).attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass(f),i.p.multiselect&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(i.p.id))[i.p.useProp?"prop":"attr"]("checked",!1),r&&n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1),i.setHeadCheckBox(!1),e=n.inArray(n.jgrid.jqID(u),i.p.selarrrow),e!==-1&&i.p.selarrrow.splice(e,1)),i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,u),u=null):i.p.multiselect?(n(i.p.selarrrow).each(function(t,u){n(n(i).jqGrid("getGridRowById",u)).removeClass(f).attr("aria-selected","false");n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u))[i.p.useProp?"prop":"attr"]("checked",!1);r&&(n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass(f),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1));i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,u)}),i.setHeadCheckBox(!1),i.p.selarrrow=[],i.p.selrow=null):i.p.selrow&&(n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(i.p.selrow)).removeClass(f).attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(i.p.selrow),"#"+n.jgrid.jqID(r)).removeClass(f),i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,i.p.selrow),i.p.selrow=null);i.p.cellEdit===!0&&parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&(n("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell "+f),n(i.rows[i.p.iRow]).removeClass("selected-row "+s));i.p.savedRow=[]})},getRowData:function(t,i){var r={},u,f=!1,e,o=0;return this.each(function(){var s=this,h,c;if(t==null)f=!0,u=[],e=s.rows.length-1;else{if(c=n(s).jqGrid("getGridRowById",t),!c)return r;e=1}for(i&&i===!0&&s.p.data.length>0||(i=!1);o<e;)f&&(c=s.rows[o+1]),n(c).hasClass("jqgrow")&&(i?r=s.p.data[s.p._index[c.id]]:n('td[role="gridcell"]',c).each(function(t){if(h=s.p.colModel[t].name,h!=="cb"&&h!=="subgrid"&&h!=="rn")if(s.p.treeGrid===!0&&h===s.p.ExpandColumn)r[h]=n.jgrid.htmlDecode(n("span:first",this).html());else try{r[h]=n.unformat.call(s,this,{rowId:c.id,colModel:s.p.colModel[t]},t)}catch(i){r[h]=n.jgrid.htmlDecode(n(this).html())}}),f&&(u.push(r),r={})),o++}),u||r},delRowData:function(t){var f=!1,i,r,u;return this.each(function(){var e=this,s,o;if(i=n(e).jqGrid("getGridRowById",t),!i)return!1;e.p.subGrid&&(u=n(i).next(),u.hasClass("ui-subgrid")&&u.remove());n(i).remove();e.p.records--;e.p.reccount--;e.updatepager(!0,!1);f=!0;e.p.multiselect&&(r=n.inArray(t,e.p.selarrrow),r!==-1&&e.p.selarrrow.splice(r,1));e.p.multiselect&&e.p.selarrrow.length>0?e.p.selrow=e.p.selarrrow[e.p.selarrrow.length-1]:e.p.selrow===t&&(e.p.selrow=null);e.p.datatype==="local"&&(s=n.jgrid.stripPref(e.p.idPrefix,t),o=e.p._index[s],o!==undefined&&(e.p.data.splice(o,1),e.refreshIndex()))}),f},setRowData:function(t,i,r){var u,f=!0,e;return this.each(function(){var y,l,a;if(!this.grid)return!1;var o=this,c,s,v=typeof r,h={};if(s=n(this).jqGrid("getGridRowById",t),!s)return!1;if(i)try{if(n(this.p.colModel).each(function(r){u=this.name;var f=n.jgrid.getAccessor(i,u);f!==undefined&&(h[u]=this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?n.unformat.date.call(o,f,this):f,c=o.formatter(t,h[u],r,i,"edit"),e=this.title?{title:n.jgrid.stripHtml(c)}:{},o.p.treeGrid===!0&&u===o.p.ExpandColumn?n("td[role='gridcell']:eq("+r+") > span:first",s).html(c).attr(e):n("td[role='gridcell']:eq("+r+")",s).html(c).attr(e))}),o.p.datatype==="local"){if(y=n.jgrid.stripPref(o.p.idPrefix,t),l=o.p._index[y],o.p.treeGrid)for(a in o.p.treeReader)o.p.treeReader.hasOwnProperty(a)&&delete h[o.p.treeReader[a]];l!==undefined&&(o.p.data[l]=n.extend(!0,o.p.data[l],h));h=null}}catch(p){f=!1}f&&(v==="string"?n(s).addClass(r):r!==null&&v==="object"&&n(s).css(r),n(o).triggerHandler("jqGridAfterGridComplete"))}),f},addRowData:function(t,i,r,u){n.inArray(r,["first","last","before","after"])===-1&&(r="last");var k=!1,y,f,d="",g="",h,w,s,e,c,a,l="",p,v,o,nt,b;return i&&(n.isArray(i)?(p=!0,v=t):(i=[i],p=!1),this.each(function(){var tt=this,ut=i.length;s=tt.p.rownumbers===!0?1:0;h=tt.p.multiselect===!0?1:0;w=tt.p.subGrid===!0?1:0;p||(t!==undefined?t=String(t):(t=n.jgrid.randId(),tt.p.keyName!==!1&&(v=tt.p.keyName,i[0][v]!==undefined&&(t=i[0][v]))));var rt=0,ft=n(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","rowBox",!0,"jqgrow ui-row-"+tt.p.direction),it={},et=n.isFunction(tt.p.afterInsertRow)?!0:!1;for(s&&(d=n(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum")),h&&(g=n(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","multiBox",!1,"cbox"));rt<ut;){if(o=i[rt],f=[],p)try{t=o[v];t===undefined&&(t=n.jgrid.randId())}catch(ot){t=n.jgrid.randId()}for(b=t,t=tt.p.idPrefix+t,s&&(l=tt.formatCol(0,1,"",null,t,!0),f[f.length]='<td role="gridcell" '+d+" "+l+">0<\/td>"),h&&(a='<input role="checkbox" type="checkbox" id="jqg_'+tt.p.id+"_"+t+'" '+g+"/>",l=tt.formatCol(s,1,"",null,t,!0),f[f.length]='<td role="gridcell" '+l+">"+a+"<\/td>"),w&&(f[f.length]=n(tt).jqGrid("addSubGridCell",h+s,1)),c=h+w+s;c<tt.p.colModel.length;c++)nt=tt.p.colModel[c],y=nt.name,it[y]=o[y],a=tt.formatter(t,n.jgrid.getAccessor(o,y),c,o),l=tt.formatCol(c,1,a,o,t,it),f[f.length]='<td role="gridcell" '+l+">"+a+"<\/td>";if(f.unshift(tt.constructTr(t,!1,ft,it,o)),f[f.length]="<\/tr>",tt.rows.length===0)n("table:first",tt.grid.bDiv).append(f.join(""));else switch(r){case"last":n(tt.rows[tt.rows.length-1]).after(f.join(""));e=tt.rows.length-1;break;case"first":n(tt.rows[0]).after(f.join(""));e=1;break;case"after":e=n(tt).jqGrid("getGridRowById",u);e&&(n(tt.rows[e.rowIndex+1]).hasClass("ui-subgrid")?n(tt.rows[e.rowIndex+1]).after(f):n(e).after(f.join("")),e=e.rowIndex+1);break;case"before":e=n(tt).jqGrid("getGridRowById",u);e&&(n(e).before(f.join("")),e=e.rowIndex-1)}tt.p.subGrid===!0&&n(tt).jqGrid("addSubGrid",h+s,e);tt.p.records++;tt.p.reccount++;n(tt).triggerHandler("jqGridAfterInsertRow",[t,o,o]);et&&tt.p.afterInsertRow.call(tt,t,o,o);rt++;tt.p.datatype==="local"&&(it[tt.p.localReader.id]=b,tt.p._index[b]=tt.p.data.length,tt.p.data.push(it),it={})}tt.updatepager(!0,!0);k=!0})),k},footerData:function(t,i,r){function s(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var u,f=!1,e={},o;return t===undefined&&(t="get"),typeof r!="boolean"&&(r=!0),t=t.toLowerCase(),this.each(function(){var h=this,c;if(!h.grid||!h.p.footerrow||t==="set"&&s(i))return!1;f=!0;n(this.p.colModel).each(function(s){u=this.name;t==="set"?i[u]!==undefined&&(c=r?h.formatter("",i[u],s,i,"edit"):i[u],o=this.title?{title:n.jgrid.stripHtml(c)}:{},n("tr.footrow td:eq("+s+")",h.grid.sDiv).html(c).attr(o),f=!0):t==="get"&&(e[u]=n("tr.footrow td:eq("+s+")",h.grid.sDiv).html())})}),t==="get"?e:f},showHideCol:function(t,i){return this.each(function(){var r=this,h=!1,c=n.jgrid.cell_width?0:r.p.cellLayout,e,u,o,s,f;if(r.grid&&(typeof t=="string"&&(t=[t]),i=i!=="none"?"":"none",u=i===""?!0:!1,o=r.p.groupHeader&&(n.isArray(r.p.groupHeader)||n.isFunction(r.p.groupHeader)),o&&n(r).jqGrid("destroyGroupHeader",!1),n(this.p.colModel).each(function(f){if(n.inArray(this.name,t)!==-1&&this.hidden===u){if(r.p.frozenColumns===!0&&this.frozen===!0)return!0;n("tr[role=row]",r.grid.hDiv).each(function(){n(this.cells[f]).css("display",i)});n(r.rows).each(function(){n(this).hasClass("jqgroup")||n(this.cells[f]).css("display",i)});r.p.footerrow&&n("tr.footrow td:eq("+f+")",r.grid.sDiv).css("display",i);e=parseInt(this.width,10);i==="none"?r.p.tblwidth-=e+c:r.p.tblwidth+=e+c;this.hidden=!u;h=!0;n(r).triggerHandler("jqGridShowHideCol",[u,this.name,f])}}),h===!0&&(r.p.shrinkToFit!==!0||isNaN(r.p.height)||(r.p.tblwidth+=parseInt(r.p.scrollOffset,10)),n(r).jqGrid("setGridWidth",r.p.shrinkToFit===!0?r.p.tblwidth:r.p.width)),o))for(s=n.extend([],r.p.groupHeader),r.p.groupHeader=null,f=0;f<s.length;f++)n(r).jqGrid("setGroupHeaders",s[f])})},hideCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"none")})},showCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"")})},remapColumns:function(t,i,r){function f(i){var r;r=i.length?n.makeArray(i):n.extend({},i);n.each(t,function(n){i[n]=r[this]})}function e(i,r){n(">tr"+(r||""),i).each(function(){var i=this,r=n.makeArray(i.cells);n.each(t,function(){var n=r[this];n&&i.appendChild(n)})})}var u=this.get(0);f(u.p.colModel);f(u.p.colNames);f(u.grid.headers);e(n("thead:first",u.grid.hDiv),r&&":not(.ui-jqgrid-labels)");i&&e(n("#"+n.jgrid.jqID(u.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");u.p.footerrow&&e(n("tbody:first",u.grid.sDiv));u.p.remapColumns&&(u.p.remapColumns.length?f(u.p.remapColumns):u.p.remapColumns=n.makeArray(t));u.p.lastsort=n.inArray(u.p.lastsort,t);u.p.treeGrid&&(u.p.expColInd=n.inArray(u.p.expColInd,t));n(u).triggerHandler("jqGridRemapColumns",[t,i,r])},setGridWidth:function(t,i){return this.each(function(){var y,w;if(this.grid){var r=this,u,e=0,o=n.jgrid.cell_width?0:r.p.cellLayout,f,s=0,p=!1,a=r.p.scrollOffset,v,h=0,l,c=r.p.styleUI==="Bootstrap"?2:0;if(typeof i!="boolean"&&(i=r.p.shrinkToFit),!isNaN(t)){if(t=parseInt(t,10),r.grid.width=r.p.width=t,n("#gbox_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n("#gview_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n(r.grid.bDiv).css("width",t-c+"px"),n(r.grid.hDiv).css("width",t-c+"px"),r.p.pager&&n(r.p.pager).css("width",t+"px"),r.p.toppager&&n(r.p.toppager).css("width",t-c+"px"),r.p.toolbar[0]===!0&&(n(r.grid.uDiv).css("width",t-c+"px"),r.p.toolbar[1]==="both"&&n(r.grid.ubDiv).css("width",t-c+"px")),r.p.footerrow&&n(r.grid.sDiv).css("width",t-c+"px"),i===!1&&r.p.forceFit===!0&&(r.p.forceFit=!1),i===!0){if(n.each(r.p.colModel,function(){this.hidden===!1&&(u=this.widthOrg,e+=u+o,this.fixed?h+=u+o:s++)}),s===0)return;if(r.p.tblwidth=e,v=t-o*s-h,isNaN(r.p.height)||(n(r.grid.bDiv)[0].clientHeight<n(r.grid.bDiv)[0].scrollHeight||r.rows.length===1)&&(p=!0,v-=a),e=0,y=r.grid.cols.length>0,n.each(r.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(u=this.widthOrg,u=Math.round(v*u/(r.p.tblwidth-o*s-h)),u<0)return;this.width=u;e+=u;r.grid.headers[n].width=u;r.grid.headers[n].el.style.width=u+"px";r.p.footerrow&&(r.grid.footers[n].style.width=u+"px");y&&(r.grid.cols[n].style.width=u+"px");f=n}}),!f)return;l=0;p?t-h-(e+o*s)!==a&&(l=t-h-(e+o*s)-a):Math.abs(t-h-(e+o*s))!==1&&(l=t-h-(e+o*s));r.p.colModel[f].width+=l;r.p.tblwidth=e+l+o*s+h;r.p.tblwidth>t?(w=r.p.tblwidth-parseInt(t,10),r.p.tblwidth=t,u=r.p.colModel[f].width=r.p.colModel[f].width-w):u=r.p.colModel[f].width;r.grid.headers[f].width=u;r.grid.headers[f].el.style.width=u+"px";y&&(r.grid.cols[f].style.width=u+"px");r.p.footerrow&&(r.grid.footers[f].style.width=u+"px")}r.p.tblwidth&&(n("table:first",r.grid.bDiv).css("width",r.p.tblwidth+"px"),n("table:first",r.grid.hDiv).css("width",r.p.tblwidth+"px"),r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft,r.p.footerrow&&n("table:first",r.grid.sDiv).css("width",r.p.tblwidth+"px"))}}})},setGridWidthP:function(t){return this.each(function(){if(this.grid){var i=this,r=n.jgrid.cell_width?0:i.p.cellLayout,u=i.p.scrollOffset;isNaN(t)||(t=parseInt(t,10),i.grid.width=i.p.width=t,n("#gbox_"+n.jgrid.jqID(i.p.id)).css("width",t+"%"),n("#gview_"+n.jgrid.jqID(i.p.id)).css("width",t+"%"),n("#gview_"+n.jgrid.jqID(i.p.id)+" .ui-jqgrid-htable").css("width",t+"%"),n(i.grid.bDiv).css("width",t+"%"),n(i.grid.bDiv)[0].clientHeight<n(i.grid.bDiv)[0].scrollHeight?n(i.grid.hDiv).css("width","calc(100% - 16px)"):n(i.grid.hDiv).css("width",t+"%"),i.p.pager&&n(i.p.pager).css("width",t+"%"),i.p.toppager&&n(i.p.toppager).css("width",t+"%"),i.p.toolbar[0]===!0&&(n(i.grid.uDiv).css("width",t+"%"),i.p.toolbar[1]==="both"&&n(i.grid.ubDiv).css("width",t+"%")),i.p.footerrow&&n(i.grid.sDiv).css("width",t+"%"))}})},setGridHeight:function(t){return this.each(function(){var i=this,r;i.grid&&(r=n(i.grid.bDiv),r.css({height:t+(isNaN(t)?"":"px")}),i.p.frozenColumns===!0&&n("#"+n.jgrid.jqID(i.p.id)+"_frozen").parent().height(r.height()-16),i.p.height=t,i.p.scroll&&i.grid.populateVisible())})},setCaption:function(t){return this.each(function(){var i=n(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=t;n(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(t);n(this.grid.cDiv).show();n(this.grid.hDiv).removeClass(i)})},setLabel:function(t,i,r,u){return this.each(function(){var o=this,e=-1,f,s;if(o.grid){if(t!=null)isNaN(t)?n(o.p.colModel).each(function(n){if(this.name===t)return e=n,!1}):e=parseInt(t,10);else return;e>=0&&(f=n("tr.ui-jqgrid-labels th:eq("+e+")",o.grid.hDiv),i&&(s=n(".s-ico",f),n("[id^=jqgh_]",f).empty().html(i).append(s),o.p.colNames[e]=i),r&&(typeof r=="string"?n(f).addClass(r):n(f).css(r)),typeof u=="object"&&n(f).attr(u))}})},setSortIcon:function(t,i){return this.each(function(){var u=this,r=-1,f;if(u.grid){if(t!=null)isNaN(t)?n(u.p.colModel).each(function(n){if(this.name===t)return r=n,!1}):r=parseInt(t,10);else return;r>=0&&(f=n("tr.ui-jqgrid-labels th:eq("+r+")",u.grid.hDiv),i==="left"?f.find(".s-ico").css("float","left"):f.find(".s-ico").css("float","none"))}})},setCell:function(t,i,r,u,f,e){return this.each(function(){var o=this,s=-1,a,v,h,l,p;if(o.grid&&(isNaN(i)?n(o.p.colModel).each(function(n){if(this.name===i)return s=n,!1}):s=parseInt(i,10),s>=0&&(h=n(o).jqGrid("getGridRowById",t),h))){var c=n("td:eq("+s+")",h),y=0,w=[];if(r!==""||e===!0){if(h.cells!==undefined)while(y<h.cells.length)w.push(h.cells[y].innerHTML),y++;a=o.formatter(t,r,s,w,"edit");v=o.p.colModel[s].title?{title:n.jgrid.stripHtml(a)}:{};o.p.treeGrid&&n(".tree-wrap",n(c)).length>0?n("span",n(c)).html(a).attr(v):n(c).html(a).attr(v);o.p.datatype==="local"&&(l=o.p.colModel[s],r=l.formatter&&typeof l.formatter=="string"&&l.formatter==="date"?n.unformat.date.call(o,r,l):r,p=o.p._index[n.jgrid.stripPref(o.p.idPrefix,t)],p!==undefined&&(o.p.data[p][l.name]=r))}typeof u=="string"?n(c).addClass(u):u&&n(c).css(u);typeof f=="object"&&n(c).attr(f)}})},getCell:function(t,i){var r=!1;return this.each(function(){var u=this,f=-1,o,e;if(u.grid&&(o=i,isNaN(i)?n(u.p.colModel).each(function(n){if(this.name===i)return o=this.name,f=n,!1}):f=parseInt(i,10),f>=0)){if(e=n(u).jqGrid("getGridRowById",t),e)try{r=n.unformat.call(u,n("td:eq("+f+")",e),{rowId:e.id,colModel:u.p.colModel[f]},f)}catch(s){r=n.jgrid.htmlDecode(n("td:eq("+f+")",e).html())}u.p.treeGrid&&r&&u.p.ExpandColumn===o&&(r=n("<div>"+r+"<\/div>").find("span:first").html())}}),r},getCol:function(t,i,r){var u=[],e,h=0,s,o,f;return i=typeof i!="boolean"?!1:i,r===undefined&&(r=!1),this.each(function(){var c=this,l=-1;if(c.grid&&(isNaN(t)?n(c.p.colModel).each(function(n){if(this.name===t)return l=n,!1}):l=parseInt(t,10),l>=0)){var v=c.rows.length,a=0,y=0;if(v&&v>0){while(a<v){if(n(c.rows[a]).hasClass("jqgrow")){try{e=n.unformat.call(c,n(c.rows[a].cells[l]),{rowId:c.rows[a].id,colModel:c.p.colModel[l]},l)}catch(p){e=n.jgrid.htmlDecode(c.rows[a].cells[l].innerHTML)}r?(f=parseFloat(e),isNaN(f)||(h+=f,o===undefined&&(o=s=f),s=Math.min(s,f),o=Math.max(o,f),y++)):i?u.push({id:c.rows[a].id,value:e}):u.push(e)}a++}if(r)switch(r.toLowerCase()){case"sum":u=h;break;case"avg":u=h/y;break;case"count":u=v-1;break;case"min":u=s;break;case"max":u=o}}}}),u},clearGridData:function(t){return this.each(function(){var i=this,r;i.grid&&(typeof t!="boolean"&&(t=!1),i.p.deepempty?n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:gt(0)").remove():(r=n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:first")[0],n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").empty().append(r)),i.p.footerrow&&t&&n(".ui-jqgrid-ftable td",i.grid.sDiv).html("&#160;"),i.p.selrow=null,i.p.selarrrow=[],i.p.savedRow=[],i.p.records=0,i.p.page=1,i.p.lastpage=0,i.p.reccount=0,i.p.data=[],i.p._index={},i.updatepager(!0,!1))})},getInd:function(t,i){var u=!1,r;return this.each(function(){r=n(this).jqGrid("getGridRowById",t);r&&(u=i===!0?r:r.rowIndex)}),u},bindKeys:function(t){var i=n.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},t||{});return this.each(function(){var t=this;n("body").is("[role]")||n("body").attr("role","application");t.p.scrollrows=i.scrollingRows;n(t).keydown(function(r){var e=n(t).find("tr[tabindex=0]")[0],f,u,o,s=t.p.treeReader.expanded_field;if(e)if(o=t.p._index[n.jgrid.stripPref(t.p.idPrefix,e.id)],r.keyCode===37||r.keyCode===38||r.keyCode===39||r.keyCode===40){if(r.keyCode===38){if(u=e.previousSibling,f="",u)if(n(u).is(":hidden")){while(u)if(u=u.previousSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r);r.preventDefault()}if(r.keyCode===40){if(u=e.nextSibling,f="",u)if(n(u).is(":hidden")){while(u)if(u=u.nextSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r);r.preventDefault()}r.keyCode===37&&(t.p.treeGrid&&t.p.data[o][s]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyLeft",[t.p.selrow]),n.isFunction(i.onLeftKey)&&i.onLeftKey.call(t,t.p.selrow));r.keyCode===39&&(t.p.treeGrid&&!t.p.data[o][s]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyRight",[t.p.selrow]),n.isFunction(i.onRightKey)&&i.onRightKey.call(t,t.p.selrow))}else r.keyCode===13?(n(t).triggerHandler("jqGridKeyEnter",[t.p.selrow]),n.isFunction(i.onEnter)&&i.onEnter.call(t,t.p.selrow)):r.keyCode===32&&(n(t).triggerHandler("jqGridKeySpace",[t.p.selrow]),n.isFunction(i.onSpace)&&i.onSpace.call(t,t.p.selrow))})})},unbindKeys:function(){return this.each(function(){n(this).off("keydown")})},getLocalRow:function(t){var r=!1,i;return this.each(function(){t!==undefined&&(i=this.p._index[n.jgrid.stripPref(this.p.idPrefix,t)],i>=0&&(r=this.p.data[i]))}),r},progressBar:function(t){return t=n.extend({htmlcontent:"",method:"hide",loadtype:"disable"},t||{}),this.each(function(){var r=t.method==="show"?!0:!1,i=n("#load_"+n.jgrid.jqID(this.p.id)),u,f,e=n(window).scrollTop();t.htmlcontent!==""&&i.html(t.htmlcontent);switch(t.loadtype){case"enable":i.toggle(r);break;case"block":n("#lui_"+n.jgrid.jqID(this.p.id)).toggle(r);i.toggle(r)}i.is(":visible")&&(u=i.offsetParent(),i.css("top",""),i.offset().top<e&&(f=Math.min(10+e-u.offset().top,u.height()-i.height()),i.css("top",f+"px")))})},getColProp:function(n){var r={},u=this[0],i,t;if(!u.grid)return!1;for(i=u.p.colModel,t=0;t<i.length;t++)if(i[t].name===n){r=i[t];break}return r},setColProp:function(t,i){return this.each(function(){if(this.grid&&n.isPlainObject(i))for(var u=this.p.colModel,r=0;r<u.length;r++)if(u[r].name===t){n.extend(!0,this.p.colModel[r],i);break}})},sortGrid:function(n,t,i){return this.each(function(){var r=this,f=-1,u,e=!1,o;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index===n||r.p.colModel[u].name===n){f=u;r.p.frozenColumns===!0&&r.p.colModel[u].frozen===!0&&(e=r.grid.fhDiv.find("#"+r.p.id+"_"+n));break}f!==-1&&(o=r.p.colModel[f].sortable,e||(e=r.grid.headers[f].el),typeof o!="boolean"&&(o=!0),typeof t!="boolean"&&(t=!1),o&&r.sortData("jqgh_"+r.p.id+"_"+n,f,t,i,e))}})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this,r=n(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),u=n(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);t==="hidden"?(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),i.p.pager&&n(i.p.pager).slideUp("fast"),i.p.toppager&&n(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]==="both"&&n(i.grid.ubDiv).slideUp("fast"),n(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),n(".ui-jqgrid-headlink",i.grid.cDiv).removeClass(r).addClass(u),i.p.gridstate="hidden"):t==="visible"&&(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),i.p.pager&&n(i.p.pager).slideDown("fast"),i.p.toppager&&n(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]==="both"&&n(i.grid.ubDiv).slideDown("fast"),n(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),n(".ui-jqgrid-headlink",i.grid.cDiv).removeClass(u).addClass(r),i.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){var r,e,o,l,b,a,k,h;if(this.grid){var t=this,v=t.p.colModel,s=0,d=v.length,i=-1,y=!1,g=n(t).jqGrid("getStyleUI",t.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),u=n(t).jqGrid("getStyleUI",t.p.styleUI+".common","hover",!0),p=n("#gbox_"+n.jgrid.jqID(t.p.id)).css("box-sizing")==="border-box",c=p?1:0;if(t.p.subGrid!==!0&&t.p.treeGrid!==!0&&t.p.cellEdit!==!0&&!t.p.sortable&&!t.p.scroll&&t.p.grouping!==!0){while(s<d){if(v[s].frozen===!0)y=!0,i=s;else break;s++}if(i>=0&&y){var f=t.p.caption?n(t.grid.cDiv).outerHeight():0,nt=parseInt(n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).height(),10),w=parseInt(n(".ui-jqgrid-hdiv","#gview_"+n.jgrid.jqID(t.p.id)).height(),10);t.p.toppager&&(f=f+n(t.grid.topDiv).outerHeight());t.p.toolbar[0]===!0&&t.p.toolbar[1]!=="bottom"&&(f=f+n(t.grid.uDiv).outerHeight());t.grid.fhDiv=n('<div style="position:absolute;'+(t.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+f+"px;height:"+(w-c)+'px;" class="frozen-div '+g+'"><\/div>');t.grid.fbDiv=n('<div style="position:absolute;'+(t.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+(parseInt(f,10)+parseInt(w,10)+1-c)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"><\/div>');n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fhDiv);r=n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).clone(!0);t.p.groupHeader?(n("tr.jqg-first-row-header, tr.jqg-third-row-header",r).each(function(){n("th:gt("+i+")",this).remove()}),e=-1,o=-1,n("tr.jqg-second-row-header th",r).each(function(){return l=parseInt(n(this).attr("colspan"),10),b=parseInt(n(this).attr("rowspan"),10),b&&(e++,o++),l&&(e=e+l,o++),e===i?(o=i,!1):void 0}),e!==i&&(o=i),n("tr.jqg-second-row-header",r).each(function(){n("th:gt("+o+")",this).remove()})):(a=[],n(".ui-jqgrid-htable tr","#gview_"+n.jgrid.jqID(t.p.id)).each(function(){a.push(parseInt(n(this).height(),10))}),n("tr",r).each(function(){n("th:gt("+i+")",this).remove()}),n("tr",r).each(function(t){n(this).height(a[t])}));n(r).width(1);n.jgrid.msie()||n(r).css("height","100%");n(t.grid.fhDiv).append(r).mousemove(function(n){if(t.grid.resizing)return t.grid.dragMove(n),!1});t.p.footerrow&&(k=n(".ui-jqgrid-bdiv","#gview_"+n.jgrid.jqID(t.p.id)).height(),t.grid.fsDiv=n('<div style="position:absolute;left:0px;top:'+(parseInt(f,10)+parseInt(nt,10)+parseInt(k,10)+1-c)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"><\/div>'),n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fsDiv),h=n(".ui-jqgrid-ftable","#gview_"+n.jgrid.jqID(t.p.id)).clone(!0),n("tr",h).each(function(){n("td:gt("+i+")",this).remove()}),n(h).width(1),n(t.grid.fsDiv).append(h));n(t).on("jqGridResizeStop.setFrozenColumns",function(i,r,u){var f=p?"outerWidth":"width",o=n(".ui-jqgrid-htable",t.grid.fhDiv),s=n(".ui-jqgrid-btable",t.grid.fbDiv),e;n("th:eq("+u+")",o)[f](r);n("tr:first td:eq("+u+")",s)[f](r);t.p.footerrow&&(e=n(".ui-jqgrid-ftable",t.grid.fsDiv),n("tr:first td:eq("+u+")",e)[f](r))});n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fbDiv);n(t.grid.fbDiv).on("mousewheel DOMMouseScroll",function(i){var r=n(t.grid.bDiv).scrollTop();i.originalEvent.wheelDelta>0||i.originalEvent.detail<0?n(t.grid.bDiv).scrollTop(r-25):n(t.grid.bDiv).scrollTop(r+25);i.preventDefault()});t.p.hoverrows===!0&&n("#"+n.jgrid.jqID(t.p.id)).off("mouseover mouseout");n(t).on("jqGridAfterGridComplete.setFrozenColumns",function(){var f,r;n("#"+n.jgrid.jqID(t.p.id)+"_frozen").remove();n(t.grid.fbDiv).height(n(t.grid.bDiv).height()-17);f=[];n("#"+n.jgrid.jqID(t.p.id)+" tr[role=row].jqgrow").each(function(){f.push(n(this).outerHeight())});r=n("#"+n.jgrid.jqID(t.p.id)).clone(!0);n("tr[role=row]",r).each(function(){n("td[role=gridcell]:gt("+i+")",this).remove()});n(r).width(1).attr("id",t.p.id+"_frozen");n(t.grid.fbDiv).append(r);n("tr[role=row].jqgrow",r).each(function(t){n(this).height(f[t])});t.p.hoverrows===!0&&(n("tr.jqgrow",r).hover(function(){n(this).addClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).addClass(u)},function(){n(this).removeClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).removeClass(u)}),n("tr.jqgrow","#"+n.jgrid.jqID(t.p.id)).hover(function(){n(this).addClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").addClass(u)},function(){n(this).removeClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").removeClass(u)}));r=null});t.grid.hDiv.loading||n(t).triggerHandler("jqGridAfterGridComplete");t.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var t,r,i;if(this.grid&&this.p.frozenColumns===!0){if(t=this,r=n(t).jqGrid("getStyleUI",t.p.styleUI+".common","hover",!0),n(t.grid.fhDiv).remove(),n(t.grid.fbDiv).remove(),t.grid.fhDiv=null,t.grid.fbDiv=null,t.p.footerrow&&(n(t.grid.fsDiv).remove(),t.grid.fsDiv=null),n(this).off(".setFrozenColumns"),t.p.hoverrows===!0)n("#"+n.jgrid.jqID(t.p.id)).on({mouseover:function(t){i=n(t.target).closest("tr.jqgrow");n(i).attr("class")!=="ui-subgrid"&&n(i).addClass(r)},mouseout:function(t){i=n(t.target).closest("tr.jqgrow");n(i).removeClass(r)}});this.p.frozenColumns=!1}})},resizeColumn:function(n,t,i){return this.each(function(){var f=this.grid,r=this.p,e=r.colModel,u,s=e.length,o,h;if(typeof n=="string"){for(u=0;u<s;u++)if(e[u].name===n){n=u;break}}else n=parseInt(n,10);if((i===undefined&&(i=!1),e[n].resizable||i)&&(t=parseInt(t,10),typeof n=="number"&&!(n<0)&&!(n>e.length-1)&&typeof t=="number")&&!(t<r.minColWidth)){if(r.forceFit)for(r.nv=0,u=n+1;u<s;u++)if(e[u].hidden!==!0){r.nv=u-n;break}if(f.resizing={idx:n},o=t-f.headers[n].width,r.forceFit){if(h=f.headers[n+r.nv].width-o,h<r.minColWidth)return;f.headers[n+r.nv].newWidth=f.headers[n+r.nv].width-o}f.newWidth=r.tblwidth+o;f.headers[n].newWidth=t;f.dragEnd(!1)}})},getStyleUI:function(t,i,r,u){var f="",e="",o;try{o=t.split(".");r||(f="class=",e='"');u==null&&(u="");switch(o.length){case 1:f+=e+n.trim(u+" "+n.jgrid.styleUI[o[0]][i]+e);break;case 2:f+=e+n.trim(u+" "+n.jgrid.styleUI[o[0]][o[1]][i]+e)}}catch(s){f=""}return f},resizeGrid:function(t){return this.each(function(){var i=this;t===undefined&&(t=500);setTimeout(function(){try{var t=n(window).width(),r=n("#gbox_"+n.jgrid.jqID(i.p.id)).parent().width(),u=i.p.width;u=t-r>3?r:t;n("#"+n.jgrid.jqID(i.p.id)).jqGrid("setGridWidth",u)}catch(f){}},t)})}});n.jgrid.extend({editCell:function(t,i,r){return this.each(function(){var u=this,e,f,o,s,c=n(this).jqGrid("getStyleUI",u.p.styleUI+".common","highlight",!0),l=n(this).jqGrid("getStyleUI",u.p.styleUI+".common","hover",!0),y=n(this).jqGrid("getStyleUI",u.p.styleUI+".celledit","inputClass",!0),a,v,h;if(u.grid&&u.p.cellEdit===!0){if(i=parseInt(i,10),u.p.selrow=u.rows[t].id,u.p.knv||n(u).jqGrid("GridNav"),u.p.savedRow.length>0){if(r===!0&&t==u.p.iRow&&i==u.p.iCol)return;n(u).jqGrid("saveCell",u.p.savedRow[0].id,u.p.savedRow[0].ic)}else window.setTimeout(function(){n("#"+n.jgrid.jqID(u.p.knv)).attr("tabindex","-1").focus()},1);if(s=u.p.colModel[i],e=s.name,e!=="subgrid"&&e!=="cb"&&e!=="rn"){try{o=n(u.rows[t].cells[i])}catch(p){o=n("td:eq("+i+")",u.rows[t])}if(s.editable!==!0||r!==!0||o.hasClass("not-editable-cell")||n.isFunction(u.p.isCellEditable)&&!u.p.isCellEditable.call(u,e,t,i))parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&n(u.rows[u.p.iRow]).removeClass("selected-row "+l).find("td:eq("+u.p.iCol+")").removeClass("edit-cell "+c),o.addClass("edit-cell "+c),n(u.rows[t]).addClass("selected-row "+l),f=o.html().replace(/\&#160\;/ig,""),n(u).triggerHandler("jqGridSelectCell",[u.rows[t].id,e,f,t,i]),n.isFunction(u.p.onSelectCell)&&u.p.onSelectCell.call(u,u.rows[t].id,e,f,t,i);else{parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&n(u.rows[u.p.iRow]).removeClass("selected-row "+l).find("td:eq("+u.p.iCol+")").removeClass("edit-cell "+c);o.addClass("edit-cell "+c);n(u.rows[t]).addClass("selected-row "+l);try{f=n.unformat.call(u,o,{rowId:u.rows[t].id,colModel:s},i)}catch(w){f=s.edittype&&s.edittype==="textarea"?o.text():o.html()}u.p.autoencode&&(f=n.jgrid.htmlDecode(f));s.edittype||(s.edittype="text");u.p.savedRow.push({id:t,ic:i,name:e,v:f});(f==="&nbsp;"||f==="&#160;"||f.length===1&&f.charCodeAt(0)===160)&&(f="");n.isFunction(u.p.formatCell)&&(a=u.p.formatCell.call(u,u.rows[t].id,e,f,t,i),a!==undefined&&(f=a));n(u).triggerHandler("jqGridBeforeEditCell",[u.rows[t].id,e,f,t,i]);n.isFunction(u.p.beforeEditCell)&&u.p.beforeEditCell.call(u,u.rows[t].id,e,f,t,i);v=n.extend({},s.editoptions||{},{id:t+"_"+e,name:e,rowId:u.rows[t].id,oper:"edit"});h=n.jgrid.createEl.call(u,s.edittype,v,f,!0,n.extend({},n.jgrid.ajaxOptions,u.p.ajaxSelectOptions||{}));n.inArray(s.edittype,["text","textarea","password","select"])>-1&&n(h).addClass(y);o.html("").append(h).attr("tabindex","0");n.jgrid.bindEv.call(u,h,v);window.setTimeout(function(){n(h).focus()},1);n("input, select, textarea",o).on("keydown",function(r){if(r.keyCode===27&&(n("input.hasDatepicker",o).length>0?n(".ui-datepicker").is(":hidden")?n(u).jqGrid("restoreCell",t,i):n("input.hasDatepicker",o).datepicker("hide"):n(u).jqGrid("restoreCell",t,i)),r.keyCode===13&&!r.shiftKey)return n(u).jqGrid("saveCell",t,i),!1;if(r.keyCode===9){if(u.grid.hDiv.loading)return!1;r.shiftKey?n(u).jqGrid("prevCell",t,i):n(u).jqGrid("nextCell",t,i)}r.stopPropagation()});n(u).triggerHandler("jqGridAfterEditCell",[u.rows[t].id,e,f,t,i]);n.isFunction(u.p.afterEditCell)&&u.p.afterEditCell.call(u,u.rows[t].id,e,f,t,i)}u.p.iCol=i;u.p.iRow=t}}})},saveCell:function(t,i){return this.each(function(){var r=this,nt,l=n.jgrid.getRegional(this,"errors"),h=n.jgrid.getRegional(this,"edit"),tt,it,b,k,d,p,ut,w,v,s,ft,et,g;if(r.grid&&r.p.cellEdit===!0){if(nt=r.p.savedRow.length>=1?0:null,nt!==null){var a=n("td:eq("+i+")",r.rows[t]),u,o,e=r.p.colModel[i],f=e.name,c=n.jgrid.jqID(f),y=n(a).offset();switch(e.edittype){case"select":e.editoptions.multiple?(tt=n("#"+t+"_"+c,r.rows[t]),it=[],u=n(tt).val(),u?u.join(","):u="",n("option:selected",tt).each(function(t,i){it[t]=n(i).text()}),o=it.join(",")):(u=n("#"+t+"_"+c+" option:selected",r.rows[t]).val(),o=n("#"+t+"_"+c+" option:selected",r.rows[t]).text());e.formatter&&(o=u);break;case"checkbox":b=["Yes","No"];e.editoptions&&e.editoptions.value&&(b=e.editoptions.value.split(":"));u=n("#"+t+"_"+c,r.rows[t]).is(":checked")?b[0]:b[1];o=u;break;case"password":case"text":case"textarea":case"button":u=n("#"+t+"_"+c,r.rows[t]).val();o=u;break;case"custom":try{if(e.editoptions&&n.isFunction(e.editoptions.custom_value))if(u=e.editoptions.custom_value.call(r,n(".customelement",a),"get"),u===undefined)throw"e2";else o=u;else throw"e1";}catch(rt){rt==="e1"?n.jgrid.info_dialog(l.errcap,"function 'custom_value' "+h.msg.nodefined,h.bClose,{styleUI:r.p.styleUI}):rt==="e2"?n.jgrid.info_dialog(l.errcap,"function 'custom_value' "+h.msg.novalue,h.bClose,{styleUI:r.p.styleUI}):n.jgrid.info_dialog(l.errcap,rt.message,h.bClose,{styleUI:r.p.styleUI})}}if(o!==r.p.savedRow[nt].v)if(k=n(r).triggerHandler("jqGridBeforeSaveCell",[r.rows[t].id,f,u,t,i]),k&&(u=k,o=k),n.isFunction(r.p.beforeSaveCell)&&(d=r.p.beforeSaveCell.call(r,r.rows[t].id,f,u,t,i),d&&(u=d,o=d)),p=n.jgrid.checkValues.call(r,u,i),ut=!1,p[0]===!0){if(w=n(r).triggerHandler("jqGridBeforeSubmitCell",[r.rows[t].id,f,u,t,i])||{},n.isFunction(r.p.beforeSubmitCell)&&(w=r.p.beforeSubmitCell.call(r,r.rows[t].id,f,u,t,i),w||(w={})),v=n(r).triggerHandler("jqGridOnSubmitCell",[r.rows[t].id,f,u,t,i]),v===undefined&&(v=!0),n.isFunction(r.p.onSubmitCell)&&(v=r.p.onSubmitCell(r.rows[t].id,f,u,t,i),v===undefined&&(v=!0)),v===!1)return;if(n("input.hasDatepicker",a).length>0&&n("input.hasDatepicker",a).datepicker("hide"),r.p.cellsubmit==="remote")if(r.p.cellurl)s={},r.p.autoencode&&(u=n.jgrid.htmlEncode(u)),e.editoptions&&e.editoptions.NullIfEmpty&&u===""&&(u="null",ut=!0),s[f]=u,g=r.p.prmNames,ft=g.id,et=g.oper,s[ft]=n.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),s[et]=g.editoper,s=n.extend(w,s),n(r).jqGrid("progressBar",{method:"show",loadtype:r.p.loadui,htmlcontent:n.jgrid.getRegional(r,"defaults.savetext")}),r.grid.hDiv.loading=!0,n.ajax(n.extend({url:r.p.cellurl,data:n.isFunction(r.p.serializeCellData)?r.p.serializeCellData.call(r,s,f):s,type:"POST",complete:function(e,v){if(n(r).jqGrid("progressBar",{method:"hide",loadtype:r.p.loadui}),r.grid.hDiv.loading=!1,v==="success"){var p=n(r).triggerHandler("jqGridAfterSubmitCell",[r,e,s.id,f,u,t,i])||[!0,""];p[0]===!0&&n.isFunction(r.p.afterSubmitCell)&&(p=r.p.afterSubmitCell.call(r,e,s.id,f,u,t,i));p[0]===!0?(ut&&(u=""),n(a).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,o,!1,!1,!0),n(a).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,f,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,f,u,t,i),r.p.savedRow.splice(0,1)):(n(r).triggerHandler("jqGridErrorCell",[e,v]),n.isFunction(r.p.errorCell)?r.p.errorCell.call(r,e,v):n.jgrid.info_dialog(l.errcap,p[1],h.bClose,{styleUI:r.p.styleUI,top:y.top+30,left:y.left,onClose:function(){r.p.restoreCellonFail||n("#"+t+"_"+c,r.rows[t]).focus()}}),r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i))}},error:function(u,f,e){n("#lui_"+n.jgrid.jqID(r.p.id)).hide();r.grid.hDiv.loading=!1;n(r).triggerHandler("jqGridErrorCell",[u,f,e]);n.isFunction(r.p.errorCell)?r.p.errorCell.call(r,u,f,e):n.jgrid.info_dialog(l.errcap,u.status+" : "+u.statusText+"<br/>"+f,h.bClose,{styleUI:r.p.styleUI,top:y.top+30,left:y.left,onClose:function(){r.p.restoreCellonFail||n("#"+t+"_"+c,r.rows[t]).focus()}});r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i)}},n.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}));else try{n.jgrid.info_dialog(l.errcap,l.nourl,h.bClose,{styleUI:r.p.styleUI});r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i)}catch(rt){}r.p.cellsubmit==="clientArray"&&(n(a).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,o,!1,!1,!0),n(a).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,f,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,f,u,t,i),r.p.savedRow.splice(0,1))}else try{n.isFunction(r.p.validationCell)?r.p.validationCell.call(r,n("#"+t+"_"+c,r.rows[t]),p[1],t,i):(window.setTimeout(function(){n.jgrid.info_dialog(l.errcap,u+" "+p[1],h.bClose,{styleUI:r.p.styleUI,top:y.top+30,left:y.left,onClose:function(){r.p.restoreCellonFail||n("#"+t+"_"+c,r.rows[t]).focus()}})},50),r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i))}catch(rt){alert(p[1])}else n(r).jqGrid("restoreCell",t,i)}window.setTimeout(function(){n("#"+n.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r=this,u,f;if(r.grid&&r.p.cellEdit===!0){if(u=r.p.savedRow.length>=1?0:null,u!==null){if(f=n("td:eq("+i+")",r.rows[t]),n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker",f).datepicker("hide")}catch(e){}n(f).empty().attr("tabindex","-1");n(r).jqGrid("setCell",r.rows[t].id,i,r.p.savedRow[u].v,!1,!1,!0);n(r).triggerHandler("jqGridAfterRestoreCell",[r.rows[t].id,r.p.savedRow[u].v,t,i]);n.isFunction(r.p.afterRestoreCell)&&r.p.afterRestoreCell.call(r,r.rows[t].id,r.p.savedRow[u].v,t,i);r.p.savedRow.splice(0,1)}window.setTimeout(function(){n("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i+1;u<r.p.colModel.length;u++)if(r.p.colModel[u].editable===!0&&(!n.isFunction(r.p.isCellEditable)||r.p.isCellEditable.call(r,r.p.colModel[u].name,t,u))){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},prevCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i-1;u>=0;u--)if(r.p.colModel[u].editable===!0&&(!n.isFunction(r.p.isCellEditable)||r.p.isCellEditable.call(r,r.p.colModel[u].name,t,u))){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function u(i,r,u){if(u.substr(0,1)==="v"){var e=n(t.grid.bDiv)[0].clientHeight,o=n(t.grid.bDiv)[0].scrollTop,s=t.rows[i].offsetTop+t.rows[i].clientHeight,h=t.rows[i].offsetTop;u==="vd"&&s>=e&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop+t.rows[i].clientHeight);u==="vu"&&h<o&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop-t.rows[i].clientHeight)}if(u==="h"){var c=n(t.grid.bDiv)[0].clientWidth,f=n(t.grid.bDiv)[0].scrollLeft,l=t.rows[i].cells[r].offsetLeft+t.rows[i].cells[r].clientWidth,a=t.rows[i].cells[r].offsetLeft;l>=c+parseInt(f,10)?n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft+t.rows[i].cells[r].clientWidth:a<f&&(n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft-t.rows[i].cells[r].clientWidth)}}function e(n,i){var u,r;if(i==="lft")for(u=n+1,r=n;r>=0;r--)if(t.p.colModel[r].hidden!==!0){u=r;break}if(i==="rgt")for(u=n-1,r=n;r<t.p.colModel.length;r++)if(t.p.colModel[r].hidden!==!0){u=r;break}return u}var t=this,f,i,r;t.grid&&t.p.cellEdit===!0&&(t.p.knv=t.p.id+"_kn",f=n("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+t.p.knv+"'><\/div><\/div>"),n(f).insertBefore(t.grid.cDiv),n("#"+t.p.knv).focus().keydown(function(f){r=f.keyCode;t.p.direction==="rtl"&&(r===37?r=39:r===39&&(r=37));switch(r){case 38:t.p.iRow-1>0&&(u(t.p.iRow-1,t.p.iCol,"vu"),n(t).jqGrid("editCell",t.p.iRow-1,t.p.iCol,!1));break;case 40:t.p.iRow+1<=t.rows.length-1&&(u(t.p.iRow+1,t.p.iCol,"vd"),n(t).jqGrid("editCell",t.p.iRow+1,t.p.iCol,!1));break;case 37:t.p.iCol-1>=0&&(i=e(t.p.iCol-1,"lft"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1));break;case 39:t.p.iCol+1<=t.p.colModel.length-1&&(i=e(t.p.iCol+1,"rgt"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1));break;case 13:parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&n(t).jqGrid("editCell",t.p.iRow,t.p.iCol,!0);break;default:return!0}return!1}))})},getChangedCells:function(t){var i=[];return t||(t="all"),this.each(function(){var r=this,u;r.grid&&r.p.cellEdit===!0&&n(r.rows).each(function(f){var e={};n(this).hasClass("edited")&&(n("td",this).each(function(i){if(u=r.p.colModel[i].name,u!=="cb"&&u!=="subgrid")if(t==="dirty"){if(n(this).hasClass("dirty-cell"))try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}else try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}),e.id=this.id,i.push(e))})}),i}});n.extend(n.jgrid,{showModal:function(n){n.w.show()},closeModal:function(n){n.w.hide().attr("aria-hidden","true");n.o&&n.o.remove()},hideModal:function(t,i){var r,o,u,f,e,s;if(i=n.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},i||{}),r=i.gb&&typeof i.gb=="string"&&i.gb.substr(0,6)==="#gbox_"?n("#"+i.gb.substr(6))[0]:!1,!i.onClose||(o=r?i.onClose.call(r,t):i.onClose(t),typeof o!="boolean"||o)){if(i.formprop&&r&&i.form&&(u=n(t)[0].style.height,f=n(t)[0].style.width,u.indexOf("px")>-1&&(u=parseFloat(u)),f.indexOf("px")>-1&&(f=parseFloat(f)),i.form==="edit"?(e="#"+n.jgrid.jqID("FrmGrid_"+i.gb.substr(6)),s="formProp"):i.form==="view"&&(e="#"+n.jgrid.jqID("ViewGrid_"+i.gb.substr(6)),s="viewProp"),n(r).data(s,{top:parseFloat(n(t).css("top")),left:parseFloat(n(t).css("left")),width:f,height:u,dataheight:n(e).height(),datawidth:n(e).width()})),n.fn.jqm&&i.jqm===!0)n(t).attr("aria-hidden","true").jqmHide();else{if(i.gb!=="")try{n(".jqgrid-overlay:first",i.gb).hide()}catch(h){}n(t).hide().attr("aria-hidden","true")}i.removemodal&&n(t).remove()}},findPos:function(t){var i=n(t).offset();return[i.left,i.top]},createModal:function(t,i,r,u,f,e,o){var h,v,y,c,p,w,b;r=n.extend(!0,{},n.jgrid.jqModal||{},r);var k=this,d=n(r.gbox).attr("dir")==="rtl"?!0:!1,l=n.jgrid.styleUI[r.styleUI||"jQueryUI"].modal,a=n.jgrid.styleUI[r.styleUI||"jQueryUI"].common,s=document.createElement("div");if(o=n.extend({},o||{}),s.className="ui-jqdialog "+l.modal,s.id=t.themodal,h=document.createElement("div"),h.className="ui-jqdialog-titlebar "+l.header,h.id=t.modalhead,n(h).append("<span class='ui-jqdialog-title'>"+r.caption+"<\/span>"),v=n("<a class='ui-jqdialog-titlebar-close "+a.cornerall+"'><\/a>").hover(function(){v.addClass(a.hover)},function(){v.removeClass(a.hover)}).append("<span class='"+a.icon_base+" "+l.icon_close+"'><\/span>"),n(h).append(v),d?(s.dir="rtl",n(".ui-jqdialog-title",h).css("float","right"),n(".ui-jqdialog-titlebar-close",h).css("left",.3+"em")):(s.dir="ltr",n(".ui-jqdialog-title",h).css("float","left"),n(".ui-jqdialog-titlebar-close",h).css("right",.3+"em")),y=document.createElement("div"),n(y).addClass("ui-jqdialog-content "+l.content).attr("id",t.modalcontent),n(y).append(i),s.appendChild(y),n(s).prepend(h),e===!0?n("body").append(s):typeof e=="string"?n(e).append(s):n(s).insertBefore(u),n(s).css(o),r.jqModal===undefined&&(r.jqModal=!0),c={},n.fn.jqm&&r.jqModal===!0?(r.left===0&&r.top===0&&r.overlay&&(p=[],p=n.jgrid.findPos(f),r.left=p[0]+4,r.top=p[1]+4),c.top=r.top+"px",c.left=r.left):(r.left!==0||r.top!==0)&&(c.left=r.left,c.top=r.top+"px"),n("a.ui-jqdialog-titlebar-close",h).click(function(){var i=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,u=n("#"+n.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return k.hideModal("#"+n.jgrid.jqID(t.themodal),{gb:u,jqm:r.jqModal,onClose:i,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""}),!1}),r.width!==0&&r.width||(r.width=300),r.height!==0&&r.height||(r.height=200),r.zIndex||(w=n(u).parents("*[role=dialog]").filter(":first").css("z-index"),r.zIndex=w?parseInt(w,10)+2:950),b=0,d&&c.left&&!e&&(b=n(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,c.left=parseInt(c.left,10)+parseInt(b,10)),c.left&&(c.left+="px"),n(s).css(n.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),r.drag===undefined&&(r.drag=!0),r.resize===undefined&&(r.resize=!0),r.drag)if(n(h).css("cursor","move"),n.fn.tinyDraggable)n(s).tinyDraggable({handle:"#"+n.jgrid.jqID(h.id)});else try{n(s).draggable({handle:n("#"+n.jgrid.jqID(h.id))})}catch(g){}if(r.resize)if(n.fn.jqResize)n(s).append("<div class='jqResize "+l.resizable+" "+a.icon_base+" "+l.icon_resizable+"'><\/div>"),n("#"+n.jgrid.jqID(t.themodal)).jqResize(".jqResize",t.scrollelm?"#"+n.jgrid.jqID(t.scrollelm):!1);else try{n(s).resizable({handles:"se, sw",alsoResize:t.scrollelm?"#"+n.jgrid.jqID(t.scrollelm):!1})}catch(nt){}r.closeOnEscape===!0&&n(s).keydown(function(i){if(i.which===27){var u=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose;k.hideModal("#"+n.jgrid.jqID(t.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:u,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""})}})},viewModal:function(t,i){if(i=n.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:n.jgrid.showModal,onHide:n.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),i.focusField===undefined&&(i.focusField=0),i.focusField=typeof i.focusField=="number"&&i.focusField>=0?parseInt(i.focusField,10):typeof i.focusField!="boolean"||i.focusField?0:!1,n.fn.jqm&&i.jqm===!0)i.jqM?n(t).attr("aria-hidden","false").jqm(i).jqmShow():n(t).attr("aria-hidden","false").jqmShow();else if(i.gbox!==""&&(n(".jqgrid-overlay:first",i.gbox).show(),n(t).data("gbox",i.gbox)),n(t).show().attr("aria-hidden","false"),i.focusField>=0)try{n(":input:visible",t)[i.focusField].focus()}catch(r){}},info_dialog:function(t,i,r,u){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},o,e;n.extend(!0,f,n.jgrid.jqModal||{},{caption:"<b>"+t+"<\/b>"},u||{});var s=f.jqModal,a=this,l=n.jgrid.styleUI[f.styleUI||"jQueryUI"].modal,h=n.jgrid.styleUI[f.styleUI||"jQueryUI"].common;if(n.fn.jqm&&!s&&(s=!1),o="",f.buttons.length>0)for(e=0;e<f.buttons.length;e++)f.buttons[e].id===undefined&&(f.buttons[e].id="info_button_"+e),o+="<a id='"+f.buttons[e].id+"' class='fm-button "+h.button+"'>"+f.buttons[e].text+"<\/a>";var v=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",y="text-align:"+f.align+";",c="<div id='info_id'>";c+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+v+";"+y+"'>"+i+"<\/div>";c+=r?"<div class='"+l.content+"' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+h.button+"'>"+r+"<\/a>"+o+"<\/div>":o!==""?"<div class='"+l.content+"' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+o+"<\/div>":"";c+="<\/div>";try{n("#info_dialog").attr("aria-hidden")==="false"&&n.jgrid.hideModal("#info_dialog",{jqm:s});n("#info_dialog").remove()}catch(p){}n.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},c,f,"","",!0);o&&n.each(f.buttons,function(t){n("#"+n.jgrid.jqID(this.id),"#info_id").on("click",function(){return f.buttons[t].onClick.call(n("#info_dialog")),!1})});n("#closedialog","#info_id").on("click",function(){return a.hideModal("#info_dialog",{jqm:s,onClose:n("#info_dialog").data("onClose")||f.onClose,gb:n("#info_dialog").data("gbox")||f.gbox}),!1});n(".fm-button","#info_dialog").hover(function(){n(this).addClass(h.hover)},function(){n(this).removeClass(h.hover)});n.isFunction(f.beforeOpen)&&f.beforeOpen();n.jgrid.viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove();n.o&&n.o.remove()},modal:f.modal,jqm:s});n.isFunction(f.afterOpen)&&f.afterOpen();try{n("#info_dialog").focus()}catch(w){}},bindEv:function(t,i){var r=this;n.isFunction(i.dataInit)&&i.dataInit.call(r,t,i);i.dataEvents&&n.each(i.dataEvents,function(){if(this.data!==undefined)n(t).on(this.type,this.data,this.fn);else n(t).on(this.type,this.fn)})},createEl:function(t,i,r,u,f){function p(t,i,r){var u=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];u=u.concat(["cacheUrlData","delimiter","separator"]);r!==undefined&&n.isArray(r)&&n.merge(u,r);n.each(i,function(i,r){n.inArray(i,u)===-1&&n(t).attr(i,r)});i.hasOwnProperty("id")||n(t).attr("id",n.jgrid.randId())}var e="",s=this,rt,nt,l,a,w,k,v,ut,y,o,c,h,tt,ft,et,g,it,b,ot;switch(t){case"textarea":e=document.createElement("textarea");u?i.cols||n(e).css({width:"98%"}):i.cols||(i.cols=20);i.rows||(i.rows=2);(r==="&nbsp;"||r==="&#160;"||r.length===1&&r.charCodeAt(0)===160)&&(r="");e.value=r;p(e,i);n(e).attr({role:"textbox",multiline:"true"});break;case"checkbox":e=document.createElement("input");e.type="checkbox";i.value?(nt=i.value.split(":"),r===nt[0]&&(e.checked=!0,e.defaultChecked=!0),e.value=nt[0],n(e).attr("offval",nt[1])):(rt=(r+"").toLowerCase(),rt.search(/(false|f|0|no|n|off|undefined)/i)<0&&rt!==""?(e.checked=!0,e.defaultChecked=!0,e.value=r):e.value="on",n(e).attr("offval","off"));p(e,i,["value"]);n(e).attr("role","checkbox");break;case"select":if(e=document.createElement("select"),e.setAttribute("role","select"),a=[],i.multiple===!0?(l=!0,e.multiple="multiple",n(e).attr("aria-multiselectable","true")):l=!1,i.dataUrl!=null){w=null;k=i.postData||f.postData;try{w=i.rowId}catch(d){}s.p&&s.p.idPrefix&&(w=n.jgrid.stripPref(s.p.idPrefix,w));n.ajax(n.extend({url:n.isFunction(i.dataUrl)?i.dataUrl.call(s,w,r,String(i.name)):i.dataUrl,type:"GET",dataType:"html",data:n.isFunction(k)?k.call(s,w,r,String(i.name)):k,context:{elem:e,options:i,vl:r},success:function(t){var r=[],u=this.elem,f=this.vl,i=n.extend({},this.options),c=i.multiple===!0,l=i.cacheUrlData===!0,o="",h,e=n.isFunction(i.buildSelect)?i.buildSelect.call(s,t):t,a,v;typeof e=="string"&&(e=n(n.trim(e)).html());e&&(n(u).append(e),p(u,i,k?["postData"]:undefined),i.size===undefined&&(i.size=c?3:1),c?(r=f.split(","),r=n.map(r,function(t){return n.trim(t)})):r[0]=n.trim(f),n("option",u).each(function(t){h=n(this).text();f=n(this).val();l&&(o+=(t!==0?";":"")+f+":"+h);t===0&&u.multiple&&(this.selected=!1);n(this).attr("role","option");(n.inArray(n.trim(h),r)>-1||n.inArray(n.trim(f),r)>-1)&&(this.selected="selected")}),l&&(i.oper==="edit"?n(s).jqGrid("setColProp",i.name,{editoptions:{buildSelect:null,dataUrl:null,value:o}}):i.oper==="search"?n(s).jqGrid("setColProp",i.name,{searchoptions:{dataUrl:null,value:o}}):i.oper==="filter"&&n("#fbox_"+s.p.id)[0].p&&(a=n("#fbox_"+s.p.id)[0].p.columns,n.each(a,function(){return v=this.index||this.name,i.name===v?(this.searchoptions.dataUrl=null,this.searchoptions.value=o,!1):void 0}))),n(s).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[u]))}},f||{}))}else if(i.value){if(i.size===undefined&&(i.size=l?3:1),l&&(a=r.split(","),a=n.map(a,function(t){return n.trim(t)})),typeof i.value=="function"&&(i.value=i.value()),ft=i.separator===undefined?":":i.separator,et=i.delimiter===undefined?";":i.delimiter,typeof i.value=="string")for(ut=i.value.split(et),v=0;v<ut.length;v++)y=ut[v].split(ft),y.length>2&&(y[1]=n.map(y,function(n,t){if(t>0)return n}).join(ft)),o=document.createElement("option"),o.setAttribute("role","option"),o.value=y[0],o.innerHTML=y[1],e.appendChild(o),l||n.trim(y[0])!==n.trim(r)&&n.trim(y[1])!==n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(y[1]),a)>-1||n.inArray(n.trim(y[0]),a)>-1)&&(o.selected="selected");else if(Object.prototype.toString.call(i.value)==="[object Array]")for(c=i.value,v=0;v<c.length;v++)c[v].length===2&&(h=c[v][0],tt=c[v][1],o=document.createElement("option"),o.setAttribute("role","option"),o.value=h,o.innerHTML=tt,e.appendChild(o),l||n.trim(h)!==n.trim(r)&&n.trim(tt)!==n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(tt),a)>-1||n.inArray(n.trim(h),a)>-1)&&(o.selected="selected"));else if(typeof i.value=="object"){c=i.value;for(h in c)c.hasOwnProperty(h)&&(o=document.createElement("option"),o.setAttribute("role","option"),o.value=h,o.innerHTML=c[h],e.appendChild(o),l||n.trim(h)!==n.trim(r)&&n.trim(c[h])!==n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(c[h]),a)>-1||n.inArray(n.trim(h),a)>-1)&&(o.selected="selected"))}p(e,i,["value"])}break;case"image":case"file":e=document.createElement("input");e.type=t;p(e,i);break;case"custom":e=document.createElement("span");try{if(n.isFunction(i.custom_element))if(g=i.custom_element.call(s,r,i),g)g=n(g).addClass("customelement").attr({id:i.id,name:i.name}),n(e).empty().append(g);else throw"e2";else throw"e1";}catch(d){it=n.jgrid.getRegional(s,"errors");b=n.jgrid.getRegional(s,"edit");d==="e1"?n.jgrid.info_dialog(it.errcap,"function 'custom_element' "+b.msg.nodefined,b.bClose,{styleUI:s.p.styleUI}):d==="e2"?n.jgrid.info_dialog(it.errcap,"function 'custom_element' "+b.msg.novalue,b.bClose,{styleUI:s.p.styleUI}):n.jgrid.info_dialog(it.errcap,typeof d=="string"?d:d.message,b.bClose,{styleUI:s.p.styleUI})}break;default:ot=t==="button"?"button":"textbox";e=document.createElement("input");e.type=t;e.value=r;p(e,i);t!=="button"&&(u?i.size||n(e).css({width:"96%"}):i.size||(i.size=20));n(e).attr("role",ot)}return e},checkDate:function(n,t){var a=function(n){return n%4==0&&(n%100!=0||n%400==0)?29:28},i={},h,c,l,s;if(n=n.toLowerCase(),h=n.indexOf("/")!==-1?"/":n.indexOf("-")!==-1?"-":n.indexOf(".")!==-1?".":"/",n=n.split(h),t=t.split(h),t.length!==3)return!1;for(var u=-1,f,e=-1,o=-1,r=0;r<n.length;r++)c=isNaN(t[r])?0:parseInt(t[r],10),i[n[r]]=c,f=n[r],f.indexOf("y")!==-1&&(u=r),f.indexOf("m")!==-1&&(o=r),f.indexOf("d")!==-1&&(e=r);return(f=n[u]==="y"||n[u]==="yyyy"?4:n[u]==="yy"?2:-1,l=[0,31,29,31,30,31,30,31,31,30,31,30,31],u===-1)?!1:(s=i[n[u]].toString(),f===2&&s.length===1&&(f=1),s.length!==f||i[n[u]]===0&&t[u]!=="00")?!1:o===-1?!1:(s=i[n[o]].toString(),s.length<1||i[n[o]]<1||i[n[o]]>12)?!1:e===-1?!1:(s=i[n[e]].toString(),s.length<1||i[n[e]]<1||i[n[e]]>31||i[n[o]]===2&&i[n[e]]>a(i[n[u]])||i[n[e]]>l[i[n[o]]])?!1:!0},isEmpty:function(n){return n===undefined||n.match(/^\s+$/)||n===""?!0:!1},checkTime:function(t){var i;if(!n.jgrid.isEmpty(t))if(i=t.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/),i){if(i[3]){if(i[1]<1||i[1]>12)return!1}else if(i[1]>23)return!1;if(i[2]>59)return!1}else return!1;return!0},checkValues:function(t,i,r,u){var f,h,e,l,w,a=this,s=a.p.colModel,o=n.jgrid.getRegional(this,"edit.msg"),v,c,y,p;if(r===undefined)if(typeof i=="string"){for(h=0,w=s.length;h<w;h++)if(s[h].name===i){f=s[h].editrules;i=h;s[h].formoptions!=null&&(e=s[h].formoptions.label);break}}else i>=0&&(f=s[i].editrules);else f=r,e=u===undefined?"_":u;if(f){if(e||(e=a.p.colNames!=null?a.p.colNames[i]:s[i].label),f.required===!0&&n.jgrid.isEmpty(t))return[!1,e+": "+o.required,""];if(c=f.required===!1?!1:!0,f.number===!0&&!(c===!1&&n.jgrid.isEmpty(t))&&isNaN(t))return[!1,e+": "+o.number,""];if(f.minValue!==undefined&&!isNaN(f.minValue)&&parseFloat(t)<parseFloat(f.minValue))return[!1,e+": "+o.minValue+" "+f.minValue,""];if(f.maxValue!==undefined&&!isNaN(f.maxValue)&&parseFloat(t)>parseFloat(f.maxValue))return[!1,e+": "+o.maxValue+" "+f.maxValue,""];if(f.email===!0&&!(c===!1&&n.jgrid.isEmpty(t))&&(y=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!y.test(t)))return[!1,e+": "+o.email,""];if(f.integer===!0&&!(c===!1&&n.jgrid.isEmpty(t))){if(isNaN(t))return[!1,e+": "+o.integer,""];if(t%1!=0||t.indexOf(".")!==-1)return[!1,e+": "+o.integer,""]}if(f.date===!0&&!(c===!1&&n.jgrid.isEmpty(t))&&(s[i].formatoptions&&s[i].formatoptions.newformat?(l=s[i].formatoptions.newformat,v=n.jgrid.getRegional(a,"formatter.date.masks"),v&&v.hasOwnProperty(l)&&(l=v[l])):l=s[i].datefmt||"Y-m-d",!n.jgrid.checkDate(l,t)))return[!1,e+": "+o.date+" - "+l,""];if(f.time===!0&&!(c===!1&&n.jgrid.isEmpty(t))&&!n.jgrid.checkTime(t))return[!1,e+": "+o.date+" - hh:mm (am/pm)",""];if(f.url===!0&&!(c===!1&&n.jgrid.isEmpty(t))&&(y=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!y.test(t)))return[!1,e+": "+o.url,""];if(f.custom===!0&&!(c===!1&&n.jgrid.isEmpty(t)))return n.isFunction(f.custom_func)?(p=f.custom_func.call(a,t,e,i),n.isArray(p)?p:[!1,o.customarray,""]):[!1,o.customfcheck,""]}return[!0,"",""]}});n.fn.jqFilter=function(t){var r,u,i;if(typeof t=="string"){if(r=n.fn.jqFilter[t],!r)throw"jqFilter - No such method: "+t;return u=n.makeArray(arguments).slice(1),r.apply(this,u)}return i=n.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,uniqueSearchFields:!1,direction:"ltr",addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule",autoencode:!1},n.jgrid.filter,t||{}),this.each(function(){var f,e,t,o,h;if(!this.filter&&(this.p=i,(this.p.filter===null||this.p.filter===undefined)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),this.p.sortStrategy!=null&&n.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy),e=this.p.columns.length,o=/msie/i.test(navigator.userAgent)&&!window.opera,this.p.initFilter=n.extend(!0,{},this.p.filter),e)){for(f=0;f<e;f++)t=this.p.columns[f],t.stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),t.hidden===undefined&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={}),t.inlist=t.search===undefined?!0:t.search;var s=function(){return n("#"+n.jgrid.jqID(i.id))[0]||null},c=s(),r=n.jgrid.styleUI[c.p.styleUI||"jQueryUI"].filter,u=n.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common;this.p.showQuery&&n(this).append("<table class='queryresult "+r.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'><\/td><\/tr><\/tbody><\/table>");h=function(t,r){var u=[!0,""],f=s();if(n.isFunction(r.searchrules))u=r.searchrules.call(f,t,r);else if(n.jgrid&&n.jgrid.checkValues)try{u=n.jgrid.checkValues.call(f,t,-1,r.searchrules,r.label)}catch(e){}u&&u.length&&u[0]===!1&&(i.error=!u[0],i.errmsg=u[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",n.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){n("table.group:first",this).remove();var t=this.createTableForGroup(i.filter,null);n(this).append(t);n.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(t,f){var e=this,o,h=n("<table class='group "+r.table_widget+" ui-search-table' style='border:0px none;'><tbody><\/tbody><\/table>"),p="left",w,c,a,b,tt,v,k,l,d,y,it,g,nt,s,rt;if(this.p.direction==="rtl"&&(p="right",h.attr("dir","rtl")),f===null&&h.append("<tr class='error' style='display:none;'><th colspan='5' class='"+u.error+"' align='"+p+"'><\/th><\/tr>"),w=n("<tr><\/tr>"),h.append(w),c=n("<th colspan='5' align='"+p+"'><\/th>"),w.append(c),this.p.ruleButtons===!0){for(a=n("<select class='opsel "+r.srSelect+"'><\/select>"),c.append(a),b="",o=0;o<i.groupOps.length;o++)tt=t.groupOp===e.p.groupOps[o].op?" selected='selected'":"",b+="<option value='"+e.p.groupOps[o].op+"'"+tt+">"+e.p.groupOps[o].text+"<\/option>";a.append(b).on("change",function(){t.groupOp=n(a).val();e.onchange()})}if(v="<span><\/span>",this.p.groupButton){v=n("<input type='button' value='+ {}' title='"+e.p.subgroup+"' class='add-group "+u.button+"'/>");v.on("click",function(){return t.groups===undefined&&(t.groups=[]),t.groups.push({groupOp:i.groupOps[0].op,rules:[],groups:[]}),e.reDraw(),e.onchange(),!1})}if(c.append(v),this.p.ruleButtons===!0){k=n("<input type='button' value='+' title='"+e.p.addrule+"' class='add-rule ui-add "+u.button+"'/>");k.on("click",function(){var r;for(t.rules===undefined&&(t.rules=[]),o=0;o<e.p.columns.length;o++){var i=e.p.columns[o].search===undefined?!0:e.p.columns[o].search,u=e.p.columns[o].hidden===!0,f=e.p.columns[o].searchoptions.searchhidden===!0;if(f&&i||i&&!u){l=e.p.columns[o];break}}return l?(r=l.searchoptions.sopt?l.searchoptions.sopt:e.p.sopt?e.p.sopt:n.inArray(l.searchtype,e.p.strarr)!==-1?e.p.stropts:e.p.numopts,t.rules.push({field:l.name,op:r[0],data:""}),e.reDraw(),!1):!1});c.append(k)}if(f!==null){d=n("<input type='button' value='-' title='"+e.p.delgroup+"' class='delete-group "+u.button+"'/>");c.append(d);d.on("click",function(){for(o=0;o<f.groups.length;o++)if(f.groups[o]===t){f.groups.splice(o,1);break}return e.reDraw(),e.onchange(),!1})}if(t.groups!==undefined)for(o=0;o<t.groups.length;o++)y=n("<tr><\/tr>"),h.append(y),it=n("<td class='first'><\/td>"),y.append(it),g=n("<td colspan='4'><\/td>"),g.append(this.createTableForGroup(t.groups[o],t)),y.append(g);if(t.groupOp===undefined&&(t.groupOp=e.p.groupOps[0].op),nt=e.p.ruleButtons&&e.p.uniqueSearchFields,nt)for(s=0;s<e.p.columns.length;s++)e.p.columns[s].inlist&&(e.p.columns[s].search=!0);if(t.rules!==undefined)for(o=0;o<t.rules.length;o++)if(h.append(this.createTableRowForRule(t.rules[o],t)),nt)for(rt=t.rules[o].field,s=0;s<e.p.columns.length;s++)if(rt===e.p.columns[s].name){e.p.columns[s].search=!1;break}return h};this.createTableRowForRule=function(t,f){var e=this,y=s(),p=n("<tr><\/tr>"),c,v,l,h,d="",g,it,w,a,b,tt,rt,k,nt,ut,ft,et;p.append("<td class='first'><\/td>");it=n("<td class='columns'><\/td>");p.append(it);w=n("<select class='"+r.srSelect+"'><\/select>");b=[];it.append(w);w.on("change",function(){var u,f,i,s,p,k;for(e.p.ruleButtons&&e.p.uniqueSearchFields&&(u=parseInt(n(this).data("curr"),10),f=this.selectedIndex,u>=0&&(e.p.columns[u].search=!0,n(this).data("curr",f),e.p.columns[f].search=!1)),t.field=n(w).val(),l=n(this).parents("tr:first"),n(".data",l).empty(),c=0;c<e.p.columns.length;c++)if(e.p.columns[c].name===t.field){h=e.p.columns[c];break}if(h){for(h.searchoptions.id=n.jgrid.randId(),h.searchoptions.name=t.field,h.searchoptions.oper="filter",o&&h.inputtype==="text"&&(h.searchoptions.size||(h.searchoptions.size=10)),i=n.jgrid.createEl.call(y,h.inputtype,h.searchoptions,"",!0,e.p.ajaxSelectOptions||{},!0),n(i).addClass("input-elm "+r.srInput),v=h.searchoptions.sopt?h.searchoptions.sopt:e.p.sopt?e.p.sopt:n.inArray(h.searchtype,e.p.strarr)!==-1?e.p.stropts:e.p.numopts,s="",p=0,b=[],n.each(e.p.ops,function(){b.push(this.oper)}),c=0;c<v.length;c++)a=n.inArray(v[c],b),a!==-1&&(p===0&&(t.op=e.p.ops[a].oper),s+="<option value='"+e.p.ops[a].oper+"'>"+e.p.ops[a].text+"<\/option>",p++);n(".selectopts",l).empty().append(s);n(".selectopts",l)[0].selectedIndex=0;n.jgrid.msie()&&n.jgrid.msiever()<9&&(k=parseInt(n("select.selectopts",l)[0].offsetWidth,10)+1,n(".selectopts",l).width(k),n(".selectopts",l).css("width","auto"));n(".data",l).append(i);n.jgrid.bindEv.call(y,i,h.searchoptions);n(".input-elm",l).on("change",function(i){var r=i.target;t.data=h.inputtype==="custom"&&n.isFunction(h.searchoptions.custom_value)?h.searchoptions.custom_value.call(y,n(".customelement",this),"get"):n(r).val();h.inputtype==="select"&&h.searchoptions.multiple&&(t.data=t.data.join(","));e.onchange()});setTimeout(function(){t.data=n(i).val();e.onchange()},0)}});for(tt=0,c=0;c<e.p.columns.length;c++){var ot=e.p.columns[c].search===undefined?!0:e.p.columns[c].search,st=e.p.columns[c].hidden===!0,ht=e.p.columns[c].searchoptions.searchhidden===!0;(ht&&ot||ot&&!st)&&(g="",t.field===e.p.columns[c].name&&(g=" selected='selected'",tt=c),d+="<option value='"+e.p.columns[c].name+"'"+g+">"+e.p.columns[c].label+"<\/option>")}w.append(d);w.data("curr",tt);rt=n("<td class='operators'><\/td>");p.append(rt);h=i.columns[tt];h.searchoptions.id=n.jgrid.randId();o&&h.inputtype==="text"&&(h.searchoptions.size||(h.searchoptions.size=10));h.searchoptions.name=t.field;h.searchoptions.oper="filter";k=n.jgrid.createEl.call(y,h.inputtype,h.searchoptions,t.data,!0,e.p.ajaxSelectOptions||{},!0);(t.op==="nu"||t.op==="nn")&&(n(k).attr("readonly","true"),n(k).attr("disabled","true"));nt=n("<select class='selectopts "+r.srSelect+"'><\/select>");rt.append(nt);nt.on("change",function(){t.op=n(nt).val();l=n(this).parents("tr:first");var i=n(".input-elm",l)[0];t.op==="nu"||t.op==="nn"?(t.data="",i.tagName.toUpperCase()!=="SELECT"&&(i.value=""),i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):(i.tagName.toUpperCase()==="SELECT"&&(t.data=i.value),i.removeAttribute("readonly"),i.removeAttribute("disabled"));e.onchange()});for(v=h.searchoptions.sopt?h.searchoptions.sopt:e.p.sopt?e.p.sopt:n.inArray(h.searchtype,e.p.strarr)!==-1?e.p.stropts:e.p.numopts,d="",n.each(e.p.ops,function(){b.push(this.oper)}),c=0;c<v.length;c++)a=n.inArray(v[c],b),a!==-1&&(g=t.op===e.p.ops[a].oper?" selected='selected'":"",d+="<option value='"+e.p.ops[a].oper+"'"+g+">"+e.p.ops[a].text+"<\/option>");nt.append(d);ut=n("<td class='data'><\/td>");p.append(ut);ut.append(k);n.jgrid.bindEv.call(y,k,h.searchoptions);n(k).addClass("input-elm "+r.srInput).on("change",function(){t.data=h.inputtype==="custom"?h.searchoptions.custom_value.call(y,n(".customelement",this),"get"):n(this).val();e.onchange()});if(ft=n("<td><\/td>"),p.append(ft),this.p.ruleButtons===!0){et=n("<input type='button' value='-' title='"+e.p.delrule+"' class='delete-rule ui-del "+u.button+"'/>");ft.append(et);et.on("click",function(){for(c=0;c<f.rules.length;c++)if(f.rules[c]===t){f.rules.splice(c,1);break}return e.reDraw(),e.onchange(),!1})}return p};this.getStringForGroup=function(n){var t="(",i;if(n.groups!==undefined)for(i=0;i<n.groups.length;i++){t.length>1&&(t+=" "+n.groupOp+" ");try{t+=this.getStringForGroup(n.groups[i])}catch(r){alert(r)}}if(n.rules!==undefined)try{for(i=0;i<n.rules.length;i++)t.length>1&&(t+=" "+n.groupOp+" "),t+=this.getStringForRule(n.rules[i])}catch(u){alert(u)}return(t+=")",t==="()")?"":t};this.getStringForRule=function(t){for(var o="",r="",e,u,f=0;f<this.p.ops.length;f++)if(this.p.ops[f].oper===t.op){o=this.p.operands.hasOwnProperty(t.op)?this.p.operands[t.op]:"";r=this.p.ops[f].oper;break}for(f=0;f<this.p.columns.length;f++)if(this.p.columns[f].name===t.field){e=this.p.columns[f];break}return e===undefined?"":(u=this.p.autoencode?n.jgrid.htmlEncode(t.data):t.data,(r==="bw"||r==="bn")&&(u=u+"%"),(r==="ew"||r==="en")&&(u="%"+u),(r==="cn"||r==="nc")&&(u="%"+u+"%"),(r==="in"||r==="ni")&&(u=" ("+u+")"),i.errorcheck&&h(t.data,e),n.inArray(e.searchtype,["int","integer","float","number","currency"])!==-1||r==="nn"||r==="nu"?t.field+" "+o+" "+u:t.field+" "+o+' "'+u+'"')};this.resetFilter=function(){this.p.filter=n.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){n("th."+u.error,this).html("");n("tr.error",this).hide()};this.showError=function(){n("th."+u.error,this).html(this.p.errmsg);n("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)};this.toString=function(){function i(t){if(n.p.errorcheck){for(var r,i=0;i<n.p.columns.length;i++)if(n.p.columns[i].name===t.field){r=n.p.columns[i];break}r&&h(t.data,r)}return t.op+"(item."+t.field+",'"+t.data+"')"}function t(n){var r="(",u;if(n.groups!==undefined)for(u=0;u<n.groups.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=t(n.groups[u]);if(n.rules!==undefined)for(u=0;u<n.rules.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=i(n.rules[u]);return(r+=")",r==="()")?"":r}var n=this;return t(this.p.filter)};this.reDraw();this.p.showQuery&&this.onchange();this.filter=!0}})};n.extend(n.fn.jqFilter,{toSQLString:function(){var n="";return this.each(function(){n=this.toUserFriendlyString()}),n},filterData:function(){var n;return this.each(function(){n=this.p.filter}),n},getParameter:function(n){return n!==undefined&&this.p.hasOwnProperty(n)?this.p[n]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(t){typeof t=="string"&&(t=n.jgrid.parse(t));this.each(function(){this.p.filter=t;this.reDraw();this.onchange()})}});n.extend(n.jgrid,{filterRefactor:function(t){var i={},e,r,u,f,o;try{if(i=typeof t.ruleGroudp=="string"?n.jgrid.parse(t.ruleGroup):t.ruleGroup,i.rules&&i.rules.length)for(e=i.rules,r=0;r<e.length;r++)u=e[r],n.inArray(u.filed,t.ssfield)&&(f=u.data.split(t.splitSelect),f.length>1&&(i.groups===undefined&&(i.groups=[]),o={groupOp:t.groupOpSelect,groups:[],rules:[]},i.groups.push(o),n.each(f,function(n){f[n]&&o.rules.push({data:f[n],op:u.op,field:u.field})}),e.splice(r,1),r--))}catch(s){}return i}});n.jgrid.extend({filterToolbar:function(t){var i=n.jgrid.getRegional(this[0],"search");return t=n.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,url:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},i,t||{}),this.each(function(){var r=this;if(!r.p.filterToolbar){n(r).data("filterToolbar")||n(r).data("filterToolbar",t);r.p.force_regional&&(t=n.extend(t,i));var c=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].filter,o=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].common,l=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].base,f=function(){var y={},g=0,u,h,nt={},o,p=!1,tt=[],w=!1,e,it,i,b,f,l,s,rt,a,c,k,d,v;if(n.each(r.p.colModel,function(){var i=n("#gs_"+r.p.idPrefix+n.jgrid.jqID(this.name),this.frozen===!0&&r.p.frozenColumns===!0?r.grid.fhDiv:r.grid.hDiv);if(h=this.index||this.name,e=this.searchoptions||{},o=t.searchOperators&&e.searchOperMenu?i.parent().prev().children("a").attr("soper")||t.defaultSearch:e.sopt?e.sopt[0]:this.stype==="select"?"eq":t.defaultSearch,u=this.stype==="custom"&&n.isFunction(e.custom_value)&&i.length>0?e.custom_value.call(r,i,"get"):i.val(),this.stype==="select"&&e.multiple&&n.isArray(u)&&u.length&&(p=!0,tt.push(h),u=u.length===1?u[0]:u),o==="bt"&&(w=!0),u||o==="nu"||o==="nn")y[h]=u,nt[h]=o,g++;else try{delete r.p.postData[h]}catch(f){}}),it=g>0?!0:!1,t.stringResult===!0||r.p.datatype==="local"||t.searchOperators===!0){if(i='{"groupOp":"'+t.groupOp+'","rules":[',b=0,n.each(y,function(n,t){b>0&&(i+=",");i+='{"field":"'+n+'",';i+='"op":"'+nt[n]+'",';t+="";i+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';b++}),i+="]}",p&&n.jgrid.filterRefactor({ruleGroup:i,ssfield:tt,splitSelect:t.splitSelect,groupOpSelect:t.groupOpSelect}),w&&(n.isPlainObject(f)||(f=n.jgrid.parse(i)),f.rules&&f.rules.length))for(l=f.rules,s=0;s<l.length;s++)a=l[s],a.op==="bt"&&(c=a.data.split("..."),c.length>1&&(f.groups===undefined&&(f.groups=[]),k={groupOp:"AND",groups:[],rules:[]},f.groups.push(k),n.each(c,function(n){var t=n===0?"ge":"le";rt=c[n];rt&&k.rules.push({data:c[n],op:t,field:a.field})}),l.splice(s,1),s--));(w||p)&&(i=JSON.stringify(f));n.extend(r.p.postData,{filters:i});n.each(["searchField","searchString","searchOper"],function(n,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]})}else n.extend(r.p.postData,y);t.url&&(d=r.p.url,n(r).jqGrid("setGridParam",{url:t.url}));v=n(r).triggerHandler("jqGridToolbarBeforeSearch")==="stop"?!0:!1;!v&&n.isFunction(t.beforeSearch)&&(v=t.beforeSearch.call(r));v||n(r).jqGrid("setGridParam",{search:it}).trigger("reloadGrid",[{page:1}]);d&&n(r).jqGrid("setGridParam",{url:d});n(r).triggerHandler("jqGridToolbarAfterSearch");n.isFunction(t.afterSearch)&&t.afterSearch.call(r)},a=function(i){var e={},s=0,f,l,u,h,c,o;i=typeof i!="boolean"?!0:i;n.each(r.p.colModel,function(){var t,i=n("#gs_"+r.p.idPrefix+n.jgrid.jqID(this.name),this.frozen===!0&&r.p.frozenColumns===!0?r.grid.fhDiv:r.grid.hDiv);this.searchoptions&&this.searchoptions.defaultValue!==undefined&&(t=this.searchoptions.defaultValue);f=this.index||this.name;switch(this.stype){case"select":if(i.find("option").each(function(i){return i===0&&(this.selected=!0),n(this).val()===t?(this.selected=!0,!1):void 0}),t!==undefined)e[f]=t,s++;else try{delete r.p.postData[f]}catch(u){}break;case"text":if(i.val(t||""),t!==undefined)e[f]=t,s++;else try{delete r.p.postData[f]}catch(o){}break;case"custom":n.isFunction(this.searchoptions.custom_value)&&i.length>0&&this.searchoptions.custom_value.call(r,i,"set",t||"")}});l=s>0?!0:!1;r.p.resetsearch=!0;t.stringResult===!0||r.p.datatype==="local"?(u='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(e,function(n,t){h>0&&(u+=",");u+='{"field":"'+n+'",';u+='"op":"eq",';t+="";u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';h++}),u+="]}",n.extend(r.p.postData,{filters:u}),n.each(["searchField","searchString","searchOper"],function(n,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]})):n.extend(r.p.postData,e);t.url&&(c=r.p.url,n(r).jqGrid("setGridParam",{url:t.url}));o=n(r).triggerHandler("jqGridToolbarBeforeClear")==="stop"?!0:!1;!o&&n.isFunction(t.beforeClear)&&(o=t.beforeClear.call(r));o||i&&n(r).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]);c&&n(r).jqGrid("setGridParam",{url:c});n(r).triggerHandler("jqGridToolbarAfterClear");n.isFunction(t.afterClear)&&t.afterClear()},v=function(){var t=n("tr.ui-search-toolbar",r.grid.hDiv);r.p.frozenColumns===!0&&n(r).jqGrid("destroyFrozenColumns");t.css("display")==="none"?t.show():t.hide();r.p.frozenColumns===!0&&n(r).jqGrid("setFrozenColumns")},y=function(i,u,e){var v,l;n("#sopt_menu").remove();u=parseInt(u,10);e=parseInt(e,10)+18;for(var w=n(".ui-jqgrid-view").css("font-size")||"11px",a='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+w+";left:"+u+"px;top:"+e+'px;">',b=n(i).attr("soper"),y,p=[],h,s=0,k=n(i).attr("colname"),d=r.p.colModel.length;s<d;){if(r.p.colModel[s].name===k)break;s++}for(v=r.p.colModel[s],l=n.extend({},v.searchoptions),l.sopt||(l.sopt=[],l.sopt[0]=v.stype==="select"?"eq":t.defaultSearch),n.each(t.odata,function(){p.push(this.oper)}),s=0;s<l.sopt.length;s++)h=n.inArray(l.sopt[s],p),h!==-1&&(y=b===t.odata[h].oper?o.highlight:"",a+='<li class="ui-menu-item '+y+'" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+t.odata[h].oper+'" oper="'+t.operands[t.odata[h].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+t.operands[t.odata[h].oper]+"<\/td><td>"+t.odata[h].text+"<\/td><\/tr><\/table><\/a><\/li>");a+="<\/ul>";n("body").append(a);n("#sopt_menu").addClass("ui-menu "+c.menu_widget);n("#sopt_menu > li > a").hover(function(){n(this).addClass(o.hover)},function(){n(this).removeClass(o.hover)}).click(function(){var u=n(this).attr("value"),e=n(this).attr("oper"),o;n(r).triggerHandler("jqGridToolbarSelectOper",[u,e,i]);n("#sopt_menu").hide();n(i).text(e).attr("soper",u);t.autosearch===!0&&(o=n(i).parent().next().children()[0],(n(o).val()||u==="nu"||u==="nn")&&f())})},s=n("<tr class='ui-search-toolbar' role='row'><\/tr>"),h,e,u;if(t.restoreFromFilters&&(u=r.p.postData.filters,u&&(typeof u=="string"&&(u=n.jgrid.parse(u)),e=u.rules.length?u.rules:!1)),n.each(r.p.colModel,function(i){var o=this,u,d="",nt="=",p,w,tt,it,b,k,a,g=n("<th role='columnheader' class='"+l.headerBox+" ui-th-"+r.p.direction+"' id='gsh_"+r.p.id+"_"+o.name+"' ><\/th>"),rt=n("<div><\/div>"),v=n("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''><\/td><td class='ui-search-input' headers=''><\/td><td class='ui-search-clear' headers=''><\/td><\/tr><\/table>"),y,ut;if(this.hidden===!0&&n(g).css("display","none"),this.search=this.search===!1?!1:!0,this.stype===undefined&&(this.stype="text"),this.searchoptions=this.searchoptions||{},this.searchoptions.searchOperMenu===undefined&&(this.searchoptions.searchOperMenu=!0),u=n.extend({},this.searchoptions,{name:o.index||o.name,id:"gs_"+r.p.idPrefix+o.name,oper:"search"}),this.search){if(t.restoreFromFilters&&e)for(a=!1,y=0;y<e.length;y++)if(e[y].field&&(ut=o.index||o.name,ut===e[y].field)){a=e[y];break}if(t.searchOperators){for(p=u.sopt?u.sopt[0]:o.stype==="select"?"eq":t.defaultSearch,t.restoreFromFilters&&a&&(p=a.op),w=0;w<t.odata.length;w++)if(t.odata[w].oper===p){nt=t.operands[p]||"";break}tt=u.searchtitle!=null?u.searchtitle:t.operandTitle;d=this.searchoptions.searchOperMenu?"<a title='"+tt+"' style='padding-right: 0.5em;' soper='"+p+"' class='soptclass' colname='"+this.name+"'>"+nt+"<\/a>":""}n("td:eq(0)",v).attr("colindex",i).append(d);u.clearSearch===undefined&&(u.clearSearch=!0);u.clearSearch?(it=t.resetTitle||"Clear Search Value",n("td:eq(2)",v).append("<a title='"+it+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+t.resetIcon+"<\/a>")):n("td:eq(2)",v).hide();this.surl&&(u.dataUrl=this.surl);b="";u.defaultValue&&(b=n.isFunction(u.defaultValue)?u.defaultValue.call(r):u.defaultValue);t.restoreFromFilters&&a&&(b=a.data);k=n.jgrid.createEl.call(r,this.stype,u,b,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));n(k).addClass(c.srInput);n("td:eq(1)",v).append(k);n(rt).append(v);u.dataEvents==null&&(u.dataEvents=[]);switch(this.stype){case"select":t.autosearch===!0&&u.dataEvents.push({type:"change",fn:function(){return f(),!1}});break;case"text":t.autosearch===!0&&(t.searchOnEnter?u.dataEvents.push({type:"keypress",fn:function(n){var t=n.charCode||n.keyCode||0;return t===13?(f(),!1):this}}):u.dataEvents.push({type:"keydown",fn:function(n){var i=n.which;switch(i){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:h&&clearTimeout(h);h=setTimeout(function(){f()},t.autosearchDelay)}}}))}n.jgrid.bindEv.call(r,k,u)}n(g).append(rt);n(s).append(g);t.searchOperators&&d!==""||n("td:eq(0)",v).hide()}),n("table thead",r.grid.hDiv).append(s),t.searchOperators){n(".soptclass",s).click(function(t){var i=n(this).offset(),r=i.left,u=i.top;y(this,r,u);t.stopPropagation()});n("body").on("click",function(t){t.target.className!=="soptclass"&&n("#sopt_menu").remove()})}n(".clearsearchclass",s).click(function(){var s=n(this).parents("tr:first"),e=parseInt(n("td.ui-search-oper",s).attr("colindex"),10),o=n.extend({},r.p.colModel[e].searchoptions||{}),u=o.defaultValue?o.defaultValue:"",i;r.p.colModel[e].stype==="select"?(i=n("td.ui-search-input select",s),u?i.val(u):i[0].selectedIndex=0):(i=n("td.ui-search-input input",s),i.val(u));n(r).triggerHandler("jqGridToolbarClearVal",[i[0],e,o,u]);n.isFunction(t.onClearSearchValue)&&t.onClearSearchValue.call(r,i[0],e,o,u);t.autosearch===!0&&f()});this.p.filterToolbar=!0;this.triggerToolbar=f;this.clearToolbar=a;this.toggleToolbar=v}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,n(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},refreshFilterToolbar:function(t){return t=n.extend(!0,{filters:"",onClearVal:null,onSetVal:null},t||{}),this.each(function(){function a(h){if(h&&h.rules){for(c=h.rules,s=c.length,i=0;i<s;i++)o=c[i],e=n.inArray(o.field,l),e!==-1&&(u=n("#gs_"+f.p.idPrefix+n.jgrid.jqID(r[e].name)),u.length>0&&(r[e].stype==="select"?u.find("option[value='"+n.jgrid.jqID(o.data)+"']").prop("selected",!0):r[e].stype==="text"&&u.val(o.data),n.isFunction(t.onSetVal)&&t.onSetVal.call(f,u,r[e].name)));if(h.groups)for(var v=0;v<h.groups.length;v++)a(h.groups[v])}}var f=this,r=f.p.colModel,i,s=f.p.colModel.length,u,h,c,o,l=[],e;if(f.p.filterToolbar){for(i=0;i<s;i++){l.push(r[i].name);u=n("#gs_"+f.p.idPrefix+n.jgrid.jqID(r[i].name));switch(r[i].stype){case"select":case"text":u.val("")}n.isFunction(t.onClearVal)&&t.onClearVal.call(f,u,r[i].name)}typeof t.filters=="string"&&t.filters.length&&(h=n.jgrid.parse(t.filters));n.isPlainObject(h)&&a(h)}})},searchGrid:function(t){var i=n.jgrid.getRegional(this[0],"search");return t=n.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,splitSelect:",",groupOpSelect:"OR",operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},i,t||{}),this.each(function(){function d(u){l=n(i).triggerHandler("jqGridFilterBeforeShow",[u]);l===undefined&&(l=!0);l&&n.isFunction(t.beforeShowSearch)&&(l=t.beforeShowSearch.call(i,u));l&&(n.jgrid.viewModal("#"+n.jgrid.jqID(e.themodal),{gbox:"#gbox_"+n.jgrid.jqID(r),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),n(i).triggerHandler("jqGridFilterAfterShow",[u]),n.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(i,u))}var i=this,b;if(i.grid){var r="fbox_"+i.p.id,l=!0,u=!0,e={themodal:"searchmod"+r,modalhead:"searchhd"+r,modalcontent:"searchcnt"+r,scrollelm:r},c=n.isPlainObject(i.p_savedFilter)&&!n.isEmptyObject(i.p_savedFilter)?i.p_savedFilter:i.p.postData[t.sFilter],o,p=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].filter,f=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common;if(t.styleUI=i.p.styleUI,typeof c=="string"&&(c=n.jgrid.parse(c)),t.recreateFilter===!0&&n("#"+n.jgrid.jqID(e.themodal)).remove(),n("#"+n.jgrid.jqID(e.themodal))[0]!==undefined)d(n("#fbox_"+n.jgrid.jqID(i.p.id)));else{var s=n("<div><div id='"+r+"' class='searchFilter' style='overflow:auto'><\/div><\/div>").insertBefore("#gview_"+n.jgrid.jqID(i.p.id)),g="left",nt="";i.p.direction==="rtl"&&(g="right",nt=" style='text-align:left'",s.attr("dir","rtl"));var h=n.extend([],i.p.colModel),ut="<a id='"+r+"_search' class='fm-button "+f.button+" fm-button-icon-right ui-search'><span class='"+f.icon_base+" "+p.icon_search+"'><\/span>"+t.Find+"<\/a>",ft="<a id='"+r+"_reset' class='fm-button "+f.button+" fm-button-icon-left ui-reset'><span class='"+f.icon_base+" "+p.icon_reset+"'><\/span>"+t.Reset+"<\/a>",k="",a="",w,v=!1,tt,y=-1,it=!1,rt=[];if(t.showQuery&&(k="<a id='"+r+"_query' class='fm-button "+f.button+" fm-button-icon-left'><span class='"+f.icon_base+" "+p.icon_query+"'><\/span>Query<\/a>"),t.columns.length?(h=t.columns,y=0,w=h[0].index||h[0].name):n.each(h,function(n,t){if(t.label||(t.label=i.p.colNames[n]),!v){var r=t.search===undefined?!0:t.search,u=t.hidden===!0,f=t.searchoptions&&t.searchoptions.searchhidden===!0;(f&&r||r&&!u)&&(v=!0,w=t.index||t.name,y=n)}t.stype==="select"&&t.searchoptions&&t.searchoptions.multiple&&(it=!0,rt.push(t.index||t.name))}),(!c&&w||t.multipleSearch===!1)&&(b="eq",y>=0&&h[y].searchoptions&&h[y].searchoptions.sopt?b=h[y].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(b=t.sopt[0]),c={groupOp:"AND",rules:[{field:w,op:b,data:""}]}),v=!1,t.tmplNames&&t.tmplNames.length&&(v=!0,a="<tr><td class='ui-search-label'>"+t.tmplLabel+"<\/td>",a+="<td><select class='ui-template "+p.srSelect+"'>",a+="<option value='default'>Default<\/option>",n.each(t.tmplNames,function(n,t){a+="<option value='"+n+"'>"+t+"<\/option>"}),a+="<\/select><\/td><\/tr>"),tt="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+r+"_2'><tbody><tr><td colspan='2'><hr class='"+f.content+"' style='margin:1px'/><\/td><\/tr>"+a+"<tr><td class='EditButton' style='text-align:"+g+"'>"+ft+"<\/td><td class='EditButton' "+nt+">"+k+ut+"<\/td><\/tr><\/tbody><\/table>",r=n.jgrid.jqID(r),n("#"+r).jqFilter({columns:h,sortStrategy:t.sortStrategy,filter:t.loadDefaults?c:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,uniqueSearchFields:t.uniqueSearchFields,afterRedraw:t.afterRedraw,ops:t.odata,operands:t.operands,ajaxSelectOptions:i.p.ajaxSelectOptions,groupOps:t.groupOps,addsubgrup:t.addsubgrup,addrule:t.addrule,delgroup:t.delgroup,delrule:t.delrule,autoencode:i.p.autoencode,onChange:function(){this.p.showQuery&&n(".query",this).html(this.toUserFriendlyString());n.isFunction(t.afterChange)&&t.afterChange.call(i,n("#"+r),t)},direction:i.p.direction,id:i.p.id}),s.append(tt),v&&t.tmplFilters&&t.tmplFilters.length)n(".ui-template",s).on("change",function(){var i=n(this).val();return i==="default"?n("#"+r).jqFilter("addFilter",c):n("#"+r).jqFilter("addFilter",t.tmplFilters[parseInt(i,10)]),!1});if(t.multipleGroup===!0&&(t.multipleSearch=!0),n(i).triggerHandler("jqGridFilterInitialize",[n("#"+r)]),n.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(i,n("#"+r)),t.gbox="#gbox_"+r,t.layer?n.jgrid.createModal(e,s,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0],"#"+n.jgrid.jqID(t.layer),{position:"relative"}):n.jgrid.createModal(e,s,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0]),(t.searchOnEnter||t.closeOnEscape)&&n("#"+n.jgrid.jqID(e.themodal)).keydown(function(i){var u=n(i.target);return t.searchOnEnter&&i.which===13&&!u.hasClass("add-group")&&!u.hasClass("add-rule")&&!u.hasClass("delete-group")&&!u.hasClass("delete-rule")&&(!u.hasClass("fm-button")||!u.is("[id$=_query]"))?(n("#"+r+"_search").click(),!1):t.closeOnEscape&&i.which===27?(n("#"+n.jgrid.jqID(e.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0}),k)n("#"+r+"_query").on("click",function(){return n(".queryresult",s).toggle(),!1});t.stringResult===undefined&&(t.stringResult=t.multipleSearch);n("#"+r+"_search").on("click",function(){var f={},h,s;if(o=n("#"+r),o.find(".input-elm:focus").change(),it&&t.multipleSearch?(i.p_savedFilter={},s=n.jgrid.filterRefactor({ruleGroup:n.extend(!0,{},o.jqFilter("filterData")),ssfield:rt,splitSelect:t.splitSelect,groupOpSelect:t.groupOpSelect}),i.p_savedFilter=n.extend(!0,{},o.jqFilter("filterData"))):s=o.jqFilter("filterData"),t.errorcheck&&(o[0].hideError(),t.showQuery||o.jqFilter("toSQLString"),o[0].p.error))return o[0].showError(),!1;if(t.stringResult){try{h=JSON.stringify(s)}catch(c){}typeof h=="string"&&(f[t.sFilter]=h,n.each([t.sField,t.sValue,t.sOper],function(){f[this]=""}))}else t.multipleSearch?(f[t.sFilter]=s,n.each([t.sField,t.sValue,t.sOper],function(){f[this]=""})):(f[t.sField]=s.rules[0].field,f[t.sValue]=s.rules[0].data,f[t.sOper]=s.rules[0].op,f[t.sFilter]="");return i.p.search=!0,n.extend(i.p.postData,f),u=n(i).triggerHandler("jqGridFilterSearch"),u===undefined&&(u=!0),u&&n.isFunction(t.onSearch)&&(u=t.onSearch.call(i,i.p.filters)),u!==!1&&n(i).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&n.jgrid.hideModal("#"+n.jgrid.jqID(e.themodal),{gb:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1});n("#"+r+"_reset").on("click",function(){var f={},o=n("#"+r);return i.p.search=!1,i.p.resetsearch=!0,t.multipleSearch===!1?f[t.sField]=f[t.sValue]=f[t.sOper]="":f[t.sFilter]="",o[0].resetFilter(),v&&n(".ui-template",s).val("default"),n.extend(i.p.postData,f),u=n(i).triggerHandler("jqGridFilterReset"),u===undefined&&(u=!0),u&&n.isFunction(t.onReset)&&(u=t.onReset.call(i)),u!==!1&&n(i).trigger("reloadGrid",[{page:1}]),t.closeAfterReset&&n.jgrid.hideModal("#"+n.jgrid.jqID(e.themodal),{gb:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1});d(n("#"+r));n(".fm-button:not(."+f.disabled+")",s).hover(function(){n(this).addClass(f.hover)},function(){n(this).removeClass(f.hover)})}}})},filterInput:function(t,i){return i=n.extend(!0,{defaultSearch:"cn",groupOp:"OR",searchAll:!1,beforeSearch:null,afterSearch:null},i||{}),this.each(function(){var r=this,s,e,u,o,h,f;r.grid&&(u='{"groupOp":"'+i.groupOp+'","rules":[',o=0,t+="",r.p.datatype==="local")&&(n.each(r.p.colModel,function(){s=this.index||this.name;e=this.searchoptions||{};h=i.defaultSearch?i.defaultSearch:e.sopt?e.sopt[0]:i.defaultSearch;this.search=this.search===!1?!1:!0;(this.search||i.searchAll)&&(o>0&&(u+=","),u+='{"field":"'+s+'",',u+='"op":"'+h+'",',u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',o++)}),u+="]}",n.extend(r.p.postData,{filters:u}),n.each(["searchField","searchString","searchOper"],function(n,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]}),f=n(r).triggerHandler("jqGridFilterInputBeforeSearch")==="stop"?!0:!1,!f&&n.isFunction(i.beforeSearch)&&(f=i.beforeSearch.call(r)),f||n(r).jqGrid("setGridParam",{search:!0}).trigger("reloadGrid",[{page:1}]),n(r).triggerHandler("jqGridFilterInputAfterSearch"),n.isFunction(i.afterSearch)&&i.afterSearch.call(r))})}});t={};n.jgrid.extend({editGridRow:function(i,r){var o=n.jgrid.getRegional(this[0],"edit"),e=this[0].p.styleUI,f=n.jgrid.styleUI[e].formedit,u=n.jgrid.styleUI[e].common;return r=n.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:u.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1},o,r||{}),t[n(this)[0].p.id]=r,this.each(function(){function gt(){var r={},i,u;n(y).find(".FormElement").each(function(){var u=n(".customelement",this),f,i,s;if(u.length)f=u[0],i=n(f).attr("name"),n.each(e.p.colModel,function(){if(this.name===i&&this.editoptions&&n.isFunction(this.editoptions.custom_value)){try{if(o[i]=this.editoptions.custom_value.call(e,n("#"+n.jgrid.jqID(i),y),"get"),o[i]===undefined)throw"e1";}catch(r){r==="e1"?n.jgrid.info_dialog(k.errcap,"function 'custom_value' "+t[n(this)[0]].p.msg.novalue,t[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI}):n.jgrid.info_dialog(k.errcap,r.message,t[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI})}return!0}});else{switch(n(this).get(0).type){case"checkbox":n(this).is(":checked")?o[this.name]=n(this).val():(s=n(this).attr("offval"),o[this.name]=s);break;case"select-one":o[this.name]=n(this).val();break;case"select-multiple":o[this.name]=n(this).val();o[this.name]=o[this.name]?o[this.name].join(","):"";break;case"password":case"text":case"textarea":case"button":o[this.name]=n(this).val();break;case"radio":if(r.hasOwnProperty(this.name))return!0;r[this.name]=n(this).attr("offval")===undefined?"off":n(this).attr("offval")}e.p.autoencode&&(o[this.name]=n.jgrid.htmlEncode(o[this.name]))}});for(i in r)r.hasOwnProperty(i)&&(u=n('input[name="'+i+'"]:checked',y).val(),o[i]=u!==undefined?u:r[i],e.p.autoencode&&(o[i]=n.jgrid.htmlEncode(o[i])));return!0}function ti(i,r,u,o){for(var c,b,a,p=0,h,g,l,nt=[],y=!1,it="",d,w,k=1;k<=o;k++)it+="<td class='CaptionTD'>&#160;<\/td><td class='DataTD'>&#160;<\/td>";return i!=="_empty"&&(y=n(r).jqGrid("getInd",i)),n(r.p.colModel).each(function(w){var ft,et;if(c=this.name,b=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,g=b?"style='display:none'":"",c!=="cb"&&c!=="subgrid"&&this.editable===!0&&c!=="rn"){if(y===!1)h="";else if(c===r.p.ExpandColumn&&r.p.treeGrid===!0)h=n("td[role='gridcell']:eq("+w+")",r.rows[y]).text();else{try{h=n.unformat.call(r,n("td[role='gridcell']:eq("+w+")",r.rows[y]),{rowId:i,colModel:this},w)}catch(st){h=this.edittype&&this.edittype==="textarea"?n("td[role='gridcell']:eq("+w+")",r.rows[y]).text():n("td[role='gridcell']:eq("+w+")",r.rows[y]).html()}h&&h!=="&nbsp;"&&h!=="&#160;"&&(h.length!==1||h.charCodeAt(0)!==160)||(h="")}var k=n.extend({},this.editoptions||{},{id:c,name:c,rowId:i,oper:"edit"}),rt=n.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),ut=parseInt(rt.rowpos,10)||p+1,ot=parseInt((parseInt(rt.colpos,10)||1)*2,10);i==="_empty"&&k.defaultValue&&(h=n.isFunction(k.defaultValue)?k.defaultValue.call(e):k.defaultValue);this.edittype||(this.edittype="text");e.p.autoencode&&(h=n.jgrid.htmlDecode(h));l=n.jgrid.createEl.call(e,this.edittype,k,h,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));this.edittype==="select"&&(h=n(l).val(),n(l).get(0).type==="select-multiple"&&h&&(h=h.join(",")));this.edittype==="checkbox"&&(h=n(l).is(":checked")?n(l).val():n(l).attr("offval"));n(l).addClass("FormElement");n.inArray(this.edittype,["text","textarea","password","select"])>-1&&n(l).addClass(f.inputClass);d=!0;tt?(ft=n(v).find("#"+c),ft.length?ft.replaceWith(l):d=!1):(a=n(u).find("tr[rowpos="+ut+"]"),rt.rowabove&&(et=n("<tr><td class='contentinfo' colspan='"+o*2+"'>"+rt.rowcontent+"<\/td><\/tr>"),n(u).append(et),et[0].rp=ut),a.length===0&&(a=n("<tr "+g+" rowpos='"+ut+"'><\/tr>").addClass("FormData").attr("id","tr_"+c),n(a).append(it),n(u).append(a),a[0].rp=ut),n("td:eq("+(ot-2)+")",a[0]).html("<label for='"+c+"'>"+(rt.label===undefined?r.p.colNames[w]:rt.label)+"<\/label>"),n("td:eq("+(ot-1)+")",a[0]).append(rt.elmprefix).append(l).append(rt.elmsuffix));(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&d&&(e.p.savedData[c]=h);this.edittype==="custom"&&n.isFunction(k.custom_value)&&k.custom_value.call(e,n("#"+c,s),"set",h);n.jgrid.bindEv.call(e,l,k);nt[p]=w;p++}}),p>0&&(tt?(w="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/>",n(v).append(w)):(w=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(o*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/><\/td><\/tr>"),w[0].rp=p+999,n(u).append(w)),(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(e.p.savedData[r.p.id+"_id"]=i)),nt}function at(i,r,u){var o,p=0,f,s,l,c,a,h,v;if((t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(e.p.savedData={},e.p.savedData[r.p.id+"_id"]=i),h=r.p.colModel,i==="_empty"){n(h).each(function(){o=this.name;l=n.extend({},this.editoptions||{});s=n("#"+n.jgrid.jqID(o),u);s&&s.length&&s[0]!==null&&(c="",this.edittype==="custom"&&n.isFunction(l.custom_value)?l.custom_value.call(e,n("#"+o,u),"set",c):l.defaultValue?(c=n.isFunction(l.defaultValue)?l.defaultValue.call(e):l.defaultValue,s[0].type==="checkbox"?(a=c.toLowerCase(),a.search(/(false|f|0|no|n|off|undefined)/i)<0&&a!==""?(s[0].checked=!0,s[0].defaultChecked=!0,s[0].value=c):(s[0].checked=!1,s[0].defaultChecked=!1)):s.val(c)):s[0].type==="checkbox"?(s[0].checked=!1,s[0].defaultChecked=!1,c=n(s).attr("offval")):s[0].type&&s[0].type.substr(0,6)==="select"?s[0].selectedIndex=0:s.val(c),(t[e.p.id].checkOnSubmit===!0||t[e.p.id].checkOnUpdate)&&(e.p.savedData[o]=c))});n("#id_g",u).val(i);return}(v=n(r).jqGrid("getInd",i,!0),v)&&(n('td[role="gridcell"]',v).each(function(s){var c,l;if(o=h[s].name,o!=="cb"&&o!=="subgrid"&&o!=="rn"&&h[s].editable===!0){if(o===r.p.ExpandColumn&&r.p.treeGrid===!0)f=n(this).text();else try{f=n.unformat.call(r,n(this),{rowId:i,colModel:h[s]},s)}catch(v){f=h[s].edittype==="textarea"?n(this).text():n(this).html()}e.p.autoencode&&(f=n.jgrid.htmlDecode(f));(t[e.p.id].checkOnSubmit===!0||t[e.p.id].checkOnUpdate)&&(e.p.savedData[o]=f);o=n.jgrid.jqID(o);switch(h[s].edittype){case"password":case"text":case"button":case"image":case"textarea":(f==="&nbsp;"||f==="&#160;"||f.length===1&&f.charCodeAt(0)===160)&&(f="");n("#"+o,u).val(f);break;case"select":c=f.split(",");c=n.map(c,function(t){return n.trim(t)});n("#"+o+" option",u).each(function(){this.selected=h[s].editoptions.multiple||n.trim(f)!==n.trim(n(this).text())&&c[0]!==n.trim(n(this).text())&&c[0]!==n.trim(n(this).val())?h[s].editoptions.multiple?n.inArray(n.trim(n(this).text()),c)>-1||n.inArray(n.trim(n(this).val()),c)>-1?!0:!1:!1:!0});(t[e.p.id].checkOnSubmit===!0||t[e.p.id].checkOnUpdate)&&(f=n("#"+o,u).val(),h[s].editoptions.multiple&&(f=f.join(",")),e.p.savedData[o]=f);break;case"checkbox":f=String(f);h[s].editoptions&&h[s].editoptions.value?(l=h[s].editoptions.value.split(":"),l[0]===f?n("#"+o,u)[e.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):n("#"+o,u)[e.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})):(f=f.toLowerCase(),f.search(/(false|f|0|no|n|off|undefined)/i)<0&&f!==""?(n("#"+o,u)[e.p.useProp?"prop":"attr"]("checked",!0),n("#"+o,u)[e.p.useProp?"prop":"attr"]("defaultChecked",!0)):(n("#"+o,u)[e.p.useProp?"prop":"attr"]("checked",!1),n("#"+o,u)[e.p.useProp?"prop":"attr"]("defaultChecked",!1)));(t[e.p.id].checkOnSubmit===!0||t[e.p.id].checkOnUpdate)&&(f=n("#"+o,u).is(":checked")?n("#"+o,u).val():n("#"+o,u).attr("offval"),e.p.savedData[o]=f);break;case"custom":try{if(h[s].editoptions&&n.isFunction(h[s].editoptions.custom_value))h[s].editoptions.custom_value.call(e,n("#"+o,u),"set",f);else throw"e1";}catch(a){a==="e1"?n.jgrid.info_dialog(k.errcap,"function 'custom_value' "+t[n(this)[0]].p.msg.nodefined,n.rp_ge[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI}):n.jgrid.info_dialog(k.errcap,a.message,n.rp_ge[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI})}}p++}}),p>0&&(n("#id_g",y).val(i),(t[e.p.id].checkOnSubmit===!0||t[e.p.id].checkOnUpdate)&&(e.p.savedData[r.p.id+"_id"]=i)))}function ii(){n.each(e.p.colModel,function(n,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&o.hasOwnProperty(t.name)&&o[t.name]===""&&(o[t.name]="null")})}function it(){var d,i=[!0,"",""],g={},l=e.p.prmNames,f,w,nt,it,tt,rt,p=n(e).triggerHandler("jqGridAddEditBeforeCheckValues",[o,n(s),c]),ft,ut,v,b;p&&typeof p=="object"&&(o=p);n.isFunction(t[e.p.id].beforeCheckValues)&&(p=t[e.p.id].beforeCheckValues.call(e,o,n(s),c),p&&typeof p=="object"&&(o=p));for(nt in o)if(o.hasOwnProperty(nt)&&(i=n.jgrid.checkValues.call(e,o[nt],nt),i[0]===!1))break;if(ii(),i[0]&&(g=n(e).triggerHandler("jqGridAddEditClickSubmit",[t[e.p.id],o,c]),g===undefined&&n.isFunction(t[e.p.id].onclickSubmit)&&(g=t[e.p.id].onclickSubmit.call(e,t[e.p.id],o,c)||{}),i=n(e).triggerHandler("jqGridAddEditBeforeSubmit",[o,n(s),c]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[e.p.id].beforeSubmit)&&(i=t[e.p.id].beforeSubmit.call(e,o,n(s),c))),i[0]&&!t[e.p.id].processing){if(t[e.p.id].processing=!0,n("#sData",y+"_2").addClass(u.active),rt=t[e.p.id].url||n(e).jqGrid("getGridParam","editurl"),w=l.oper,f=rt==="clientArray"?e.p.keyName:l.id,o[w]=n.trim(o[e.p.id+"_id"])==="_empty"?l.addoper:l.editoper,o[w]!==l.addoper?o[f]=o[e.p.id+"_id"]:o[f]===undefined&&(o[f]=o[e.p.id+"_id"]),delete o[e.p.id+"_id"],o=n.extend(o,t[e.p.id].editData,g),e.p.treeGrid===!0){o[w]===l.addoper&&(it=n(e).jqGrid("getGridParam","selrow"),ft=e.p.treeGridModel==="adjacency"?e.p.treeReader.parent_id_field:"parent_id",o[ft]=it);for(tt in e.p.treeReader)if(e.p.treeReader.hasOwnProperty(tt)&&(ut=e.p.treeReader[tt],o.hasOwnProperty(ut))){if(o[w]===l.addoper&&tt==="parent_id_field")continue;delete o[ut]}}o[f]=n.jgrid.stripPref(e.p.idPrefix,o[f]);v=n.extend({url:rt,type:t[e.p.id].mtype,data:n.isFunction(t[e.p.id].serializeEditData)?t[e.p.id].serializeEditData.call(e,o):o,complete:function(v,p){var b;if(n("#sData",y+"_2").removeClass(u.active),o[f]=e.p.idPrefix+o[f],v.status>=300&&v.status!==304?(i[0]=!1,i[1]=n(e).triggerHandler("jqGridAddEditErrorTextFormat",[v,c]),i[1]=n.isFunction(t[e.p.id].errorTextFormat)?t[e.p.id].errorTextFormat.call(e,v,c):p+" Status: '"+v.statusText+"'. Error code: "+v.status):(i=n(e).triggerHandler("jqGridAddEditAfterSubmit",[v,o,c]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[e.p.id].afterSubmit)&&(i=t[e.p.id].afterSubmit.call(e,v,o,c))),i[0]===!1)n(".FormError",s).html(i[1]),n(".FormError",s).show();else if(e.p.autoencode&&n.each(o,function(t,i){o[t]=n.jgrid.htmlDecode(i)}),o[w]===l.addoper?(i[2]||(i[2]=n.jgrid.randId()),o[f]==null||o[f]==="_empty"||o[f]===""?o[f]=i[2]:i[2]=o[f],t[e.p.id].reloadAfterSubmit?n(e).trigger("reloadGrid"):e.p.treeGrid===!0?n(e).jqGrid("addChildNode",i[2],it,o):n(e).jqGrid("addRowData",i[2],o,r.addedrow),t[e.p.id].closeAfterAdd?(e.p.treeGrid!==!0&&n(e).jqGrid("setSelection",i[2]),n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form})):t[e.p.id].clearAfterAdd&&at("_empty",e,s)):(t[e.p.id].reloadAfterSubmit?(n(e).trigger("reloadGrid"),t[e.p.id].closeAfterEdit||setTimeout(function(){n(e).jqGrid("setSelection",o[f])},1e3)):e.p.treeGrid===!0?n(e).jqGrid("setTreeRow",o[f],o):n(e).jqGrid("setRowData",o[f],o),t[e.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form})),(n.isFunction(t[e.p.id].afterComplete)||n._data(n(e)[0],"events").hasOwnProperty("jqGridAddEditAfterComplete"))&&(d=v,setTimeout(function(){n(e).triggerHandler("jqGridAddEditAfterComplete",[d,o,n(s),c]);try{t[e.p.id].afterComplete.call(e,d,o,n(s),c)}catch(i){}d=null},500)),(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(n(s).data("disabled",!1),e.p.savedData[e.p.id+"_id"]!=="_empty"))for(b in e.p.savedData)e.p.savedData.hasOwnProperty(b)&&o[b]&&(e.p.savedData[b]=o[b]);t[e.p.id].processing=!1;try{n(":input:visible",s)[0].focus()}catch(k){}}},n.jgrid.ajaxOptions,t[e.p.id].ajaxEditOptions);v.url||t[e.p.id].useDataProxy||(n.isFunction(e.p.dataProxy)?t[e.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+k.nourl));i[0]&&(t[e.p.id].useDataProxy?(b=e.p.dataProxy.call(e,v,"set_"+e.p.id),b===undefined&&(b=[!0,""]),b[0]===!1?(i[0]=!1,i[1]=b[1]||"Error deleting the selected row!"):(v.data.oper===l.addoper&&t[e.p.id].closeAfterAdd&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),v.data.oper===l.editoper&&t[e.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}))):v.url==="clientArray"?(t[e.p.id].reloadAfterSubmit=!1,o=v.data,v.complete({status:200,statusText:""},"")):n.ajax(v))}i[0]===!1&&(n(".FormError",s).html(i[1]),n(".FormError",s).show())}function ni(t,i){var r=!1,u;if(r=!(n.isPlainObject(t)&&n.isPlainObject(i)&&Object.getOwnPropertyNames(t).length===Object.getOwnPropertyNames(i).length),!r)for(u in i)if(i.hasOwnProperty(u))if(t.hasOwnProperty(u)){if(t[u]!==i[u]){r=!0;break}}else{r=!0;break}return r}function w(){var i=!0;return n(".FormError",s).hide(),t[e.p.id].checkOnUpdate&&(o={},gt(),nt=ni(o,e.p.savedData),nt&&(n(s).data("disabled",!0),n(".confirm","#"+h.themodal).show(),i=!1)),i}function ri(){var t;if(i!=="_empty"&&e.p.savedRow!==undefined&&e.p.savedRow.length>0&&n.isFunction(n.fn.jqGrid.restoreRow))for(t=0;t<e.p.savedRow.length;t++)if(e.p.savedRow[t].id===i){n(e).jqGrid("restoreRow",i);break}}function vt(t,i){var r=i[1].length-1;t===0?n("#pData",l).addClass(u.disabled):i[1][t-1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t-1])).hasClass(u.disabled)?n("#pData",l).addClass(u.disabled):n("#pData",l).removeClass(u.disabled);t===r?n("#nData",l).addClass(u.disabled):i[1][t+1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t+1])).hasClass(u.disabled)?n("#nData",l).addClass(u.disabled):n("#nData",l).removeClass(u.disabled)}function yt(){var i=n(e).jqGrid("getDataIDs"),o=n("#id_g",y).val(),u,f,r,s;if(e.p.multiselect&&t[e.p.id].editselected){for(f=[],r=0,s=i.length;r<s;r++)n.inArray(i[r],e.p.selarrrow)!==-1&&f.push(i[r]);return u=n.inArray(o,f),[u,f]}return u=n.inArray(o,i),[u,i]}function ui(n){var t="";return typeof n=="string"&&(t=n.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(n,t){return'<span id="'+t+'" ><\/span>'})),t}function pt(){var u,i,r,f;if(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate){u=[];i={};u=n.map(e.p.savedData,function(n,t){return t});n(".FormElement",v).each(function(){if(u.indexOf(this.name)===-1){var t=n(this).val(),r=n(this).get(0).type;if(r==="checkbox")n(this).is(":checked")||(t=n(this).attr("offval"));else if(r==="select-multiple")t=t.join(",");else if(r==="radio"){if(i.hasOwnProperty(this.name))return!0;i[this.name]=n(this).attr("offval")===undefined?"off":n(this).attr("offval")}e.p.savedData[this.name]=t}});for(r in i)i.hasOwnProperty(r)&&(f=n('input[name="'+r+'"]:checked',v).val(),e.p.savedData[r]=f!==undefined?f:i[r])}}var e=this,lt,et,kt,ot,st,dt;if(e.grid&&i){e.p.savedData={};var a=e.p.id,s="FrmGrid_"+a,g="TblGrid_"+a,y="#"+n.jgrid.jqID(g),l,h={themodal:"editmod"+a,modalhead:"edithd"+a,modalcontent:"editcnt"+a,scrollelm:s},p=!0,ht=1,ct=0,o,nt,c,tt=typeof t[e.p.id].template=="string"&&t[e.p.id].template.length>0,k=n.jgrid.getRegional(this,"errors");t[e.p.id].styleUI=e.p.styleUI||"jQueryUI";n.jgrid.isMobile()&&(t[e.p.id].resize=!1);i==="new"?(i="_empty",c="add",r.caption=t[e.p.id].addCaption):(r.caption=t[e.p.id].editCaption,c="edit");r.recreateForm||n(e).data("formProp")&&n.extend(t[n(this)[0].p.id],n(e).data("formProp"));lt=!0;r.checkOnUpdate&&r.jqModal&&!r.modal&&(lt=!1);var fi=isNaN(t[n(this)[0].p.id].dataheight)?t[n(this)[0].p.id].dataheight:t[n(this)[0].p.id].dataheight+"px",ei=isNaN(t[n(this)[0].p.id].datawidth)?t[n(this)[0].p.id].datawidth:t[n(this)[0].p.id].datawidth+"px",v=n("<form name='FormPost' id='"+s+"' class='FormGrid' onSubmit='return false;' style='width:"+ei+";height:"+fi+";'><\/form>").data("disabled",!1),b;if(tt?(b=ui(t[n(this)[0].p.id].template),l=y):(b=n("<table id='"+g+"' class='EditTable ui-common-table'><tbody><\/tbody><\/table>"),l=y+"_2"),s="#"+n.jgrid.jqID(s),n(v).append("<div class='FormError "+u.error+"' style='display:none;'><\/div>"),n(v).append("<div class='tinfo topinfo'>"+t[e.p.id].topinfo+"<\/div>"),n(e.p.colModel).each(function(){var n=this.formoptions;ht=Math.max(ht,n?n.colpos||0:0);ct=Math.max(ct,n?n.rowpos||0:0)}),n(v).append(b),p=n(e).triggerHandler("jqGridAddEditBeforeInitData",[v,c]),p===undefined&&(p=!0),p&&n.isFunction(t[e.p.id].beforeInitData)&&(p=t[e.p.id].beforeInitData.call(e,v,c)),p!==!1){ri();ti(i,e,b,ht);var rt=e.p.direction==="rtl"?!0:!1,oi=rt?"nData":"pData",si=rt?"pData":"nData",wt="<a id='"+oi+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_prev+"'><\/span><\/a>",d="<a id='"+si+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_next+"'><\/span><\/a>",ut="<a id='sData' class='fm-button "+u.button+"'>"+r.bSubmit+"<\/a>",ft="<a id='cData' class='fm-button "+u.button+"'>"+r.bCancel+"<\/a>",bt="<table style='height:auto' class='EditTable ui-common-table' id='"+g+"_2'><tbody><tr><td colspan='2'><hr class='"+u.content+"' style='margin:1px'/><\/td><\/tr><tr id='Act_Buttons'><td class='navButton'>"+(rt?d+wt:wt+d)+"<\/td><td class='EditButton'>"+ut+ft+"<\/td><\/tr>";bt+="<\/tbody><\/table>";ct>0&&(et=[],n.each(n(b)[0].rows,function(n,t){et[n]=t}),et.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(et,function(t,i){n("tbody",b).append(i)}));r.gbox="#gbox_"+n.jgrid.jqID(a);kt=!1;r.closeOnEscape===!0&&(r.closeOnEscape=!1,kt=!0);tt?(n(v).find("#pData").replaceWith(wt),n(v).find("#nData").replaceWith(d),n(v).find("#sData").replaceWith(ut),n(v).find("#cData").replaceWith(ft),ot=n("<div id="+g+"><\/div>").append(v)):ot=n("<div><\/div>").append(v).append(bt);n(v).append("<div class='binfo topinfo bottominfo'>"+t[e.p.id].bottominfo+"<\/div>");n.jgrid.createModal(h,ot,t[n(this)[0].p.id],"#gview_"+n.jgrid.jqID(e.p.id),n("#gbox_"+n.jgrid.jqID(e.p.id))[0]);rt&&(n("#pData, #nData",y+"_2").css("float","right"),n(".EditButton",y+"_2").css("text-align","left"));t[e.p.id].topinfo&&n(".tinfo",s).show();t[e.p.id].bottominfo&&n(".binfo",s).show();ot=null;bt=null;n("#"+n.jgrid.jqID(h.themodal)).keydown(function(i){var u=i.target;if(n(s).data("disabled")===!0)return!1;if(t[e.p.id].savekey[0]===!0&&i.which===t[e.p.id].savekey[1]&&u.tagName!=="TEXTAREA")return n("#sData",y+"_2").trigger("click"),!1;if(i.which===27)return w()?(kt&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1):!1;if(t[e.p.id].navkeys[0]===!0){if(n("#id_g",y).val()==="_empty")return!0;if(i.which===t[e.p.id].navkeys[1])return n("#pData",l).trigger("click"),!1;if(i.which===t[e.p.id].navkeys[2])return n("#nData",l).trigger("click"),!1}});r.checkOnUpdate&&(n("a.ui-jqdialog-titlebar-close span","#"+n.jgrid.jqID(h.themodal)).removeClass("jqmClose"),n("a.ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(h.themodal)).off("click").click(function(){return w()?(n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1):!1}));r.saveicon=n.extend([!0,"left",f.icon_save],r.saveicon);r.closeicon=n.extend([!0,"left",f.icon_close],r.closeicon);r.saveicon[0]===!0&&n("#sData",l).addClass(r.saveicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.saveicon[2]+"'><\/span>");r.closeicon[0]===!0&&n("#cData",l).addClass(r.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.closeicon[2]+"'><\/span>");(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(ut="<a id='sNew' class='fm-button "+u.button+"' style='z-index:1002'>"+r.bYes+"<\/a>",d="<a id='nNew' class='fm-button "+u.button+"' style='z-index:1002;margin-left:5px'>"+r.bNo+"<\/a>",ft="<a id='cNew' class='fm-button "+u.button+"' style='z-index:1002;margin-left:5px;'>"+r.bExit+"<\/a>",st=r.zIndex||999,st++,n("<div class='"+r.overlayClass+" jqgrid-overlay confirm' style='z-index:"+st+";display:none;'>&#160;<\/div><div class='confirm ui-jqconfirm "+u.content+"' style='z-index:"+(st+1)+"'>"+r.saveData+"<br/><br/>"+ut+d+ft+"<\/div>").insertAfter(s),n("#sNew","#"+n.jgrid.jqID(h.themodal)).click(function(){return it(),n(s).data("disabled",!1),n(".confirm","#"+n.jgrid.jqID(h.themodal)).hide(),!1}),n("#nNew","#"+n.jgrid.jqID(h.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(h.themodal)).hide(),n(s).data("disabled",!1),setTimeout(function(){n(":input:visible",s)[0].focus()},0),!1}),n("#cNew","#"+n.jgrid.jqID(h.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(h.themodal)).hide(),n(s).data("disabled",!1),n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1}));n(e).triggerHandler("jqGridAddEditInitializeForm",[n(s),c]);n.isFunction(t[e.p.id].onInitializeForm)&&t[e.p.id].onInitializeForm.call(e,n(s),c);i!=="_empty"&&t[e.p.id].viewPagerButtons?n("#pData,#nData",l).show():n("#pData,#nData",l).hide();n(e).triggerHandler("jqGridAddEditBeforeShowForm",[n(s),c]);n.isFunction(t[e.p.id].beforeShowForm)&&t[e.p.id].beforeShowForm.call(e,n(s),c);pt();n("#"+n.jgrid.jqID(h.themodal)).data("onClose",t[e.p.id].onClose);n.jgrid.viewModal("#"+n.jgrid.jqID(h.themodal),{gbox:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,overlayClass:r.overlayClass,focusField:r.focusField,onHide:function(t){var i=n("#editmod"+a)[0].style.height,r=n("#editmod"+a)[0].style.width;i.indexOf("px")>-1&&(i=parseFloat(i));r.indexOf("px")>-1&&(r=parseFloat(r));n(e).data("formProp",{top:parseFloat(n(t.w).css("top")),left:parseFloat(n(t.w).css("left")),width:r,height:i,dataheight:n(s).height(),datawidth:n(s).width()});t.w.remove();t.o&&t.o.remove()}});lt||n("."+n.jgrid.jqID(r.overlayClass)).click(function(){return w()?(n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1):!1});n(".fm-button","#"+n.jgrid.jqID(h.themodal)).hover(function(){n(this).addClass(u.hover)},function(){n(this).removeClass(u.hover)});n("#sData",l).click(function(){return o={},n(".FormError",s).hide(),gt(),o[e.p.id+"_id"]==="_empty"?it():r.checkOnSubmit===!0?(nt=ni(o,e.p.savedData),nt?(n(s).data("disabled",!0),n(".confirm","#"+n.jgrid.jqID(h.themodal)).show()):it()):it(),!1});n("#cData",l).click(function(){return w()?(n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1):!1});n("#nData",l).click(function(){var i,f;if(!w())return!1;if(n(".FormError",s).hide(),i=yt(),i[0]=parseInt(i[0],10),i[0]!==-1&&i[1][i[0]+1]){if((n(e).triggerHandler("jqGridAddEditClickPgButtons",["next",n(s),i[1][i[0]]]),n.isFunction(r.onclickPgButtons)&&(f=r.onclickPgButtons.call(e,"next",n(s),i[1][i[0]]),f!==undefined&&f===!1))||n("#"+n.jgrid.jqID(i[1][i[0]+1])).hasClass(u.disabled))return!1;at(i[1][i[0]+1],e,s);e.p.multiselect&&t[e.p.id].editselected||n(e).jqGrid("setSelection",i[1][i[0]+1]);n(e).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",n(s),i[1][i[0]]]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"next",n(s),i[1][i[0]+1]);pt();vt(i[0]+1,i)}return!1});n("#pData",l).click(function(){var i,f;if(!w())return!1;if(n(".FormError",s).hide(),i=yt(),i[0]!==-1&&i[1][i[0]-1]){if((n(e).triggerHandler("jqGridAddEditClickPgButtons",["prev",n(s),i[1][i[0]]]),n.isFunction(r.onclickPgButtons)&&(f=r.onclickPgButtons.call(e,"prev",n(s),i[1][i[0]]),f!==undefined&&f===!1))||n("#"+n.jgrid.jqID(i[1][i[0]-1])).hasClass(u.disabled))return!1;at(i[1][i[0]-1],e,s);e.p.multiselect&&t[e.p.id].editselected||n(e).jqGrid("setSelection",i[1][i[0]-1]);n(e).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",n(s),i[1][i[0]]]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"prev",n(s),i[1][i[0]-1]);pt();vt(i[0]-1,i)}return!1});n(e).triggerHandler("jqGridAddEditAfterShowForm",[n(s),c]);n.isFunction(t[e.p.id].afterShowForm)&&t[e.p.id].afterShowForm.call(e,n(s),c);dt=yt();vt(dt[0],dt)}}})},viewGridRow:function(i,r){var o=n.jgrid.getRegional(this[0],"view"),e=this[0].p.styleUI,f=n.jgrid.styleUI[e].formedit,u=n.jgrid.styleUI[e].common;return r=n.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},o,r||{}),t[n(this)[0].p.id]=r,this.each(function(){function k(){(t[e.p.id].closeOnEscape===!0||t[e.p.id].navkeys[0]===!0)&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(c.modalhead)).attr("tabindex","-1").focus()},0)}function ot(t,i,f,e){for(var s,h,o,c=0,l,d,g=[],a=!1,it="<td class='CaptionTD form-view-label "+u.content+"' width='"+r.labelswidth+"'>&#160;<\/td><td class='DataTD form-view-data ui-helper-reset "+u.content+"'>&#160;<\/td>",nt="",rt="<td class='CaptionTD form-view-label "+u.content+"'>&#160;<\/td><td class='DataTD form-view-data "+u.content+"'>&#160;<\/td>",ut=["integer","number","currency"],y=0,p=0,w,b,tt,k,v=1;v<=e;v++)nt+=v===1?it:rt;return n(i.p.colModel).each(function(){h=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1;h||this.align!=="right"||(this.formatter&&n.inArray(this.formatter,ut)!==-1?y=Math.max(y,parseInt(this.width,10)):p=Math.max(p,parseInt(this.width,10)))}),w=y!==0?y:p!==0?p:0,a=n(i).jqGrid("getInd",t),n(i.p.colModel).each(function(t){var y;if(s=this.name,b=!1,h=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,d=h?"style='display:none'":"",tt=typeof this.viewable!="boolean"?!0:this.viewable,s!=="cb"&&s!=="subgrid"&&s!=="rn"&&tt){l=a===!1?"":s===i.p.ExpandColumn&&i.p.treeGrid===!0?n("td:eq("+t+")",i.rows[a]).text():n("td:eq("+t+")",i.rows[a]).html();b=this.align==="right"&&w!==0?!0:!1;var r=n.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),u=parseInt(r.rowpos,10)||c+1,v=parseInt((parseInt(r.colpos,10)||1)*2,10);r.rowabove&&(y=n("<tr><td class='contentinfo' colspan='"+e*2+"'>"+r.rowcontent+"<\/td><\/tr>"),n(f).append(y),y[0].rp=u);o=n(f).find("tr[rowpos="+u+"]");o.length===0&&(o=n("<tr "+d+" rowpos='"+u+"'><\/tr>").addClass("FormData").attr("id","trv_"+s),n(o).append(nt),n(f).append(o),o[0].rp=u);n("td:eq("+(v-2)+")",o[0]).html("<b>"+(r.label===undefined?i.p.colNames[t]:r.label)+"<\/b>");n("td:eq("+(v-1)+")",o[0]).append("<span>"+l+"<\/span>").attr("id","v_"+s);b&&n("td:eq("+(v-1)+") span",o[0]).css({"text-align":"right",width:w+"px"});g[c]=t;c++}}),c>0&&(k=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(e*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/><\/td><\/tr>"),k[0].rp=c+99,n(f).append(k)),g}function it(t,i){var r,u,s=0,f,e;(e=n(i).jqGrid("getInd",t,!0),e)&&(n("td",e).each(function(t){r=i.p.colModel[t].name;u=i.p.colModel[t].editrules&&i.p.colModel[t].editrules.edithidden===!0?!1:i.p.colModel[t].hidden===!0?!0:!1;r!=="cb"&&r!=="subgrid"&&r!=="rn"&&(f=r===i.p.ExpandColumn&&i.p.treeGrid===!0?n(this).text():n(this).html(),r=n.jgrid.jqID("v_"+r),n("#"+r+" span","#"+o).html(f),u&&n("#"+r,"#"+o).parents("tr:first").hide(),s++)}),s>0&&n("#id_g","#"+o).val(t))}function d(t,i){var r=i[1].length-1;t===0?n("#pData","#"+o+"_2").addClass(u.disabled):i[1][t-1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t-1])).hasClass(u.disabled)?n("#pData",o+"_2").addClass(u.disabled):n("#pData","#"+o+"_2").removeClass(u.disabled);t===r?n("#nData","#"+o+"_2").addClass(u.disabled):i[1][t+1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t+1])).hasClass(u.disabled)?n("#nData",o+"_2").addClass(u.disabled):n("#nData","#"+o+"_2").removeClass(u.disabled)}function g(){var t=n(e).jqGrid("getDataIDs"),i=n("#id_g","#"+o).val(),r=n.inArray(i,t);return[r,t]}var e=this,p,nt,tt;if(e.grid&&i){var h=e.p.id,s="ViewGrid_"+n.jgrid.jqID(h),o="ViewTbl_"+n.jgrid.jqID(h),ft="ViewGrid_"+h,et="ViewTbl_"+h,c={themodal:"viewmod"+h,modalhead:"viewhd"+h,modalcontent:"viewcnt"+h,scrollelm:s},l=!0,w=1,b=0;t[e.p.id].styleUI=e.p.styleUI||"jQueryUI";r.recreateForm||n(e).data("viewProp")&&n.extend(t[n(this)[0].p.id],n(e).data("viewProp"));var st=isNaN(t[n(this)[0].p.id].dataheight)?t[n(this)[0].p.id].dataheight:t[n(this)[0].p.id].dataheight+"px",ht=isNaN(t[n(this)[0].p.id].datawidth)?t[n(this)[0].p.id].datawidth:t[n(this)[0].p.id].datawidth+"px",a=n("<form name='FormPost' id='"+ft+"' class='FormGrid' style='width:"+ht+";height:"+st+";'><\/form>"),v=n("<table id='"+et+"' class='EditTable ViewTable'><tbody><\/tbody><\/table>");if(n(e.p.colModel).each(function(){var n=this.formoptions;w=Math.max(w,n?n.colpos||0:0);b=Math.max(b,n?n.rowpos||0:0)}),n(a).append(v),l=n(e).triggerHandler("jqGridViewRowBeforeInitData",[a]),l===undefined&&(l=!0),l&&n.isFunction(t[e.p.id].beforeInitData)&&(l=t[e.p.id].beforeInitData.call(e,a)),l!==!1){ot(i,e,v,w);var y=e.p.direction==="rtl"?!0:!1,ct=y?"nData":"pData",lt=y?"pData":"nData",rt="<a id='"+ct+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_prev+"'><\/span><\/a>",ut="<a id='"+lt+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_next+"'><\/span><\/a>",at="<a id='cData' class='fm-button "+u.button+"'>"+r.bClose+"<\/a>";b>0&&(p=[],n.each(n(v)[0].rows,function(n,t){p[n]=t}),p.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(p,function(t,i){n("tbody",v).append(i)}));r.gbox="#gbox_"+n.jgrid.jqID(h);nt=n("<div><\/div>").append(a).append("<table border='0' class='EditTable' id='"+o+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+r.labelswidth+"'>"+(y?ut+rt:rt+ut)+"<\/td><td class='EditButton'>"+at+"<\/td><\/tr><\/tbody><\/table>");n.jgrid.createModal(c,nt,t[n(this)[0].p.id],"#gview_"+n.jgrid.jqID(e.p.id),n("#gview_"+n.jgrid.jqID(e.p.id))[0]);y&&(n("#pData, #nData","#"+o+"_2").css("float","right"),n(".EditButton","#"+o+"_2").css("text-align","left"));r.viewPagerButtons||n("#pData, #nData","#"+o+"_2").hide();nt=null;n("#"+c.themodal).keydown(function(i){if(i.which===27)return t[e.p.id].closeOnEscape&&n.jgrid.hideModal("#"+n.jgrid.jqID(c.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:r.onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1;if(r.navkeys[0]===!0){if(i.which===r.navkeys[1])return n("#pData","#"+o+"_2").trigger("click"),!1;if(i.which===r.navkeys[2])return n("#nData","#"+o+"_2").trigger("click"),!1}});r.closeicon=n.extend([!0,"left",f.icon_close],r.closeicon);r.closeicon[0]===!0&&n("#cData","#"+o+"_2").addClass(r.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.closeicon[2]+"'><\/span>");n(e).triggerHandler("jqGridViewRowBeforeShowForm",[n("#"+s)]);n.isFunction(r.beforeShowForm)&&r.beforeShowForm.call(e,n("#"+s));n.jgrid.viewModal("#"+n.jgrid.jqID(c.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,onHide:function(t){n(e).data("viewProp",{top:parseFloat(n(t.w).css("top")),left:parseFloat(n(t.w).css("left")),width:n(t.w).width(),height:n(t.w).height(),dataheight:n("#"+s).height(),datawidth:n("#"+s).width()});t.w.remove();t.o&&t.o.remove()}});n(".fm-button:not(."+u.disabled+")","#"+o+"_2").hover(function(){n(this).addClass(u.hover)},function(){n(this).removeClass(u.hover)});k();n("#cData","#"+o+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(c.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:r.onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1});n("#nData","#"+o+"_2").click(function(){n("#FormError","#"+o).hide();var t=g();return t[0]=parseInt(t[0],10),t[0]!==-1&&t[1][t[0]+1]&&(n(e).triggerHandler("jqGridViewRowClickPgButtons",["next",n("#"+s),t[1][t[0]]]),n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(e,"next",n("#"+s),t[1][t[0]]),it(t[1][t[0]+1],e),n(e).jqGrid("setSelection",t[1][t[0]+1]),n(e).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",n("#"+s),t[1][t[0]+1]]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"next",n("#"+s),t[1][t[0]+1]),d(t[0]+1,t)),k(),!1});n("#pData","#"+o+"_2").click(function(){n("#FormError","#"+o).hide();var t=g();return t[0]!==-1&&t[1][t[0]-1]&&(n(e).triggerHandler("jqGridViewRowClickPgButtons",["prev",n("#"+s),npos[1][npos[0]]]),n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(e,"prev",n("#"+s),t[1][t[0]]),it(t[1][t[0]-1],e),n(e).jqGrid("setSelection",t[1][t[0]-1]),n(e).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",n("#"+s),npos[1][npos[0]-1]]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"prev",n("#"+s),t[1][t[0]-1]),d(t[0]-1,t)),k(),!1});tt=g();d(tt[0],tt)}}})},delGridRow:function(i,r){var o=n.jgrid.getRegional(this[0],"del"),f=this[0].p.styleUI,e=n.jgrid.styleUI[f].formedit,u=n.jgrid.styleUI[f].common;return r=n.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},o,r||{}),t[n(this)[0].p.id]=r,this.each(function(){var f=this,b,k;if(f.grid&&i){var h=f.p.id,v={},s=!0,o="DelTbl_"+n.jgrid.jqID(h),c,p,y,w,d="DelTbl_"+h,l={themodal:"delmod"+h,modalhead:"delhd"+h,modalcontent:"delcnt"+h,scrollelm:o};if(t[f.p.id].styleUI=f.p.styleUI||"jQueryUI",n.isArray(i)&&(i=i.join()),n("#"+n.jgrid.jqID(l.themodal))[0]!==undefined){if(s=n(f).triggerHandler("jqGridDelRowBeforeInitData",[n("#"+o)]),s===undefined&&(s=!0),s&&n.isFunction(t[f.p.id].beforeInitData)&&(s=t[f.p.id].beforeInitData.call(f,n("#"+o))),s===!1)return;n("#DelData>td","#"+o).text(i);n("#DelError","#"+o).hide();t[f.p.id].processing===!0&&(t[f.p.id].processing=!1,n("#dData","#"+o).removeClass(u.active));n(f).triggerHandler("jqGridDelRowBeforeShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].beforeShowForm)&&t[f.p.id].beforeShowForm.call(f,n("#"+o));n.jgrid.viewModal("#"+n.jgrid.jqID(l.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:t[f.p.id].jqModal,overlay:t[f.p.id].overlay,modal:t[f.p.id].modal});n(f).triggerHandler("jqGridDelRowAfterShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].afterShowForm)&&t[f.p.id].afterShowForm.call(f,n("#"+o))}else{var g=isNaN(t[f.p.id].dataheight)?t[f.p.id].dataheight:t[f.p.id].dataheight+"px",nt=isNaN(r.datawidth)?r.datawidth:r.datawidth+"px",a="<div id='"+d+"' class='formdata' style='width:"+nt+";overflow:auto;position:relative;height:"+g+";'>";if(a+="<table class='DelTable'><tbody>",a+="<tr id='DelError' style='display:none'><td class='"+u.error+"'><\/td><\/tr>",a+="<tr id='DelData' style='display:none'><td >"+i+"<\/td><\/tr>",a+='<tr><td class="delmsg" style="white-space:pre;">'+t[f.p.id].msg+"<\/td><\/tr><tr><td >&#160;<\/td><\/tr>",a+="<\/tbody><\/table><\/div>",b="<a id='dData' class='fm-button "+u.button+"'>"+r.bSubmit+"<\/a>",k="<a id='eData' class='fm-button "+u.button+"'>"+r.bCancel+"<\/a>",a+="<table class='EditTable ui-common-table' id='"+o+"_2'><tbody><tr><td><hr class='"+u.content+"' style='margin:1px'/><\/td><\/tr><tr><td class='DelButton EditButton'>"+b+"&#160;"+k+"<\/td><\/tr><\/tbody><\/table>",r.gbox="#gbox_"+n.jgrid.jqID(h),n.jgrid.createModal(l,a,t[f.p.id],"#gview_"+n.jgrid.jqID(f.p.id),n("#gview_"+n.jgrid.jqID(f.p.id))[0]),n(".fm-button","#"+o+"_2").hover(function(){n(this).addClass(u.hover)},function(){n(this).removeClass(u.hover)}),r.delicon=n.extend([!0,"left",e.icon_del],t[f.p.id].delicon),r.cancelicon=n.extend([!0,"left",e.icon_cancel],t[f.p.id].cancelicon),r.delicon[0]===!0&&n("#dData","#"+o+"_2").addClass(r.delicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.delicon[2]+"'><\/span>"),r.cancelicon[0]===!0&&n("#eData","#"+o+"_2").addClass(r.cancelicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.cancelicon[2]+"'><\/span>"),n("#dData","#"+o+"_2").click(function(){var i=[!0,""],b,e=n("#DelData>td","#"+o).text(),s,a;if(v={},v=n(f).triggerHandler("jqGridDelRowClickSubmit",[t[f.p.id],e]),v===undefined&&n.isFunction(t[f.p.id].onclickSubmit)&&(v=t[f.p.id].onclickSubmit.call(f,t[f.p.id],e)||{}),i=n(f).triggerHandler("jqGridDelRowBeforeSubmit",[e]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[f.p.id].beforeSubmit)&&(i=t[f.p.id].beforeSubmit.call(f,e)),i[0]&&!t[f.p.id].processing){if(t[f.p.id].processing=!0,y=f.p.prmNames,c=n.extend({},t[f.p.id].delData,v),w=y.oper,c[w]=y.deloper,p=y.id,e=String(e).split(","),!e.length)return!1;for(b in e)e.hasOwnProperty(b)&&(e[b]=n.jgrid.stripPref(f.p.idPrefix,e[b]));c[p]=e.join();n(this).addClass(u.active);s=n.extend({url:t[f.p.id].url||n(f).jqGrid("getGridParam","editurl"),type:t[f.p.id].mtype,data:n.isFunction(t[f.p.id].serializeDelData)?t[f.p.id].serializeDelData.call(f,c):c,complete:function(s,a){var v,y;if(n("#dData","#"+o+"_2").removeClass(u.active),s.status>=300&&s.status!==304?(i[0]=!1,i[1]=n(f).triggerHandler("jqGridDelRowErrorTextFormat",[s]),n.isFunction(t[f.p.id].errorTextFormat)&&(i[1]=t[f.p.id].errorTextFormat.call(f,s)),i[1]===undefined&&(i[1]=a+" Status: '"+s.statusText+"'. Error code: "+s.status)):(i=n(f).triggerHandler("jqGridDelRowAfterSubmit",[s,c]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[f.p.id].afterSubmit)&&(i=t[f.p.id].afterSubmit.call(f,s,c))),i[0]===!1)n("#DelError>td","#"+o).html(i[1]),n("#DelError","#"+o).show();else{if(t[f.p.id].reloadAfterSubmit&&f.p.datatype!=="local")n(f).trigger("reloadGrid");else{if(f.p.treeGrid===!0)try{n(f).jqGrid("delTreeNode",f.p.idPrefix+e[0])}catch(p){}else for(v=0;v<e.length;v++)n(f).jqGrid("delRowData",f.p.idPrefix+e[v]);f.p.selrow=null;f.p.selarrrow=[]}(n.isFunction(t[f.p.id].afterComplete)||n._data(n(f)[0],"events").hasOwnProperty("jqGridDelRowAfterComplete"))&&(y=s,setTimeout(function(){n(f).triggerHandler("jqGridDelRowAfterComplete",[y,c]);try{t[f.p.id].afterComplete.call(f,y,c)}catch(i){}},500))}t[f.p.id].processing=!1;i[0]&&n.jgrid.hideModal("#"+n.jgrid.jqID(l.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[f.p.id].onClose})}},n.jgrid.ajaxOptions,t[f.p.id].ajaxDelOptions);s.url||t[f.p.id].useDataProxy||(n.isFunction(f.p.dataProxy)?t[f.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.getRegional(f,"errors.nourl")));i[0]&&(t[f.p.id].useDataProxy?(a=f.p.dataProxy.call(f,s,"del_"+f.p.id),a===undefined&&(a=[!0,""]),a[0]===!1?(i[0]=!1,i[1]=a[1]||"Error deleting the selected row!"):n.jgrid.hideModal("#"+n.jgrid.jqID(l.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[f.p.id].onClose})):s.url==="clientArray"?(c=s.data,s.complete({status:200,statusText:""},"")):n.ajax(s))}return i[0]===!1&&(n("#DelError>td","#"+o).html(i[1]),n("#DelError","#"+o).show()),!1}),n("#eData","#"+o+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(l.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:t[f.p.id].jqModal,onClose:t[f.p.id].onClose}),!1}),s=n(f).triggerHandler("jqGridDelRowBeforeInitData",[n("#"+o)]),s===undefined&&(s=!0),s&&n.isFunction(t[f.p.id].beforeInitData)&&(s=t[f.p.id].beforeInitData.call(f,n("#"+o))),s===!1)return;n(f).triggerHandler("jqGridDelRowBeforeShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].beforeShowForm)&&t[f.p.id].beforeShowForm.call(f,n("#"+o));n.jgrid.viewModal("#"+n.jgrid.jqID(l.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:t[f.p.id].jqModal,overlay:t[f.p.id].overlay,modal:t[f.p.id].modal});n(f).triggerHandler("jqGridDelRowAfterShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].afterShowForm)&&t[f.p.id].afterShowForm.call(f,n("#"+o))}t[f.p.id].closeOnEscape===!0&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(l.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(t,i,r,u,f,e,o){var l=n.jgrid.getRegional(this[0],"nav"),c=this[0].p.styleUI,h=n.jgrid.styleUI[c].navigator,s=n.jgrid.styleUI[c].common;return i=n.extend({edit:!0,editicon:h.icon_edit_nav,add:!0,addicon:h.icon_add_nav,del:!0,delicon:h.icon_del_nav,search:!0,searchicon:h.icon_search_nav,refresh:!0,refreshicon:h.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:h.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},l,i||{}),this.each(function(){var b,a,g,it,h,v,y,rt,w,p;if(!this.p.navGrid&&(b={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},a=this,a.grid&&typeof t=="string")){n(a).data("navGrid")||n(a).data("navGrid",i);h=n(a).data("navGrid");a.p.force_regional&&(h=n.extend(h,l));n("#"+b.themodal)[0]===undefined&&(h.alerttop||h.alertleft||(window.innerWidth!==undefined?(h.alertleft=window.innerWidth,h.alerttop=window.innerHeight):document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0?(h.alertleft=document.documentElement.clientWidth,h.alerttop=document.documentElement.clientHeight):(h.alertleft=1024,h.alerttop=768),h.alertleft=h.alertleft/2-parseInt(h.alertwidth,10)/2,h.alerttop=h.alerttop/2-25),n.jgrid.createModal(b,"<div>"+h.alerttext+"<\/div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'><\/span><\/span>",{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqModal:!0,drag:!0,resize:!0,caption:h.alertcap,top:h.alerttop,left:h.alertleft,width:h.alertwidth,height:h.alertheight,closeOnEscape:h.closeOnEscape,zIndex:h.alertzIndex,styleUI:a.p.styleUI},"#gview_"+n.jgrid.jqID(a.p.id),n("#gbox_"+n.jgrid.jqID(a.p.id))[0],!0));var tt=1,nt,k=function(){n(this).hasClass(s.disabled)||n(this).addClass(s.hover)},d=function(){n(this).removeClass(s.hover)};for(h.cloneToTop&&a.p.toppager&&(tt=2),nt=0;nt<tt;nt++)y=n("<table class='ui-pg-table navtable ui-common-table'><tbody><tr><\/tr><\/tbody><\/table>"),rt="<td class='ui-pg-button "+s.disabled+"' style='width:4px;'><span class='ui-separator'><\/span><\/td>",nt===0?(w=t,p=a.p.id,w===a.p.toppager&&(p+="_top",tt=1)):(w=a.p.toppager,p=a.p.id+"_top"),a.p.direction==="rtl"&&n(y).attr("dir","rtl").css("float","right"),u=u||{},h.add&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.addicon+"'><\/span>"+h.addtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.addtitle||"",id:u.id||"add_"+p}).click(function(){return n(this).hasClass(s.disabled)||(n.isFunction(h.addfunc)?h.addfunc.call(a):n(a).jqGrid("editGridRow","new",u)),!1}).hover(k,d),v=null),r=r||{},h.edit&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.editicon+"'><\/span>"+h.edittext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.edittitle||"",id:r.id||"edit_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){var t=a.p.selrow;t?n.isFunction(h.editfunc)?h.editfunc.call(a,t):n(a).jqGrid("editGridRow",t,r):(n.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(k,d),v=null),o=o||{},h.view&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.viewicon+"'><\/span>"+h.viewtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.viewtitle||"",id:o.id||"view_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){var t=a.p.selrow;t?n.isFunction(h.viewfunc)?h.viewfunc.call(a,t):n(a).jqGrid("viewGridRow",t,o):(n.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(k,d),v=null),f=f||{},h.del&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.delicon+"'><\/span>"+h.deltext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.deltitle||"",id:f.id||"del_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){var t;a.p.multiselect?(t=a.p.selarrrow,t.length===0&&(t=null)):t=a.p.selrow;t?n.isFunction(h.delfunc)?h.delfunc.call(a,t):n(a).jqGrid("delGridRow",t,f):(n.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(k,d),v=null),(h.add||h.edit||h.del||h.view)&&n("tr",y).append(rt),e=e||{},h.search&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.searchicon+"'><\/span>"+h.searchtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.searchtitle||"",id:e.id||"search_"+p}).click(function(){return n(this).hasClass(s.disabled)||(n.isFunction(h.searchfunc)?h.searchfunc.call(a,e):n(a).jqGrid("searchGrid",e)),!1}).hover(k,d),e.showOnLoad&&e.showOnLoad===!0&&n(v,y).click(),v=null),h.refresh&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.refreshicon+"'><\/span>"+h.refreshtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.refreshtitle||"",id:"refresh_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){n.isFunction(h.beforeRefresh)&&h.beforeRefresh.call(a);a.p.search=!1;a.p.resetsearch=!0;try{if(h.refreshstate!=="currentfilter"){var t=a.p.id;a.p.postData.filters="";try{n("#fbox_"+n.jgrid.jqID(t)).jqFilter("resetFilter")}catch(i){}n.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(r){}switch(h.refreshstate){case"firstpage":n(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":n(a).trigger("reloadGrid",[{current:!0}])}n.isFunction(h.afterRefresh)&&h.afterRefresh.call(a)}return!1}).hover(k,d),v=null),it=n(".ui-jqgrid").css("font-size")||"11px",n("body").append("<div id='testpg2' class='ui-jqgrid "+n.jgrid.styleUI[c].base.entrieBox+"' style='font-size:"+it+";visibility:hidden;' ><\/div>"),g=n(y).clone().appendTo("#testpg2").width(),n("#testpg2").remove(),a.p._nvtd&&(h.dropmenu?(y=null,n(a).jqGrid("_buildNavMenu",w,p,i,r,u,f,e,o)):g>a.p._nvtd[0]?(a.p.responsive?(y=null,n(a).jqGrid("_buildNavMenu",w,p,i,r,u,f,e,o)):n(w+"_"+h.position,w).append(y).width(g),a.p._nvtd[0]=g):n(w+"_"+h.position,w).append(y),a.p._nvtd[1]=g),a.p.navGrid=!0;a.p.storeNavOptions&&(a.p.navOptions=h,a.p.editOptions=r,a.p.addOptions=u,a.p.delOptions=f,a.p.searchOptions=e,a.p.viewOptions=o,a.p.navButtons=[])}})},navButtonAdd:function(t,i){var r=this[0].p.styleUI,u=n.jgrid.styleUI[r].navigator;return i=n.extend({caption:"newButton",title:"",buttonicon:u.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},i||{}),this.each(function(){var f;if(this.grid){typeof t=="string"&&t.indexOf("#")!==0&&(t="#"+n.jgrid.jqID(t));var u=n(".navtable",t)[0],e=this,o=n.jgrid.styleUI[r].common.disabled,s=n.jgrid.styleUI[r].common.hover,c=n.jgrid.styleUI[r].common.cornerall,a=n.jgrid.styleUI[r].common.icon_base;if(e.p.storeNavOptions&&!i.internal&&e.p.navButtons.push([t,i]),u){if(i.id&&n("#"+n.jgrid.jqID(i.id),u)[0]!==undefined)return;f=n("<td><\/td>");i.buttonicon.toString().toUpperCase()==="NONE"?n(f).addClass("ui-pg-button "+c).append("<div class='ui-pg-div'>"+i.caption+"<\/div>"):n(f).addClass("ui-pg-button "+c).append("<div class='ui-pg-div'><span class='"+a+" "+i.buttonicon+"'><\/span>"+i.caption+"<\/div>");i.id&&n(f).attr("id",i.id);i.position==="first"?u.rows[0].cells.length===0?n("tr",u).append(f):n("tr td:eq(0)",u).before(f):n("tr",u).append(f);n(f,u).attr("title",i.title||"").click(function(t){return n(this).hasClass(o)||n.isFunction(i.onClickButton)&&i.onClickButton.call(e,t),!1}).hover(function(){n(this).hasClass(o)||n(this).addClass(s)},function(){n(this).removeClass(s)})}else if(u=n(".dropdownmenu",t)[0],u){var h=n(u).val(),v=i.id||n.jgrid.randId(),l=n('<li class="ui-menu-item" role="presentation"><a class="'+c+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.caption||i.title)+"<\/a><\/li>");h&&(i.position==="first"?n("#"+h).prepend(l):n("#"+h).append(l),n(l).on("click",function(t){return n(this).hasClass(o)||(n("#"+h).hide(),n.isFunction(i.onClickButton)&&i.onClickButton.call(e,t)),!1}).find("a").hover(function(){n(this).hasClass(o)||n(this).addClass(s)},function(){n(this).removeClass(s)}))}}})},navSeparatorAdd:function(t,i){var u=this[0].p.styleUI,r=n.jgrid.styleUI[u].common;return i=n.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){typeof t=="string"&&t.indexOf("#")!==0&&(t="#"+n.jgrid.jqID(t));var u=n(".navtable",t)[0],f,e;this.p.storeNavOptions&&this.p.navButtons.push([t,i]);u?(f="<td class='ui-pg-button "+r.disabled+"' style='width:4px;'><span class='"+i.sepclass+"'><\/span>"+i.sepcontent+"<\/td>",i.position==="first"?u.rows[0].cells.length===0?n("tr",u).append(f):n("tr td:eq(0)",u).before(f):n("tr",u).append(f)):(u=n(".dropdownmenu",t)[0],f="<li class='ui-menu-item "+r.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'><\/li>",u&&(e=n(u).val(),e&&(i.position==="first"?n("#"+e).prepend(f):n("#"+e).append(f))))}})},_buildNavMenu:function(t,i,r,u,f,e,o,s){return this.each(function(){var h=this,p=n.jgrid.getRegional(h,"nav"),v=h.p.styleUI,d=n.jgrid.styleUI[v].navigator,w=n.jgrid.styleUI[v].filter,c=n.jgrid.styleUI[v].common,l="form_menu_"+n.jgrid.randId(),b=r.navButtonText?r.navButtonText:p.selectcaption||"Actions",k="<button class='dropdownmenu "+c.button+"' value='"+l+"'>"+b+"<\/button>",a,y;n(t+"_"+r.position,t).append(k);a={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id};y=function(){var p=n(".ui-jqgrid-view").css("font-size")||"11px",y,v,t=n('<ul id="'+l+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+p+'"><\/ul>');r.add&&(f=f||{},y=f.id||"add_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.addtext||r.addtitle)+"<\/a><\/li>").click(function(){return n(this).hasClass(c.disabled)||(n.isFunction(r.addfunc)?r.addfunc.call(h):n(h).jqGrid("editGridRow","new",f),n(t).hide()),!1}),n(t).append(v));r.edit&&(u=u||{},y=u.id||"edit_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.edittext||r.edittitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){var i=h.p.selrow;i?n.isFunction(r.editfunc)?r.editfunc.call(h,i):n(h).jqGrid("editGridRow",i,u):(n.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+n.jgrid.jqID(h.p.id),jqm:!0}),n("#jqg_alrt").focus());n(t).hide()}return!1}),n(t).append(v));r.view&&(s=s||{},y=s.id||"view_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.viewtext||r.viewtitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){var i=h.p.selrow;i?n.isFunction(r.editfunc)?r.viewfunc.call(h,i):n(h).jqGrid("viewGridRow",i,s):(n.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+n.jgrid.jqID(h.p.id),jqm:!0}),n("#jqg_alrt").focus());n(t).hide()}return!1}),n(t).append(v));r.del&&(e=e||{},y=e.id||"del_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.deltext||r.deltitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){var i;h.p.multiselect?(i=h.p.selarrrow,i.length===0&&(i=null)):i=h.p.selrow;i?n.isFunction(r.delfunc)?r.delfunc.call(h,i):n(h).jqGrid("delGridRow",i,e):(n.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+n.jgrid.jqID(h.p.id),jqm:!0}),n("#jqg_alrt").focus());n(t).hide()}return!1}),n(t).append(v));(r.add||r.edit||r.del||r.view)&&n(t).append("<li class='ui-menu-item "+c.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'><\/li>");r.search&&(o=o||{},y=o.id||"search_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.searchtext||r.searchtitle)+"<\/a><\/li>").click(function(){return n(this).hasClass(c.disabled)||(n.isFunction(r.searchfunc)?r.searchfunc.call(h,o):n(h).jqGrid("searchGrid",o),n(t).hide()),!1}),n(t).append(v),o.showOnLoad&&o.showOnLoad===!0&&n(v).click());r.refresh&&(y=o.id||"search_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.refreshtext||r.refreshtitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){n.isFunction(r.beforeRefresh)&&r.beforeRefresh.call(h);h.p.search=!1;h.p.resetsearch=!0;try{if(r.refreshstate!=="currentfilter"){var i=h.p.id;h.p.postData.filters="";try{n("#fbox_"+n.jgrid.jqID(i)).jqFilter("resetFilter")}catch(u){}n.isFunction(h.clearToolbar)&&h.clearToolbar.call(h,!1)}}catch(f){}switch(r.refreshstate){case"firstpage":n(h).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":n(h).trigger("reloadGrid",[{current:!0}])}n.isFunction(r.afterRefresh)&&r.afterRefresh.call(h);n(t).hide()}return!1}),n(t).append(v));n(t).hide();n("body").append(t);n("#"+l).addClass("ui-menu "+w.menu_widget);n("#"+l+" > li > a").hover(function(){n(this).addClass(c.hover)},function(){n(this).removeClass(c.hover)})};y();n(".dropdownmenu",t+"_"+r.position).on("click",function(t){var i=n(this).offset(),u=i.left,f=parseInt(i.top),r=n(this).val();n("#"+r).show().css({top:f-(n("#"+r).height()+10)+"px",left:u+"px"});t.stopPropagation()});n("body").on("click",function(t){n(t.target).hasClass("dropdownmenu")||n("#"+l).hide()})})},GridToForm:function(t,i){return this.each(function(){var f=this,r,u;if(f.grid&&(u=n(f).jqGrid("getRowData",t),u))for(r in u)u.hasOwnProperty(r)&&(n("[name="+n.jgrid.jqID(r)+"]",i).is("input:radio")||n("[name="+n.jgrid.jqID(r)+"]",i).is("input:checkbox")?n("[name="+n.jgrid.jqID(r)+"]",i).each(function(){n(this).val()==u[r]?n(this)[f.p.useProp?"prop":"attr"]("checked",!0):n(this)[f.p.useProp?"prop":"attr"]("checked",!1)}):n("[name="+n.jgrid.jqID(r)+"]",i).val(u[r]))})},FormToGrid:function(t,i,r,u){return this.each(function(){var e=this,o,f;e.grid&&(r||(r="set"),u||(u="first"),o=n(i).serializeArray(),f={},n.each(o,function(n,t){f[t.name]=t.value}),r==="add"?n(e).jqGrid("addRowData",t,f,u):r==="set"&&n(e).jqGrid("setRowData",t,f))})}});n.jgrid.extend({groupingSetup:function(){return this.each(function(){var f=this,i,r,e,u=f.p.colModel,t=f.p.groupingView,o=n.jgrid.styleUI[f.p.styleUI||"jQueryUI"].grouping;if(t!==null&&(typeof t=="object"||n.isFunction(t)))if(t.plusicon||(t.plusicon=o.icon_plus),t.minusicon||(t.minusicon=o.icon_minus),t.groupField.length){for(t.visibiltyOnNextGrouping===undefined&&(t.visibiltyOnNextGrouping=[]),t.lastvalues=[],t._locgr||(t.groups=[]),t.counters=[],i=0;i<t.groupField.length;i++)t.groupOrder[i]||(t.groupOrder[i]="asc"),t.groupText[i]||(t.groupText[i]="{0}"),typeof t.groupColumnShow[i]!="boolean"&&(t.groupColumnShow[i]=!0),typeof t.groupSummary[i]!="boolean"&&(t.groupSummary[i]=!1),t.groupSummaryPos[i]||(t.groupSummaryPos[i]="footer"),t.groupColumnShow[i]===!0?(t.visibiltyOnNextGrouping[i]=!0,n(f).jqGrid("showCol",t.groupField[i])):(t.visibiltyOnNextGrouping[i]=n("#"+n.jgrid.jqID(f.p.id+"_"+t.groupField[i])).is(":visible"),n(f).jqGrid("hideCol",t.groupField[i]));for(t.summary=[],t.hideFirstGroupCol&&n.isArray(t.formatDisplayField)&&!n.isFunction(t.formatDisplayField[0])&&(t.formatDisplayField[0]=function(n){return n}),r=0,e=u.length;r<e;r++)t.hideFirstGroupCol&&(u[r].hidden||t.groupField[0]!==u[r].name||(u[r].formatter=function(){return""})),u[r].summaryType&&(u[r].summaryDivider?t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sd:u[r].summaryDivider,vd:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}):t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}))}else f.p.grouping=!1;else f.p.grouping=!1})},groupingPrepare:function(t,i){return this.each(function(){for(var r=this.p.groupingView,s=this,h=function(){n.isFunction(this.st)?this.v=this.st.call(s,this.v,this.nm,t):(this.v=n(s).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(s).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))},a=r.groupField.length,o,f,c,e,l=0,u=0;u<a;u++)o=r.groupField[u],c=r.displayField[u],f=t[o],e=c==null?null:t[c],e==null&&(e=f),f!==undefined&&(i===0?(r.groups.push({idx:u,dataIndex:o,value:f,displayValue:e,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=f,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary):typeof f=="object"||(n.isArray(r.isInTheSameGroup)&&n.isFunction(r.isInTheSameGroup[u])?r.isInTheSameGroup[u].call(s,r.lastvalues[u],f,u,r):r.lastvalues[u]===f)?l===1?(r.groups.push({idx:u,dataIndex:o,value:f,displayValue:e,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=f,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary):(r.counters[u].cnt+=1,r.groups[r.counters[u].pos].cnt=r.counters[u].cnt,n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary):(r.groups.push({idx:u,dataIndex:o,value:f,displayValue:e,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=f,l=1,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary))}),this},groupingToggle:function(t){return this.each(function(){var r=this,b=r.p.groupingView,o=t.split("_"),l=parseInt(o[o.length-2],10);o.splice(o.length-2,2);var a=o.join("_"),s=b.minusicon,h=b.plusicon,k=n("#"+n.jgrid.jqID(t)),i=k.length?k[0].nextSibling:null,v=n("#"+n.jgrid.jqID(t)+" span.tree-wrap-"+r.p.direction),d=function(t){var i=n.map(t.split(" "),function(n){if(n.substring(0,a.length+1)===a+"_")return parseInt(n.substring(a.length+1),10)});return i.length>0?i[0]:undefined},u,c,y=!1,p=!1,e=r.p.frozenColumns?r.p.id+"_frozen":!1,w=e?n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(e)):!1,f=w&&w.length?w[0].nextSibling:null;if(v.hasClass(s)){if(i)while(i){if(u=d(i.className),u!==undefined&&u<=l)break;n(i).hide();i=i.nextSibling;e&&(n(f).hide(),f=f.nextSibling)}v.removeClass(s).addClass(h);y=!0}else{if(i)for(c=undefined;i;){if(u=d(i.className),c===undefined&&(c=u===undefined),p=n(i).hasClass("ui-subgrid")&&n(i).hasClass("ui-sg-collapsed"),u!==undefined){if(u<=l)break;u===l+1&&(p||(n(i).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(s).addClass(h),e&&n(f).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(s).addClass(h)))}else c&&(p||(n(i).show(),e&&n(f).show()));i=i.nextSibling;e&&(f=f.nextSibling)}v.removeClass(h).addClass(s)}n(r).triggerHandler("jqGridGroupingClickGroup",[t,y]);n.isFunction(r.p.onClickGroup)&&r.p.onClickGroup.call(r,t,y)}),!1},groupingRender:function(t,i,r,u){return this.each(function(){function g(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function d(t,r,u,f){for(var s=g(t,r,u),h=e.p.colModel,c,v=s.cnt,y="",l,a,o=f;o<i;o++)l="<td "+e.formatCol(o,1,"")+">&#160;<\/td>",a="{0}",n.each(s.summary,function(){if(this.nm===h[o].name){h[o].summaryTpl&&(a=h[o].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&v>0&&(this.v=this.v/v));try{this.groupCount=s.cnt;this.groupIndex=s.dataIndex;this.groupValue=s.value;c=e.formatter("",this.v,o,this)}catch(t){c=this.v}return l="<td "+e.formatCol(o,1,"")+">"+n.jgrid.template(a,c,s.cnt)+"<\/td>",!1}}),y+=l;return y}var e=this,f=e.p.groupingView,o="",y="",h,l,p=f.groupCollapse?f.plusicon:f.minusicon,s,w=[],k=f.groupField.length,a=n.jgrid.styleUI[e.p.styleUI||"jQueryUI"].common,c,b,v;p=p+" tree-wrap-"+e.p.direction;n.each(e.p.colModel,function(n,t){for(var i=0;i<k;i++)if(f.groupField[i]===t.name){w[i]=n;break}});c=0;b=n.makeArray(f.groupSummary);b.reverse();v=e.p.multiselect?' colspan="2"':"";n.each(f.groups,function(g,nt){var tt,st,rt,ot;if(f._locgr&&!(nt.startRow+nt.cnt>(r-1)*u&&nt.startRow<r*u))return!0;c++;l=e.p.id+"ghead_"+nt.idx;h=l+"_"+g;y="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+a.icon_base+" "+p+"' onclick=\"jQuery('#"+n.jgrid.jqID(e.p.id)+"').jqGrid('groupingToggle','"+h+"');return false;\"><\/span>";try{s=n.isArray(f.formatDisplayField)&&n.isFunction(f.formatDisplayField[nt.idx])?f.formatDisplayField[nt.idx].call(e,nt.displayValue,nt.value,e.p.colModel[w[nt.idx]],nt.idx,f):e.formatter(h,nt.displayValue,w[nt.idx],nt.value)}catch(lt){s=nt.displayValue}if(tt="",tt=n.isFunction(f.groupText[nt.idx])?f.groupText[nt.idx].call(e,s,nt.cnt,nt.summary):n.jgrid.template(f.groupText[nt.idx],s,nt.cnt,nt.summary),typeof tt=="string"||typeof tt=="number"||(tt=s),f.groupSummaryPos[nt.idx]==="header"?(o+='<tr id="'+h+'"'+(f.groupCollapse&&nt.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+a.content+" jqgroup ui-row-"+e.p.direction+" "+l+'"><td style="padding-left:'+nt.idx*12+'px;"'+v+">"+y+tt+"<\/td>",o+=d(g,0,f.groups,f.groupColumnShow[nt.idx]===!1?v===""?2:3:v===""?1:2),o+="<\/tr>"):o+='<tr id="'+h+'"'+(f.groupCollapse&&nt.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+a.content+" jqgroup ui-row-"+e.p.direction+" "+l+'"><td style="padding-left:'+nt.idx*12+'px;" colspan="'+(f.groupColumnShow[nt.idx]===!1?i-1:i)+'">'+y+tt+"<\/td><\/tr>",st=k-1===nt.idx,st){var et=f.groups[g+1],ut,it,ft=0,ht=nt.startRow,ct=et!==undefined?et.startRow:f.groups[g].startRow+f.groups[g].cnt;for(f._locgr&&(ft=(r-1)*u,ft>nt.startRow&&(ht=ft)),ut=ht;ut<ct;ut++){if(!t[ut-ft])break;o+=t[ut-ft].join("")}if(f.groupSummaryPos[nt.idx]!=="header"){if(et!==undefined){for(rt=0;rt<f.groupField.length;rt++)if(et.dataIndex===f.groupField[rt])break;c=f.groupField.length-rt}for(it=0;it<c;it++)b[it]&&(ot="",f.groupCollapse&&!f.showSummaryOnHide&&(ot=' style="display:none;"'),o+="<tr"+ot+' jqfootlevel="'+(nt.idx-it)+'" role="row" class="'+a.content+" jqfoot ui-row-"+e.p.direction+'">',o+=d(g,it,f.groups,0),o+="<\/tr>");c=rt}}});n("#"+n.jgrid.jqID(e.p.id)+" tbody:first").append(o);o=null})},groupingGroupBy:function(t,i){return this.each(function(){var f=this,u,r;for(typeof t=="string"&&(t=[t]),u=f.p.groupingView,f.p.grouping=!0,u._locgr=!1,u.visibiltyOnNextGrouping===undefined&&(u.visibiltyOnNextGrouping=[]),r=0;r<u.groupField.length;r++)!u.groupColumnShow[r]&&u.visibiltyOnNextGrouping[r]&&n(f).jqGrid("showCol",u.groupField[r]);for(r=0;r<t.length;r++)u.visibiltyOnNextGrouping[r]=n("#"+n.jgrid.jqID(f.p.id)+"_"+n.jgrid.jqID(t[r])).is(":visible");f.p.groupingView=n.extend(f.p.groupingView,i||{});u.groupField=t;n(f).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var i=this,r,u;if(t===undefined&&(t=!0),i.p.grouping=!1,t===!0){for(r=i.p.groupingView,u=0;u<r.groupField.length;u++)!r.groupColumnShow[u]&&r.visibiltyOnNextGrouping[u]&&n(i).jqGrid("showCol",r.groupField);n("tr.jqgroup, tr.jqfoot","#"+n.jgrid.jqID(i.p.id)+" tbody:first").remove();n("tr.jqgrow:hidden","#"+n.jgrid.jqID(i.p.id)+" tbody:first").show()}else n(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(n,t,i,r,u,f){var o={sum:function(){return parseFloat(t||0)+parseFloat(f[i]||0)},min:function(){return t===""?parseFloat(f[i]||0):Math.min(parseFloat(t),parseFloat(f[i]||0))},max:function(){return t===""?parseFloat(f[i]||0):Math.max(parseFloat(t),parseFloat(f[i]||0))},count:function(){return(t===""&&(t=0),f.hasOwnProperty(i))?t+1:0},avg:function(){return o.sum()}},e,s;if(!o[n])throw"jqGrid Grouping No such method: "+n;return e=o[n](),r!=null&&(u==="fixed"?e=e.toFixed(r):(s=Math.pow(10,r),e=Math.round(e*s)/s)),e}},setGroupHeaders:function(t){return t=n.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){var i=this,r,a,p=0,h,f,e,o,k,u,v,w,d,c,g,b=i.p.colModel,nt=b.length,tt=i.grid.headers,s=n("table.ui-jqgrid-htable",i.grid.hDiv),et=s.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),ot=s.children("thead"),y,l=s.find(".jqg-first-row-header"),it=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].base,rt,ut,ft;for(i.p.groupHeader||(i.p.groupHeader=[]),i.p.groupHeader.push(t),l[0]===undefined?l=n("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):l.empty(),ut=function(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i].startColumnName===n)return i;return-1},n(i).prepend(ot),h=n("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),r=0;r<nt;r++)if(e=tt[r].el,o=n(e),a=b[r],k={height:"0px",width:tt[r].width+"px",display:a.hidden?"none":""},n("<th>",{role:"gridcell"}).css(k).addClass("ui-first-th-"+i.p.direction).appendTo(l),e.style.width="",u=ut(a.name,t.groupHeaders),u>=0){for(v=t.groupHeaders[u],w=v.numberOfColumns,d=v.titleText,g=v.className||"",c=0,u=0;u<w&&r+u<nt;u++)b[r+u].hidden||c++;f=n("<th>").attr({role:"columnheader"}).addClass(it.headerBox+" ui-th-column-header ui-th-"+i.p.direction+" "+g).html(d);c>0&&f.attr("colspan",String(c));i.p.headertitles&&f.attr("title",f.text());c===0&&f.hide();o.before(f);h.append(e);p=w-1}else p===0?t.useColSpanStyle?(ft=o.attr("rowspan")?parseInt(o.attr("rowspan"),10)+1:2,o.attr("rowspan",ft)):(n("<th>",{role:"columnheader"}).addClass(it.headerBox+" ui-th-column-header ui-th-"+i.p.direction).css({display:a.hidden?"none":""}).insertBefore(o),h.append(e)):(h.append(e),p--);y=n(i).children("thead");y.prepend(l);h.insertAfter(et);s.append(y);t.useColSpanStyle&&(s.find("span.ui-jqgrid-resize").each(function(){var t=n(this).parent();t.is(":visible")&&(this.style.cssText="height: "+t.height()+"px !important; cursor: col-resize;")}),s.find("div.ui-jqgrid-sortable").each(function(){var t=n(this),i=t.parent();i.is(":visible")&&i.is(":has(span.ui-jqgrid-resize)")&&t.css("top",(i.height()-t.outerHeight())/2-4+"px")}));rt=y.find("tr.jqg-first-row-header");n(i).on("jqGridResizeStop.setGroupHeaders",function(n,t,i){rt.find("th").eq(i)[0].style.width=t+"px"})})},destroyGroupHeader:function(t){return t===undefined&&(t=!0),this.each(function(){var f=this,e,i,h,u,r,o,s=f.grid,c=n("table.ui-jqgrid-htable thead",s.hDiv),a=f.p.colModel,l;if(s){for(n(this).off(".setGroupHeaders"),e=n("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),u=s.headers,i=0,h=u.length;i<h;i++){l=a[i].hidden?"none":"";r=n(u[i].el).width(u[i].width).css("display",l);try{r.removeAttr("rowSpan")}catch(v){r.attr("rowSpan",1)}e.append(r);o=r.children("span.ui-jqgrid-resize");o.length>0&&(o[0].style.height="");r.children("div")[0].style.top=""}n(c).children("tr.ui-jqgrid-labels").remove();n(c).prepend(e);t===!0&&n(f).jqGrid("setGridParam",{groupHeader:null})}})}});n.jgrid=n.jgrid||{};n.extend(n.jgrid,{saveState:function(t,i){var l,e,c,h,a;if(i=n.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:!1,saveData:!0},i||{}),t){var f="",u="",o,r=n("#"+t)[0],s;if(r.grid){if(s=n(r).data("inlineNav"),s&&r.p.inlineNav&&n(r).jqGrid("setGridParam",{_iN:s}),s=n(r).data("filterToolbar"),s&&r.p.filterToolbar&&n(r).jqGrid("setGridParam",{_fT:s}),f=n(r).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""}),u="",i.saveData&&(u=n(r.grid.bDiv).find(".ui-jqgrid-btable tbody:first").html(),l=u.indexOf("<\/tr>"),u=u.slice(l+5)),n.isFunction(i.beforeSetItem)&&(o=i.beforeSetItem.call(r,f),o!=null&&(f=o)),i.debug){n("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data<\/a>');e=[];h={};e.push("Grid Options\n");e.push(f);e.push("\n");e.push("GridData\n");e.push(u);h.type="plain/text;charset=utf-8";try{c=new File(e,"jqGrid_dump.txt",h)}catch(v){c=new Blob(e,h)}a=URL.createObjectURL(c);n("#link_save").attr("href",a).on("click",function(){n(this).remove()})}if(i.compression&&i.compressionModule)try{o=window[i.compressionModule][i.compressionMethod](f);o!=null&&(f=o,u=window[i.compressionModule][i.compressionMethod](u))}catch(v){}if(i.useStorage&&n.jgrid.isLocalStorage())try{window[i.storageType].setItem("jqGrid"+r.p.id,f);window[i.storageType].setItem("jqGrid"+r.p.id+"_data",u)}catch(v){v.code===22&&alert("Local storage limit is over!")}return f}}},loadState:function(t,i,r){var u,c,s,h,v,l,o,y,f,e,p,w;if(r=n.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16",restoreData:!0},r||{}),t){if(s=n("#"+t)[0],r.useStorage)try{i=window[r.storageType].getItem("jqGrid"+s.id);h=window[r.storageType].getItem("jqGrid"+s.id+"_data")}catch(nt){}if(i){if(r.decompression&&r.decompressionModule)try{u=window[r.decompressionModule][r.decompressionMethod](i);u!=null&&(i=u,h=window[r.decompressionModule][r.decompressionMethod](h))}catch(nt){}if(u=n.jgrid.parseFunc(i),u&&n.type(u)==="object"){if(s.grid&&n.jgrid.gridUnload(t),n.isFunction(r.beforeSetGrid)&&(c=r.beforeSetGrid(u),c&&n.type(c)==="object"&&(u=c)),o=function(n){return n},y={reccount:u.reccount,records:u.records,lastpage:u.lastpage,shrinkToFit:o(u.shrinkToFit),data:o(u.data),datatype:o(u.datatype),grouping:o(u.grouping)},u.shrinkToFit=!1,u.data=[],u.datatype="local",u.grouping=!1,u.inlineNav&&(v=o(u._iN),u._iN=null,delete u._iN),u.filterToolbar&&(l=o(u._fT),u._fT=null,delete u._fT),f=n("#"+t).jqGrid(u),r.restoreData&&n.trim(h)!==""&&f.append(h),f.jqGrid("setGridParam",y),u.storeNavOptions&&u.navGrid&&(f[0].p.navGrid=!1,f.jqGrid("navGrid",u.pager,u.navOptions,u.editOptions,u.addOptions,u.delOptions,u.searchOptions,u.viewOptions),u.navButtons&&u.navButtons.length))for(e=0;e<u.navButtons.length;e++)"sepclass"in u.navButtons[e][1]?f.jqGrid("navSeparatorAdd",u.navButtons[e][0],u.navButtons[e][1]):f.jqGrid("navButtonAdd",u.navButtons[e][0],u.navButtons[e][1]);if(f[0].refreshIndex(),u.subGrid&&(p=u.multiselect===1?1:0,w=u.rownumbers===!0?1:0,f.jqGrid("addSubGrid",p+w)),u.treeGrid)for(var a=1,g=f[0].rows.length,b=u.expColInd,k=u.treeReader.leaf_field,d=u.treeReader.expanded_field;a<g;){n(f[0].rows[a].cells[b]).find("div.treeclick").on("click",function(t){var r=t.target||t.srcElement,e=n.jgrid.stripPref(u.idPrefix,n(r,f[0].rows).closest("tr.jqgrow")[0].id),i=f[0].p._index[e];return f[0].p.data[i][k]||(f[0].p.data[i][d]?(f.jqGrid("collapseRow",f[0].p.data[i]),f.jqGrid("collapseNode",f[0].p.data[i])):(f.jqGrid("expandRow",f[0].p.data[i]),f.jqGrid("expandNode",f[0].p.data[i]))),!1});if(u.ExpandColClick===!0)n(f[0].rows[a].cells[b]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(t){var e=t.target||t.srcElement,r=n.jgrid.stripPref(u.idPrefix,n(e,f[0].rows).closest("tr.jqgrow")[0].id),i=f[0].p._index[r];return f[0].p.data[i][k]||(f[0].p.data[i][d]?(f.jqGrid("collapseRow",f[0].p.data[i]),f.jqGrid("collapseNode",f[0].p.data[i])):(f.jqGrid("expandRow",f[0].p.data[i]),f.jqGrid("expandNode",f[0].p.data[i]))),f.jqGrid("setSelection",r),!1});a++}u.multiselect&&n.each(u.selarrrow,function(){n("#jqg_"+t+"_"+this)[u.useProp?"prop":"attr"]("checked","checked")});u.inlineNav&&v&&(f.jqGrid("setGridParam",{inlineNav:!1}),f.jqGrid("inlineNav",u.pager,v));u.filterToolbar&&l&&(f.jqGrid("setGridParam",{filterToolbar:!1}),l.restoreFromFilters=!0,f.jqGrid("filterToolbar",l));u.frozenColumns&&f.jqGrid("setFrozenColumns");f[0].updatepager(!0,!0);n.isFunction(r.afterSetGrid)&&r.afterSetGrid(f);r.clearAfterLoad&&(window[r.storageType].removeItem("jqGrid"+s.id),window[r.storageType].removeItem("jqGrid"+s.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function(t,i){var r={storageType:"localStorage"},u,f,e;r=n.extend(r,i||{});try{f=window[r.storageType].getItem("jqGrid"+t);e=window[r.storageType].getItem("jqGrid"+t+"_data");u=f!=null&&e!=null&&typeof f=="string"&&typeof e=="string"}catch(o){u=!1}return u},setRegional:function(t,i){var r={storageType:"sessionStorage"};if(r=n.extend(r,i||{}),r.regional){n.jgrid.saveState(t,r);r.beforeSetGrid=function(n){return n.regional=r.regional,n.force_regional=!0,n};n.jgrid.loadState(t,null,r);var f=n("#"+t)[0],o=n(f).jqGrid("getGridParam","colModel"),e=-1,u=n.jgrid.getRegional(f,"nav");n.each(o,function(n){if(this.formatter&&this.formatter==="actions")return e=n,!1});e!==-1&&u&&n("#"+t+" tbody tr").each(function(){var t=this.cells[e];n(t).find(".ui-inline-edit").attr("title",u.edittitle);n(t).find(".ui-inline-del").attr("title",u.deltitle);n(t).find(".ui-inline-save").attr("title",u.savetitle);n(t).find(".ui-inline-cancel").attr("title",u.canceltitle)});try{window[r.storageType].removeItem("jqGrid"+f.id);window[r.storageType].removeItem("jqGrid"+f.id+"_data")}catch(s){}}},jqGridImport:function(t,i){var u;i=n.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},i||{});var r=(t.indexOf("#")===0?"":"#")+n.jgrid.jqID(t),f=function(t,i){var s=n(i.xmlGrid.config,t)[0],h=n(i.xmlGrid.data,t)[0],u,f,e,o;if(n.grid.xmlToJSON){u=n.jgrid.xmlToJSON(s);for(e in u)u.hasOwnProperty(e)&&(f=u[e]);h?(o=u.grid.datatype,u.grid.datatype="xmlstring",u.grid.datastr=t,n(r).jqGrid(f).jqGrid("setGridParam",{datatype:o})):setTimeout(function(){n(r).jqGrid(f)},0)}else alert("xml2json or parse are not present")},e=function(t,i){var o;if(t&&typeof t=="string"){var f=n.jgrid.parseFunc(t),u=f[i.jsonGrid.config],e=f[i.jsonGrid.data];e?(o=u.datatype,u.datatype="jsonstring",u.datastr=e,n(r).jqGrid(u).jqGrid("setGridParam",{datatype:o})):n(r).jqGrid(u)}};switch(i.imptype){case"xml":n.ajax(n.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"xml",complete:function(t,u){u==="success"&&(f(t.responseXML,i),n(r).triggerHandler("jqGridImportComplete",[t,i]),n.isFunction(i.importComplete)&&i.importComplete(t));t=null}},i.ajaxOptions));break;case"xmlstring":i.impstring&&typeof i.impstring=="string"&&(u=n.parseXML(i.impstring),u&&(f(u,i),n(r).triggerHandler("jqGridImportComplete",[u,i]),n.isFunction(i.importComplete)&&i.importComplete(u)));break;case"json":n.ajax(n.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"json",complete:function(t){try{e(t.responseText,i);n(r).triggerHandler("jqGridImportComplete",[t,i]);n.isFunction(i.importComplete)&&i.importComplete(t)}catch(u){}t=null}},i.ajaxOptions));break;case"jsonstring":i.impstring&&typeof i.impstring=="string"&&(e(i.impstring,i),n(r).triggerHandler("jqGridImportComplete",[i.impstring,i]),n.isFunction(i.importComplete)&&i.importComplete(i.impstring))}}});n.jgrid.extend({jqGridExport:function(t){t=n.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},t||{});var i=null;return this.each(function(){if(this.grid){var r=n.extend(!0,{},n(this).jqGrid("getGridParam"),t.addOptions);r.rownumbers&&(r.colNames.splice(0,1),r.colModel.splice(0,1));r.multiselect&&(r.colNames.splice(0,1),r.colModel.splice(0,1));r.subGrid&&(r.colNames.splice(0,1),r.colModel.splice(0,1));r.knv=null;switch(t.exptype){case"xmlstring":i="<"+t.root+">"+n.jgrid.jsonToXML(r,{xmlDecl:""})+"<\/"+t.root+">";break;case"jsonstring":i=n.jgrid.stringify(r);t.root&&(i="{"+t.root+":"+i+"}")}}}),i},excelExport:function(t){return t=n.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:!1,exportgrouping:!1,exportOptions:{}},t||{}),this.each(function(){var h,i,f,e,o,s;if(this.grid&&t.exptype==="remote"){if(i=n.extend({},this.p.postData),i[t.oper]=t.tag,n.isFunction(t.beforeExport)&&(e=t.beforeExport.call(this,i),n.isPlainObject(e)&&(i=e)),t.exporthidden){for(var u=this.p.colModel,l=u.length,c=[],r=0;r<l;r++)u[r].hidden===undefined&&(u[r].hidden=!1),c.push({name:u[r].name,hidden:u[r].hidden});o=JSON.stringify(c);typeof o=="string"&&(i.colModel=o)}t.exportgrouping&&(f=JSON.stringify(this.p.groupingView),typeof f=="string"&&(i.groupingView=f));s=jQuery.param(i);h=t.url.indexOf("?")!==-1?t.url+"&"+s:t.url+"?"+s;window.location=h}})}});n.jgrid.inlineEdit=n.jgrid.inlineEdit||{};n.jgrid.extend({editRow:function(t,i,r,u,f,e,o,s,h){var l={},a=n.makeArray(arguments).slice(1),c=this[0];return n.type(a[0])==="object"?l=a[0]:(i!==undefined&&(l.keys=i),n.isFunction(r)&&(l.oneditfunc=r),n.isFunction(u)&&(l.successfunc=u),f!==undefined&&(l.url=f),e!==undefined&&(l.extraparam=e),n.isFunction(o)&&(l.aftersavefunc=o),n.isFunction(s)&&(l.errorfunc=s),n.isFunction(h)&&(l.afterrestorefunc=h)),l=n.extend(!0,{keys:!1,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0,saveui:"enable",savetext:n.jgrid.getRegional(c,"defaults.savetext")},n.jgrid.inlineEdit,l),this.each(function(){var u,r,s,h=0,a=null,o={},f,i,e,v=n(this).jqGrid("getStyleUI",c.p.styleUI+".inlinedit","inputClass",!0);if(c.grid&&(f=n(c).jqGrid("getInd",t,!0),f!==!1)){if(c.p.beforeAction=!0,e=n.isFunction(l.beforeEditRow)?l.beforeEditRow.call(c,l,t):undefined,e===undefined&&(e=!0),!e){c.p.beforeAction=!1;return}if(s=n(f).attr("editable")||"0",s==="0"&&!n(f).hasClass("not-editable-row")&&(i=c.p.colModel,n('td[role="gridcell"]',f).each(function(f){var s,l,e;if(u=i[f].name,s=c.p.treeGrid===!0&&u===c.p.ExpandColumn,s)r=n("span:first",this).html();else try{r=n.unformat.call(c,this,{rowId:t,colModel:i[f]},f)}catch(y){r=i[f].edittype&&i[f].edittype==="textarea"?n(this).text():n(this).html()}u!=="cb"&&u!=="subgrid"&&u!=="rn"&&(c.p.autoencode&&(r=n.jgrid.htmlDecode(r)),o[u]=r,i[f].editable===!0&&(a===null&&(a=f),s?n("span:first",this).html(""):n(this).html(""),l=n.extend({},i[f].editoptions||{},{id:t+"_"+u,name:u,rowId:t,oper:"edit"}),i[f].edittype||(i[f].edittype="text"),(r==="&nbsp;"||r==="&#160;"||r.length===1&&r.charCodeAt(0)===160)&&(r=""),e=n.jgrid.createEl.call(c,i[f].edittype,l,r,!0,n.extend({},n.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{})),n(e).addClass("editable inline-edit-cell"),n.inArray(i[f].edittype,["text","textarea","password","select"])>-1&&n(e).addClass(v),s?n("span:first",this).append(e):n(this).append(e),n.jgrid.bindEv.call(c,e,l),i[f].edittype==="select"&&i[f].editoptions!==undefined&&i[f].editoptions.multiple===!0&&i[f].editoptions.dataUrl===undefined&&n.jgrid.msie()&&n(e).width(n(e).width()),h++))}),h>0)){if(o.id=t,c.p.savedRow.push(o),n(f).attr("editable","1"),l.focusField,l.keys===!0)n(f).on(l.keyevent,function(i){if(i.keyCode===27){if(n(c).jqGrid("restoreRow",t,l),c.p.inlineNav)try{n(c).jqGrid("showAddEditButtons")}catch(u){}return!1}if(i.keyCode===13){var r=i.target;if(r.tagName==="TEXTAREA")return!0;if(n(c).jqGrid("saveRow",t,l)&&c.p.inlineNav)try{n(c).jqGrid("showAddEditButtons")}catch(f){}return!1}});n(c).triggerHandler("jqGridInlineEditRow",[t,l]);n.isFunction(l.oneditfunc)&&l.oneditfunc.call(c,t)}}})},saveRow:function(t,i,r,u,f,e,o){var vt=n.makeArray(arguments).slice(1),h={},s=this[0],a,rt,nt,st,ht,y,ut,ft,et,ct,lt,tt,at;n.type(vt[0])==="object"?h=vt[0]:(n.isFunction(i)&&(h.successfunc=i),r!==undefined&&(h.url=r),u!==undefined&&(h.extraparam=u),n.isFunction(f)&&(h.aftersavefunc=f),n.isFunction(e)&&(h.errorfunc=e),n.isFunction(o)&&(h.afterrestorefunc=o));h=n.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:n.jgrid.getRegional(s,"defaults.savetext")},n.jgrid.inlineEdit,h);var k=!1,l,c={},d={},p={},yt,w,b,v,pt=!1,wt=n.trim(n(s).jqGrid("getStyleUI",s.p.styleUI+".common","error",!0));if(!s.grid||(v=n(s).jqGrid("getInd",t,!0),v===!1))return k;var it=n.jgrid.getRegional(s,"errors"),g=n.jgrid.getRegional(s,"edit"),ot=n.isFunction(h.beforeSaveRow)?h.beforeSaveRow.call(s,h,t):undefined;if(ot===undefined&&(ot=!0),ot){if(yt=n(v).attr("editable"),h.url=h.url||s.p.editurl,yt==="1"){if(n('td[role="gridcell"]',v).each(function(t){var i,u,r;if(a=s.p.colModel[t],l=a.name,nt="",l!=="cb"&&l!=="subgrid"&&a.editable===!0&&l!=="rn"&&!n(this).hasClass("not-editable-cell")){switch(a.edittype){case"checkbox":i=["Yes","No"];a.editoptions&&a.editoptions.value&&(i=a.editoptions.value.split(":"));c[l]=n("input",this).is(":checked")?i[0]:i[1];nt=n("input",this);break;case"text":case"password":case"textarea":case"button":c[l]=n("input, textarea",this).val();nt=n("input, textarea",this);break;case"select":a.editoptions.multiple?(u=n("select",this),r=[],c[l]=n(u).val(),c[l]=c[l]?c[l].join(","):"",n("select option:selected",this).each(function(t,i){r[t]=n(i).text()}),d[l]=r.join(",")):(c[l]=n("select option:selected",this).val(),d[l]=n("select option:selected",this).text());a.formatter&&a.formatter==="select"&&(d={});nt=n("select",this);break;case"custom":try{if(a.editoptions&&n.isFunction(a.editoptions.custom_value)){if(c[l]=a.editoptions.custom_value.call(s,n(".customelement",this),"get"),c[l]===undefined)throw"e2";}else throw"e1";}catch(f){f==="e1"?n.jgrid.info_dialog(it.errcap,"function 'custom_value' "+g.msg.nodefined,g.bClose,{styleUI:s.p.styleUI}):n.jgrid.info_dialog(it.errcap,f.message,g.bClose,{styleUI:s.p.styleUI})}}if(b=n.jgrid.checkValues.call(s,c[l],t),b[0]===!1)return rt=t,!1;s.p.autoencode&&(c[l]=n.jgrid.htmlEncode(c[l]));h.url!=="clientArray"&&a.editoptions&&a.editoptions.NullIfEmpty===!0&&c[l]===""&&(p[l]="null",pt=!0)}}),b[0]===!1){try{n.isFunction(s.p.validationCell)?s.p.validationCell.call(s,nt,b[1],v.rowIndex,rt):(st=n(s).jqGrid("getGridRowById",t),ht=n.jgrid.findPos(st),n.jgrid.info_dialog(it.errcap,b[1],g.bClose,{left:ht[0],top:ht[1]+n(st).outerHeight(),styleUI:s.p.styleUI,onClose:function(){rt>=0&&n("#"+t+"_"+s.p.colModel[rt].name).focus()}}))}catch(bt){alert(b[1])}return k}if(ut=s.p.prmNames,ft=t,y=s.p.keyName===!1?ut.id:s.p.keyName,c&&(c[ut.oper]=ut.editoper,c[y]===undefined||c[y]===""?c[y]=t:v.id!==s.p.idPrefix+c[y]&&(et=n.jgrid.stripPref(s.p.idPrefix,t),s.p._index[et]!==undefined&&(s.p._index[c[y]]=s.p._index[et],delete s.p._index[et]),t=s.p.idPrefix+c[y],n(v).attr("id",t),s.p.selrow===ft&&(s.p.selrow=t),n.isArray(s.p.selarrrow)&&(ct=n.inArray(ft,s.p.selarrrow),ct>=0&&(s.p.selarrrow[ct]=t)),s.p.multiselect&&(lt="jqg_"+s.p.id+"_"+t,n("input.cbox",v).attr("id",lt).attr("name",lt))),s.p.inlineData===undefined&&(s.p.inlineData={}),c=n.extend({},c,s.p.inlineData,h.extraparam)),h.url==="clientArray"){for(c=n.extend({},c,d),s.p.autoencode&&n.each(c,function(t,i){c[t]=n.jgrid.htmlDecode(i)}),at=n(s).jqGrid("setRowData",t,c),n(v).attr("editable","0"),tt=0;tt<s.p.savedRow.length;tt++)if(String(s.p.savedRow[tt].id)===String(ft)){w=tt;break}w>=0&&s.p.savedRow.splice(w,1);n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,at,c,h]);n.isFunction(h.aftersavefunc)&&h.aftersavefunc.call(s,t,at,c,h);k=!0;n(v).removeClass("jqgrid-new-row").off("keydown")}else n(s).jqGrid("progressBar",{method:"show",loadtype:h.saveui,htmlcontent:h.savetext}),p=n.extend({},c,p),p[y]=n.jgrid.stripPref(s.p.idPrefix,p[y]),n.ajax(n.extend({url:h.url,data:n.isFunction(s.p.serializeRowData)?s.p.serializeRowData.call(s,p):p,type:h.mtype,async:!1,complete:function(i,r){if(n(s).jqGrid("progressBar",{method:"hide",loadtype:h.saveui,htmlcontent:h.savetext}),r==="success"){var e=!0,u,f;if(u=n(s).triggerHandler("jqGridInlineSuccessSaveRow",[i,t,h]),n.isArray(u)||(u=[!0,p]),u[0]&&n.isFunction(h.successfunc)&&(u=h.successfunc.call(s,i)),n.isArray(u)?(e=u[0],c=u[1]||c):e=u,e===!0){for(s.p.autoencode&&n.each(c,function(t,i){c[t]=n.jgrid.htmlDecode(i)}),pt&&n.each(c,function(n){c[n]==="null"&&(c[n]="")}),c=n.extend({},c,d),n(s).jqGrid("setRowData",t,c),n(v).attr("editable","0"),f=0;f<s.p.savedRow.length;f++)if(String(s.p.savedRow[f].id)===String(t)){w=f;break}w>=0&&s.p.savedRow.splice(w,1);n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,i,c,h]);n.isFunction(h.aftersavefunc)&&h.aftersavefunc.call(s,t,i,c,h);k=!0;n(v).removeClass("jqgrid-new-row").off("keydown")}else n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,null,h]),n.isFunction(h.errorfunc)&&h.errorfunc.call(s,t,i,r,null),h.restoreAfterError===!0&&n(s).jqGrid("restoreRow",t,h)}},error:function(i,r,u){if(n("#lui_"+n.jgrid.jqID(s.p.id)).hide(),n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,u,h]),n.isFunction(h.errorfunc))h.errorfunc.call(s,t,i,r,u);else{var f=i.responseText||i.statusText;try{n.jgrid.info_dialog(it.errcap,'<div class="'+wt+'">'+f+"<\/div>",g.bClose,{buttonalign:"right",styleUI:s.p.styleUI})}catch(e){alert(f)}}h.restoreAfterError===!0&&n(s).jqGrid("restoreRow",t,h)}},n.jgrid.ajaxOptions,s.p.ajaxRowOptions||{}))}return k}},restoreRow:function(t,i){var u=n.makeArray(arguments).slice(1),r={};return n.type(u[0])==="object"?r=u[0]:n.isFunction(i)&&(r.afterrestorefunc=i),r=n.extend(!0,{},n.jgrid.inlineEdit,r),this.each(function(){var i=this,u=-1,e,s={},f,o;if(i.grid&&(e=n(i).jqGrid("getInd",t,!0),e!==!1)&&(o=n.isFunction(r.beforeCancelRow)?r.beforeCancelRow.call(i,r,t):undefined,o===undefined&&(o=!0),o)){for(f=0;f<i.p.savedRow.length;f++)if(String(i.p.savedRow[f].id)===String(t)){u=f;break}if(u>=0){if(n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker","#"+n.jgrid.jqID(e.id)).datepicker("hide")}catch(h){}n.each(i.p.colModel,function(){i.p.savedRow[u].hasOwnProperty(this.name)&&(s[this.name]=i.p.savedRow[u][this.name])});n(i).jqGrid("setRowData",t,s);n(e).attr("editable","0").off("keydown");i.p.savedRow.splice(u,1);n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(i.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){n(i).jqGrid("delRowData",t);n(i).jqGrid("showAddEditButtons")},0)}n(i).triggerHandler("jqGridInlineAfterRestoreRow",[t]);n.isFunction(r.afterrestorefunc)&&r.afterrestorefunc.call(i,t)}})},addRow:function(t){return t=n.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){var i,r,u,f;if(this.grid){if(i=this,i.p.beforeAction=!0,r=n.isFunction(t.beforeAddRow)?t.beforeAddRow.call(i,t.addRowParams):undefined,r===undefined&&(r=!0),!r){i.p.beforeAction=!1;return}t.rowID=n.isFunction(t.rowID)?t.rowID.call(i,t):t.rowID!=null?t.rowID:n.jgrid.randId();t.useDefValues===!0&&n(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,u=n.isFunction(r)?r.call(i):r;t.initdata[this.name]=u}});n(i).jqGrid("addRowData",t.rowID,t.initdata,t.position);t.rowID=i.p.idPrefix+t.rowID;n("#"+n.jgrid.jqID(t.rowID),"#"+n.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row");t.useFormatter?n("#"+n.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+n.jgrid.jqID(i.p.id)).click():(u=i.p.prmNames,f=u.oper,t.addRowParams.extraparam[f]=u.addoper,n(i).jqGrid("editRow",t.rowID,t.addRowParams),n(i).jqGrid("setSelection",t.rowID))}})},inlineNav:function(t,i){var r=this[0],f=n.jgrid.getRegional(r,"nav"),u=n.jgrid.styleUI[r.p.styleUI].inlinedit;return i=n.extend(!0,{edit:!0,editicon:u.icon_edit_nav,add:!0,addicon:u.icon_add_nav,save:!0,saveicon:u.icon_save_nav,cancel:!0,cancelicon:u.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0,saveAfterSelect:!1},f,i||{}),this.each(function(){var u,e,h,s,c,o;if(this.grid&&!this.p.inlineNav){if(u=n.jgrid.jqID(r.p.id),e=n.trim(n(r).jqGrid("getStyleUI",r.p.styleUI+".common","disabled",!0)),r.p.navGrid||n(r).jqGrid("navGrid",t,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),n(r).data("inlineNav")||n(r).data("inlineNav",i),r.p.force_regional&&(i=n.extend(i,f)),r.p.inlineNav=!0,i.addParams.useFormatter===!0)for(h=r.p.colModel,s=0;s<h.length;s++)if(h[s].formatter&&h[s].formatter==="actions"){h[s].formatoptions&&(c={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},o=n.extend(c,h[s].formatoptions),i.addParams.addRowParams={keys:o.keys,oneditfunc:o.onEdit,successfunc:o.onSuccess,url:o.url,extraparam:o.extraparam,aftersavefunc:o.afterSave,errorfunc:o.onError,afterrestorefunc:o.afterRestore});break}if(i.add&&n(r).jqGrid("navButtonAdd",t,{caption:i.addtext,title:i.addtitle,buttonicon:i.addicon,id:r.p.id+"_iladd",internal:!0,onClickButton:function(){r.p.beforeAction===undefined&&(r.p.beforeAction=!0);n(r).jqGrid("addRow",i.addParams);!i.addParams.useFormatter&&r.p.beforeAction&&(n("#"+u+"_ilsave").removeClass(e),n("#"+u+"_ilcancel").removeClass(e),n("#"+u+"_iladd").addClass(e),n("#"+u+"_iledit").addClass(e))}}),i.edit&&n(r).jqGrid("navButtonAdd",t,{caption:i.edittext,title:i.edittitle,buttonicon:i.editicon,id:r.p.id+"_iledit",internal:!0,onClickButton:function(){var t=n(r).jqGrid("getGridParam","selrow");t?(r.p.beforeAction===undefined&&(r.p.beforeAction=!0),n(r).jqGrid("editRow",t,i.editParams),r.p.beforeAction&&(n("#"+u+"_ilsave").removeClass(e),n("#"+u+"_ilcancel").removeClass(e),n("#"+u+"_iladd").addClass(e),n("#"+u+"_iledit").addClass(e))):(n.jgrid.viewModal("#alertmod_"+u,{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}}),i.save&&(n(r).jqGrid("navButtonAdd",t,{caption:i.savetext||"",title:i.savetitle||"Save row",buttonicon:i.saveicon,id:r.p.id+"_ilsave",internal:!0,onClickButton:function(){var t=r.p.savedRow[0].id;if(t){var f=r.p.prmNames,e=f.oper,o=i.editParams;n("#"+n.jgrid.jqID(t),"#"+u).hasClass("jqgrid-new-row")?(i.addParams.addRowParams.extraparam[e]=f.addoper,o=i.addParams.addRowParams):(i.editParams.extraparam||(i.editParams.extraparam={}),i.editParams.extraparam[e]=f.editoper);n(r).jqGrid("saveRow",t,o)&&n(r).jqGrid("showAddEditButtons")}else n.jgrid.viewModal("#alertmod_"+u,{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus()}}),n("#"+u+"_ilsave").addClass(e)),i.cancel&&(n(r).jqGrid("navButtonAdd",t,{caption:i.canceltext||"",title:i.canceltitle||"Cancel row editing",buttonicon:i.cancelicon,id:r.p.id+"_ilcancel",internal:!0,onClickButton:function(){var t=r.p.savedRow[0].id,f=i.editParams;t?(n("#"+n.jgrid.jqID(t),"#"+u).hasClass("jqgrid-new-row")&&(f=i.addParams.addRowParams),n(r).jqGrid("restoreRow",t,f),n(r).jqGrid("showAddEditButtons")):(n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}}),n("#"+u+"_ilcancel").addClass(e)),i.restoreAfterSelect===!0||i.saveAfterSelect===!0)n(r).on("jqGridBeforeSelectRow.inlineNav",function(t,u){r.p.savedRow.length>0&&r.p.inlineNav===!0&&u!==r.p.selrow&&r.p.selrow!==null&&(r.p.selrow===i.addParams.rowID?n(r).jqGrid("delRowData",r.p.selrow):i.restoreAfterSelect===!0?n(r).jqGrid("restoreRow",r.p.selrow,i.editParams):n(r).jqGrid("saveRow",r.p.selrow,i.editParams),n(r).jqGrid("showAddEditButtons"))})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var t=n.jgrid.jqID(this.p.id),i=n.trim(n(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));n("#"+t+"_ilsave").addClass(i);n("#"+t+"_ilcancel").addClass(i);n("#"+t+"_iladd").removeClass(i);n("#"+t+"_iledit").removeClass(i)}})},showSaveCancelButtons:function(){return this.each(function(){if(this.grid){var t=n.jgrid.jqID(this.p.id),i=n.trim(n(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));n("#"+t+"_ilsave").removeClass(i);n("#"+t+"_ilcancel").removeClass(i);n("#"+t+"_iladd").addClass(i);n("#"+t+"_iledit").addClass(i)}})}});n.jgrid.msie()&&n.jgrid.msiever()===8&&(n.expr[":"].hidden=function(n){return n.offsetWidth===0||n.offsetHeight===0||n.style.display==="none"});n.jgrid._multiselect=!1;n.ui&&n.ui.multiselect&&(n.ui.multiselect.prototype._setSelected&&(w=n.ui.multiselect.prototype._setSelected,n.ui.multiselect.prototype._setSelected=function(t,i){var u=w.call(this,t,i),r;return i&&this.selectedList&&(r=this.element,this.selectedList.find("li").each(function(){n(this).data("optionLink")&&n(this).data("optionLink").remove().appendTo(r)})),u}),n.ui.multiselect.prototype.destroy&&(n.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();n.Widget===undefined?n.widget.prototype.destroy.apply(this,arguments):n.Widget.prototype.destroy.apply(this,arguments)}),n.jgrid._multiselect=!0);n.jgrid.extend({sortableColumns:function(t){return this.each(function(){function o(){i.p.disableClick=!0}function s(){setTimeout(function(){i.p.disableClick=!1},50)}var i=this,u=n.jgrid.jqID(i.p.id),r={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+u+"_cb,#jqgh_"+u+"_rn,#jqgh_"+u+"_subgrid),:hidden)",placeholder:{element:function(t){return n(document.createElement(t[0].nodeName)).addClass(t[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(n,t){t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10));t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}},update:function(t,r){var e=n(r.item).parent(),o=n(">th",e),s=i.p.colModel,f={},h=i.p.id+"_",u;n.each(s,function(n){f[this.name]=n});u=[];o.each(function(){var t=n(">div",this).get(0).id.replace(/^jqgh_/,"").replace(h,"");f.hasOwnProperty(t)&&u.push(f[t])});n(i).jqGrid("remapColumns",u,!0,!0);n.isFunction(i.p.sortable.update)&&i.p.sortable.update(u)}},h,c,f,e;i.p.sortable.options?n.extend(r,i.p.sortable.options):n.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable});r.start?(h=r.start,r.start=function(n,t){o();h.call(this,n,t)}):r.start=o;r.stop?(c=r.stop,r.stop=function(n,t){s();c.call(this,n,t)}):r.stop=s;i.p.sortable.exclude&&(r.items+=":not("+i.p.sortable.exclude+")");f=t.sortable(r);e=f.data("sortable")||f.data("uiSortable");e!=null&&(e.data("sortable").floating=!0)})},columnChooser:function(t){function k(n,t,i){var r,u;return t>=0?(r=n.slice(),u=r.splice(t,Math.max(n.length-t,t)),t>n.length&&(t=n.length),r[t]=i,r.concat(u)):n}function s(t,i){t&&(typeof t=="string"?n.fn[t]&&n.fn[t].apply(i,n.makeArray(arguments).slice(2)):n.isFunction(t)&&t.apply(i,n.makeArray(arguments).slice(2)))}function y(){var n=v(r),t=n.container.closest(".ui-dialog-content");t.length>0&&typeof t[0].style=="object"?t[0].style.width="":t.css("width","");n.selectedList.height(Math.max(n.selectedContainer.height()-n.selectedActions.outerHeight()-1,1));n.availableList.height(Math.max(n.availableContainer.height()-n.availableActions.outerHeight()-1,1))}var i=this,f,r,h={},p=[],l,a,c,u,e,o=i.jqGrid("getGridParam","colModel"),w=i.jqGrid("getGridParam","colNames"),v=function(t){return n.ui.multiselect.prototype&&t.data(n.ui.multiselect.prototype.widgetFullName||n.ui.multiselect.prototype.widgetName)||t.data("ui-multiselect")||t.data("multiselect")},b=n.jgrid.getRegional(this[0],"col");if(!n("#colchooser_"+n.jgrid.jqID(i[0].p.id)).length){if(f=n('<div id="colchooser_'+i[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"><\/select><\/div><\/div>'),r=n("select",f),t=n.extend({width:400,height:240,classname:null,done:function(n){n&&i.jqGrid("remapColumns",n,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(t){var i={};return i[t.bSubmit]=function(){t.apply_perm();t.cleanup(!1)},i[t.bCancel]=function(){t.cleanup(!0)},n.extend(!0,{buttons:i,close:function(){t.cleanup(!0)},modal:t.modal||!1,resizable:t.resizable||!0,width:t.width+70,resize:y},t.dialog_opts||{})},apply_perm:function(){var u=[];n("option",r).each(function(){n(this).is(":selected")?i.jqGrid("showCol",o[this.value].name):i.jqGrid("hideCol",o[this.value].name)});n("option[selected]",r).each(function(){u.push(parseInt(this.value,10))});n.each(u,function(){delete h[o[parseInt(this,10)].name]});n.each(h,function(){var n=parseInt(this,10);u=k(u,n,n)});t.done&&t.done.call(i,u);i.jqGrid("setGridWidth",i[0].p.width,i[0].p.shrinkToFit)},cleanup:function(n){s(t.dlog,f,"destroy");s(t.msel,r,"destroy");f.remove();n&&t.done&&t.done.call(i)},msel_opts:{}},b,t||{}),n.ui&&n.ui.multiselect&&n.ui.multiselect.defaults){if(!n.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}t.msel_opts=n.extend(n.ui.multiselect.defaults,t.msel_opts)}t.caption&&f.attr("title",t.caption);t.classname&&(f.addClass(t.classname),r.addClass(t.classname));t.width&&(n(">div",f).css({width:t.width,margin:"0 auto"}),r.css("width",t.width));t.height&&(n(">div",f).css("height",t.height),r.css("height",t.height-10));r.empty();n.each(o,function(t){if(h[this.name]=t,this.hidedlg){this.hidden||p.push(t);return}r.append("<option value='"+t+"' "+(this.hidden?"":"selected='selected'")+">"+n.jgrid.stripHtml(w[t])+"<\/option>")});l=n.isFunction(t.dlog_opts)?t.dlog_opts.call(i,t):t.dlog_opts;s(t.dlog,f,l);a=n.isFunction(t.msel_opts)?t.msel_opts.call(i,t):t.msel_opts;s(t.msel,r,a);c=n("#colchooser_"+n.jgrid.jqID(i[0].p.id));c.css({margin:"auto"});c.find(">div").css({width:"100%",height:"100%",margin:"auto"});u=v(r);u.container.css({width:"100%",height:"100%",margin:"auto"});u.selectedContainer.css({width:u.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});u.availableContainer.css({width:100-u.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});u.selectedList.css("height","auto");u.availableList.css("height","auto");e=Math.max(u.selectedList.height(),u.availableList.height());e=Math.min(e,n(window).height());u.selectedList.css("height",e);u.availableList.css("height",e);y()}},sortableRows:function(t){return this.each(function(){var i=this;i.grid&&(i.p.treeGrid||n.fn.sortable&&(t=n.extend({cursor:"move",axis:"y",items:" > .jqgrow"},t||{}),t.start&&n.isFunction(t.start)?(t._start_=t.start,delete t.start):t._start_=!1,t.update&&n.isFunction(t.update)?(t._update_=t.update,delete t.update):t._update_=!1,t.start=function(r,u){if(n(u.item).css("border-width","0"),n("td",u.item).each(function(n){this.style.width=i.grid.cols[n].style.width}),i.p.subGrid){var f=n(u.item).attr("id");try{n(i).jqGrid("collapseSubGridRow",f)}catch(e){}}t._start_&&t._start_.apply(this,[r,u])},t.update=function(r,u){n(u.item).css("border-width","");i.p.rownumbers===!0&&n("td.jqgrid-rownum",i.rows).each(function(t){n(this).html(t+1+(parseInt(i.p.page,10)-1)*parseInt(i.p.rowNum,10))});t._update_&&t._update_.apply(this,[r,u])},n("tbody:first",i).sortable(t),n("tbody:first > .jqgrow",i).disableSelection()))})},gridDnD:function(t){return this.each(function(){function e(){var t=n.data(i,"dnd");n("tr.jqgrow:not(.ui-draggable)",i).draggable(n.isFunction(t.drag)?t.drag.call(n(i),t):t.drag)}var i=this,u,f,o,r;if(i.grid&&!i.p.treeGrid&&n.fn.draggable&&n.fn.droppable){if(o="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'><\/table>",n("#jqgrid_dnd")[0]===undefined&&n("body").append(o),typeof t=="string"&&t==="updateDnD"&&i.p.jqgdnd===!0){e();return}if(t=n.extend({drag:function(t){return n.extend({start:function(r,u){var f,e;if(i.p.subGrid){e=n(u.helper).attr("id");try{n(i).jqGrid("collapseSubGridRow",e)}catch(o){}}for(f=0;f<n.data(i,"dnd").connectWith.length;f++)n(n.data(i,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")===0&&n(n.data(i,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{});u.helper.addClass("ui-state-highlight");n("td",u.helper).each(function(n){this.style.width=i.grid.headers[n].width+"px"});t.onstart&&n.isFunction(t.onstart)&&t.onstart.call(n(i),r,u)},stop:function(r,u){var f,e;for(u.helper.dropped&&!t.dragcopy&&(e=n(u.helper).attr("id"),e===undefined&&(e=n(this).attr("id")),n(i).jqGrid("delRowData",e)),f=0;f<n.data(i,"dnd").connectWith.length;f++)n(n.data(i,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row");t.onstop&&n.isFunction(t.onstop)&&t.onstop.call(n(i),r,u)}},t.drag_opts||{})},drop:function(t){return n.extend({accept:function(t){if(!n(t).hasClass("jqgrow"))return t;if(r=n(t).closest("table.ui-jqgrid-btable"),r.length>0&&n.data(r[0],"dnd")!==undefined){var i=n.data(r[0],"dnd").connectWith;return n.inArray("#"+n.jgrid.jqID(this.id),i)!==-1?!0:!1}return!1},drop:function(i,u){var l,f,o,s;if(n(u.draggable).hasClass("jqgrow")){if(l=n(u.draggable).attr("id"),f=u.draggable.parent().parent().jqGrid("getRowData",l),!t.dropbyname){var c=0,a={},e,h,v=n("#"+n.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(h in f)f.hasOwnProperty(h)&&(e=v[c].name,e==="cb"||e==="rn"||e==="subgrid"||f.hasOwnProperty(h)&&v[c]&&(a[e]=f[h]),c++);f=a}catch(y){}}u.helper.dropped=!0;n.data(r[0],"dnd").beforedrop&&n.isFunction(n.data(r[0],"dnd").beforedrop)&&(o=n.data(r[0],"dnd").beforedrop.call(this,i,u,f,n(r[0]),n(this)),o!==undefined&&o!==null&&typeof o=="object"&&(f=o));u.helper.dropped&&(t.autoid&&(n.isFunction(t.autoid)?s=t.autoid.call(this,f):(s=Math.ceil(Math.random()*1e3),s=t.autoidprefix+s)),n("#"+n.jgrid.jqID(this.id)).jqGrid("addRowData",s,f,t.droppos));t.ondrop&&n.isFunction(t.ondrop)&&t.ondrop.call(this,i,u,f)}}},t.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},t||{}),t.connectWith)for(t.connectWith=t.connectWith.split(","),t.connectWith=n.map(t.connectWith,function(t){return n.trim(t)}),n.data(i,"dnd",t),i.p.reccount===0||i.p.jqgdnd||e(),i.p.jqgdnd=!0,u=0;u<t.connectWith.length;u++)f=t.connectWith[u],n(f).droppable(n.isFunction(t.drop)?t.drop.call(n(i),t):t.drop)}})},gridResize:function(t){return this.each(function(){var i=this,r=n.jgrid.jqID(i.p.id),u,f;i.grid&&n.fn.resizable&&(t=n.extend({},t||{}),t.alsoResize?(t._alsoResize_=t.alsoResize,delete t.alsoResize):t._alsoResize_=!1,t.stop&&n.isFunction(t.stop)?(t._stop_=t.stop,delete t.stop):t._stop_=!1,t.stop=function(f,e){n(i).jqGrid("setGridParam",{height:n("#gview_"+r+" .ui-jqgrid-bdiv").height()});n(i).jqGrid("setGridWidth",e.size.width,t.shrinkToFit);t._stop_&&t._stop_.call(i,f,e);i.p.caption&&n("#gbox_"+r).css({height:"auto"});i.p.frozenColumns&&(u&&clearTimeout(u),u=setTimeout(function(){u&&clearTimeout(u);n("#"+r).jqGrid("destroyFrozenColumns");n("#"+r).jqGrid("setFrozenColumns")}))},t._alsoResize_?(f="{'#gview_"+r+" .ui-jqgrid-bdiv':true,'"+t._alsoResize_+"':true}",t.alsoResize=eval("("+f+")")):t.alsoResize=n(".ui-jqgrid-bdiv","#gview_"+r),delete t._alsoResize_,n("#gbox_"+r).resizable(t))})}});n.assocArraySize=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t};n.jgrid.extend({pivotSetup:function(t,i){var u=[],e=[],h=[],s=[],c=[],o={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},f=[],r=n.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},i||{});return this.each(function(){function dt(n,t,i){var r;return r=nt.call(n,t,i),r.length>0?r[0]:null}function gt(n,t){var i=0,r=!0;for(var u in n)if(n.hasOwnProperty(u)){if(n[u]!=this[i]){r=!1;break}if(i++,i>=this.length)break}return r&&(g=t),r}function ni(t,i,r,u,f){var e;if(n.isFunction(t))e=t.call(bt,i,r,u);else switch(t){case"sum":e=parseFloat(i||0)+parseFloat(u[r]||0);break;case"count":(i===""||i==null)&&(i=0);e=u.hasOwnProperty(r)?i+1:0;break;case"min":e=i===""||i==null?parseFloat(u[r]||0):Math.min(parseFloat(i),parseFloat(u[r]||0));break;case"max":e=i===""||i==null?parseFloat(u[r]||0):Math.max(parseFloat(i),parseFloat(u[r]||0));break;case"avg":e=(parseFloat(i||0)*(f-1)+parseFloat(u[r]||0))/f}return e}function ot(t,i,r,u){var k=i.length,o,f,h,p,w="",l=[],v,d=1,a,b,y;for(n.isArray(r)?(p=r.length,l=r):(p=1,l[0]=r),s=[],c=[],s.root=0,h=0;h<p;h++){for(b=[],o=0;o<k;o++){if(v=typeof i[o].aggregator=="string"?i[o].aggregator:"cust",r==null)f=n.trim(i[o].member)+"_"+v,y=f,l[0]=i[o].label||v+" "+n.trim(i[o].member);else{y=r[h].replace(/\s+/g,"");try{f=k===1?w+y:w+y+"_"+v+"_"+String(o)}catch(nt){}l[h]=r[h]}f=isNaN(parseInt(f,10))?f:f+" ";i[o].aggregator==="avg"&&(a=g===-1?e.length+"_"+f:g+"_"+f,ut[a]?ut[a]++:ut[a]=1,d=ut[a]);u[f]=b[f]=ni(i[o].aggregator,u[f],i[o].member,t,d)}w+=r&&r[h]!=null?r[h].replace(/\s+/g,""):"";s[f]=b;c[f]=l[h]}return u}function wt(n){var e,o,t,h,i,s,c,l,v,y;for(t in n)if(n.hasOwnProperty(t)){if(typeof n[t]!="object"){if(t==="level"){if(ft[n.level]===undefined&&(ft[n.level]="",n.level>0&&n.text.indexOf("_r_Totals")===-1&&(f[n.level-1]={useColSpanStyle:!1,groupHeaders:[]})),ft[n.level]!==n.text&&n.children.length&&n.text.indexOf("_r_Totals")===-1&&n.level>0){if(f[n.level-1].groupHeaders.push({titleText:n.label,numberOfColumns:0}),s=f[n.level-1].groupHeaders.length-1,c=s===0?ti:yt,n.level-1==(r.rowTotals?1:0)&&s>0){for(l=0,v=0;v<s;v++)l+=f[n.level-1].groupHeaders[v].numberOfColumns;l&&(c=l+w)}u[c]&&(f[n.level-1].groupHeaders[s].startColumnName=u[c].name,f[n.level-1].groupHeaders[s].numberOfColumns=u.length-c);yt=u.length}ft[n.level]=n.text}if(n.level===a&&t==="level"&&a>0)if(et>1){y=1;for(e in n.fields)n.fields.hasOwnProperty(e)&&(y===1&&f[a-1].groupHeaders.push({startColumnName:e,numberOfColumns:1,titleText:n.label||n.text}),y++);f[a-1].groupHeaders[f[a-1].groupHeaders.length-1].numberOfColumns=y-1}else f.splice(a-1,1)}if(n[t]!=null&&typeof n[t]=="object"&&wt(n[t]),t==="level"&&n.level>0&&(n.level===(a===0?n.level:a)||ft[n.level].indexOf("_r_Totals")!==-1)){o=0;for(e in n.fields)if(n.fields.hasOwnProperty(e)){i={};for(h in r.aggregates[o])if(r.aggregates[o].hasOwnProperty(h))switch(h){case"member":case"label":case"aggregator":break;default:i[h]=r.aggregates[o][h]}et>1?(i.name=e,i.label=r.aggregates[o].label||n.label):(i.name=n.text,i.label=n.text==="_r_Totals"?r.rowTotalsText:n.label);u.push(i);o++}}}}var bt=this,p,g,i,kt=t.length,w,a,et,b,k,lt=0,pt,st,tt,v,l,it,ct;if(r.rowTotals&&r.yDimension.length>0&&(pt=r.yDimension[0].dataName,r.yDimension.splice(0,0,{dataName:pt}),r.yDimension[0].converter=function(){return"_r_Totals"}),w=n.isArray(r.xDimension)?r.xDimension.length:0,a=r.yDimension.length,et=n.isArray(r.aggregates)?r.aggregates.length:0,w===0||et===0)throw"xDimension or aggregates optiona are not set!";for(i=0;i<w;i++)st={name:r.xDimension[i].dataName,frozen:r.frozenStaticCols},r.xDimension[i].isGroupField==null&&(r.xDimension[i].isGroupField=!0),st=n.extend(!0,st,r.xDimension[i]),u.push(st);for(var at=w-1,rt={},ut=[];lt<kt;){p=t[lt];tt=[];v=[];b={};i=0;do tt[i]=n.trim(p[r.xDimension[i].dataName]),b[r.xDimension[i].dataName]=tt[i],i++;while(i<w);if(l=0,g=-1,k=dt(e,gt,tt),k){if(g>=0){if(l=0,a>=1){for(l=0;l<a;l++)v[l]=n.trim(p[r.yDimension[l].dataName]),r.yDimension[l].converter&&n.isFunction(r.yDimension[l].converter)&&(v[l]=r.yDimension[l].converter.call(this,v[l],tt,v));k=ot(p,r.aggregates,v,k)}else a===0&&(k=ot(p,r.aggregates,null,k));e[g]=k}}else{if(l=0,a>=1){for(l=0;l<a;l++)v[l]=n.trim(p[r.yDimension[l].dataName]),r.yDimension[l].converter&&n.isFunction(r.yDimension[l].converter)&&(v[l]=r.yDimension[l].converter.call(this,v[l],tt,v));b=ot(p,r.aggregates,v,b)}else a===0&&(b=ot(p,r.aggregates,null,b));e.push(b)}var vt=0,y=null,ht=null;for(var d in s)if(s.hasOwnProperty(d)){if(vt===0)rt.children&&rt.children!==undefined||(rt={text:d,level:0,children:[],label:d}),y=rt.children;else{for(ht=null,i=0;i<y.length;i++)if(y[i].text===d){ht=y[i];break}ht?y=ht.children:(y.push({children:[],text:d,level:vt,fields:s[d],label:c[d]}),y=y[y.length-1].children)}vt++}lt++}ut=null;var ft=[],yt=u.length,ti=yt;if(a>0&&(f[a-1]={useColSpanStyle:!1,groupHeaders:[]}),wt(rt),r.colTotals)for(ct=e.length;ct--;)for(i=w;i<u.length;i++)it=u[i].name,h[it]?h[it]+=parseFloat(e[ct][it]||0):h[it]=parseFloat(e[ct][it]||0);if(at>0)for(i=0;i<at;i++)u[i].isGroupField&&(o.groupingView.groupField.push(u[i].name),o.groupingView.groupSummary.push(r.groupSummary),o.groupingView.groupSummaryPos.push(r.groupSummaryPos));else o.grouping=!1;o.sortname=u[at].name;o.groupingView.hideFirstGroupCol=!0}),{colModel:u,rows:e,groupOptions:o,groupHeaders:f,summary:h}},jqPivot:function(t,i,r,u){return this.each(function(){function e(t){var l;if(!n.isArray(t))throw"data provides is not an array";var e=jQuery(f).jqGrid("pivotSetup",t,i),a=n.assocArraySize(e.summary)>0?!0:!1,h=n.jgrid.from.call(f,e.rows),u,c,o,s;for(i.ignoreCase&&(h=h.ignoreCase()),u=0;u<e.groupOptions.groupingView.groupField.length;u++)c=i.xDimension[u].sortorder?i.xDimension[u].sortorder:"asc",o=i.xDimension[u].sorttype?i.xDimension[u].sorttype:"text",h.orderBy(e.groupOptions.groupingView.groupField[u],c,o,"",o);if(s=i.xDimension.length,r.sortname){for(c=r.sortorder?r.sortorder:"asc",o="text",u=0;u<s;u++)if(i.xDimension[u].dataName===r.sortname){o=i.xDimension[u].sorttype?i.xDimension[u].sorttype:"text";break}h.orderBy(r.sortname,c,o,"",o)}else e.groupOptions.sortname&&s&&(c=i.xDimension[s-1].sortorder?i.xDimension[s-1].sortorder:"asc",o=i.xDimension[s-1].sorttype?i.xDimension[s-1].sorttype:"text",h.orderBy(e.groupOptions.sortname,c,o,"",o));if(jQuery(f).jqGrid(n.extend(!0,{datastr:n.extend(h.select(),a?{userdata:e.summary}:{}),datatype:"jsonstring",footerrow:a,userDataOnFooter:a,colModel:e.colModel,viewrecords:!0,sortname:i.xDimension[0].dataName},e.groupOptions,r||{})),l=e.groupHeaders,l.length)for(u=0;u<l.length;u++)l[u]&&l[u].groupHeaders.length&&jQuery(f).jqGrid("setGroupHeaders",l[u]);i.frozenStaticCols&&jQuery(f).jqGrid("setFrozenColumns")}var f=this;typeof t=="string"?n.ajax(n.extend({url:t,dataType:"json",success:function(t){e(n.jgrid.getAccessor(t,u&&u.reader?u.reader:"rows"))}},u||{})):e(t)})}});n.jgrid.extend({setSubGrid:function(){return this.each(function(){var t=this,i,r,u=n.jgrid.styleUI[t.p.styleUI||"jQueryUI"].subgrid,f={plusicon:u.icon_plus,minusicon:u.icon_minus,openicon:u.icon_open,expandOnLoad:!1,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(t.p.subGridOptions=n.extend(f,t.p.subGridOptions||{}),t.p.colNames.unshift(""),t.p.colModel.unshift({name:"subgrid",width:n.jgrid.cell_width?t.p.subGridWidth+t.p.cellLayout:t.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),i=t.p.subGridModel,i[0])for(i[0].align=n.extend([],i[0].align||[]),r=0;r<i[0].name.length;r++)i[0].align[r]=i[0].align[r]||"left"})},addSubGridCell:function(t,i){var r="",u,f,e;return this.each(function(){r=this.formatCol(t,i);f=this.p.id;u=this.p.subGridOptions.plusicon;e=n.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common}),'<td role="gridcell" aria-describedby="'+f+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+r+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+e.icon_base+" "+u+"'><\/span><\/a><\/td>"},addSubGrid:function(t,i){return this.each(function(){var r=this;if(r.grid){var c=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].base,s=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].common,l=function(t,i,u){var f=n("<td align='"+r.p.subGridModel[0].align[u]+"'><\/td>").html(i);n(t).append(f)},v=function(t,i){for(var o,e,h=n("<table class='"+c.rowTable+" ui-common-table'><tbody><\/tbody><\/table>"),f=n("<tr><\/tr>"),a,u=0;u<r.p.subGridModel[0].name.length;u++)o=n("<th class='"+c.headerBox+" ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(o).html(r.p.subGridModel[0].name[u]),n(o).width(r.p.subGridModel[0].width[u]),n(f).append(o);return n(h).append(f),t&&(e=r.p.xmlReader.subgrid,n(e.root+" "+e.row,t).each(function(){if(f=n("<tr class='"+s.content+" ui-subtblcell'><\/tr>"),e.repeatitems===!0)n(e.cell,this).each(function(t){l(f,n(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(u=0;u<t.length;u++)l(f,n(t[u],this).text()||"&#160;",u)}n(h).append(f)})),a=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(a+i)).append(h),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},y=function(t,i){for(var a,v,e,h,u,p=n("<table class='"+c.rowTable+" ui-common-table'><tbody><\/tbody><\/table>"),o=n("<tr><\/tr>"),y,w,f=0;f<r.p.subGridModel[0].name.length;f++)a=n("<th class='"+c.headerBox+" ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(a).html(r.p.subGridModel[0].name[f]),n(a).width(r.p.subGridModel[0].width[f]),n(o).append(a);if(n(p).append(o),t&&(h=r.p.jsonReader.subgrid,v=n.jgrid.getAccessor(t,h.root),v!==undefined))for(f=0;f<v.length;f++){if(e=v[f],o=n("<tr class='"+s.content+" ui-subtblcell'><\/tr>"),h.repeatitems===!0)for(h.cell&&(e=e[h.cell]),u=0;u<e.length;u++)l(o,e[u]||"&#160;",u);else if(y=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name,y.length)for(u=0;u<y.length;u++)l(o,e[y[u]]||"&#160;",u);n(p).append(o)}return w=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(w+i)).append(p),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},k=function(t){var f,i,u,e;if(f=n(t).attr("id"),i={nd_:(new Date).getTime()},i[r.p.prmNames.subgridid]=f,!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(e=0;e<r.p.subGridModel[0].params.length;e++)for(u=0;u<r.p.colModel.length;u++)r.p.colModel[u].name===r.p.subGridModel[0].params[e]&&(i[r.p.colModel[u].name]=n("td:eq("+u+")",t).text().replace(/\&#160\;/ig,""));if(!r.grid.hDiv.loading){r.grid.hDiv.loading=!0;n("#load_"+n.jgrid.jqID(r.p.id)).show();r.p.subgridtype||(r.p.subgridtype=r.p.datatype);n.isFunction(r.p.subgridtype)?r.p.subgridtype.call(r,i):r.p.subgridtype=r.p.subgridtype.toLowerCase();switch(r.p.subgridtype){case"xml":case"json":n.ajax(n.extend({type:r.p.mtype,url:n.isFunction(r.p.subGridUrl)?r.p.subGridUrl.call(r,i):r.p.subGridUrl,dataType:r.p.subgridtype,data:n.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData.call(r,i):i,complete:function(t){r.p.subgridtype==="xml"?v(t.responseXML,f):y(n.jgrid.parse(t.responseText),f);t=null}},n.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}}return!1},u,e,p,w=0,f,h;n.each(r.p.colModel,function(){(this.hidden===!0||this.name==="rn"||this.name==="cb")&&w++});var b=r.rows.length,o=1,a,d=n.isFunction(r.p.isHasSubGrid);for(i!==undefined&&i>0&&(o=i,b=i+1);o<b;){if(n(r.rows[o]).hasClass("jqgrow"))if(r.p.scroll&&n(r.rows[o].cells[t]).off("click"),a=null,d&&(a=r.p.isHasSubGrid.call(r,r.rows[o].id)),a===!1)r.rows[o].cells[t].innerHTML="";else n(r.rows[o].cells[t]).on("click",function(){var i=n(this).parent("tr")[0];if(e=r.p.id,u=i.id,h=n("#"+e+"_"+u+"_expandedContent"),n(this).hasClass("sgcollapsed")){if(f=n(r).triggerHandler("jqGridSubGridBeforeExpand",[e+"_"+u,u]),f=f===!1||f==="stop"?!1:!0,f&&n.isFunction(r.p.subGridBeforeExpand)&&(f=r.p.subGridBeforeExpand.call(r,e+"_"+u,u)),f===!1)return!1;r.p.subGridOptions.reloadOnExpand!==!0&&(r.p.subGridOptions.reloadOnExpand!==!1||h.hasClass("ui-subgrid"))?h.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"):(p=t>=1?"<td colspan='"+t+"'>&#160;<\/td>":"",n(i).after("<tr role='row' id='"+e+"_"+u+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+p+"<td class='"+s.content+" subgrid-cell'><span class='"+s.icon_base+" "+r.p.subGridOptions.openicon+"'><\/span><\/td><td colspan='"+parseInt(r.p.colNames.length-1-w,10)+"' class='"+s.content+" subgrid-data'><div id="+e+"_"+u+" class='tablediv'><\/div><\/td><\/tr>"),n(r).triggerHandler("jqGridSubGridRowExpanded",[e+"_"+u,u]),n.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,e+"_"+u,u):k(i));n(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+s.icon_base+" "+r.p.subGridOptions.minusicon+"'><\/span><\/a>").removeClass("sgcollapsed").addClass("sgexpanded");r.p.subGridOptions.selectOnExpand&&n(r).jqGrid("setSelection",u)}else if(n(this).hasClass("sgexpanded")){if(f=n(r).triggerHandler("jqGridSubGridRowColapsed",[e+"_"+u,u]),f=f===!1||f==="stop"?!1:!0,f&&n.isFunction(r.p.subGridRowColapsed)&&(f=r.p.subGridRowColapsed.call(r,e+"_"+u,u)),f===!1)return!1;r.p.subGridOptions.reloadOnExpand===!0?h.remove(".ui-subgrid"):h.hasClass("ui-subgrid")&&h.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded");n(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+s.icon_base+" "+r.p.subGridOptions.plusicon+"'><\/span><\/a>").removeClass("sgexpanded").addClass("sgcollapsed");r.p.subGridOptions.selectOnCollapse&&n(r).jqGrid("setSelection",u)}return!1});o++}r.p.subGridOptions.expandOnLoad===!0&&n(r.rows).filter(".jqgrow").each(function(t,i){n(i.cells[0]).click()});r.subGridXml=function(n,t){v(n,t)};r.subGridJson=function(n,t){y(n,t)}}})},expandSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&u.p.subGrid===!0&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgcollapsed",i)[0],r&&n(r).trigger("click")))})},collapseSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&u.p.subGrid===!0&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgexpanded",i)[0],r&&n(r).trigger("click")))})},toggleSubGridRow:function(t){return this.each(function(){var u=this,r,i;(u.grid||t)&&u.p.subGrid===!0&&(r=n(this).jqGrid("getInd",t,!0),r&&(i=n("td.sgcollapsed",r)[0],i?n(i).trigger("click"):(i=n("td.sgexpanded",r)[0],i&&n(i).trigger("click"))))})}});n.jgrid.extend({setTreeNode:function(t,i){return this.each(function(){var r=this,k,d,g;if(r.grid&&r.p.treeGrid){var l=r.p.expColInd,e=r.p.treeReader.expanded_field,f=r.p.treeReader.leaf_field,nt=r.p.treeReader.level_field,a=r.p.treeReader.icon_field,o=r.p.treeReader.loaded,w,b,s,v,y,h,u,p,tt=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].common,c=t;for(n(r).triggerHandler("jqGridBeforeSetTreeNode",[c,i]),n.isFunction(r.p.beforeSetTreeNode)&&r.p.beforeSetTreeNode.call(r,c,i);t<i;){k=n.jgrid.stripPref(r.p.idPrefix,r.rows[t].id);d=r.p._index[k];u=r.p.data[d];r.p.treeGridModel==="nested"&&(u[f]||(w=parseInt(u[r.p.treeReader.left_field],10),b=parseInt(u[r.p.treeReader.right_field],10),u[f]=b===w+1?"true":"false",r.rows[t].cells[r.p._treeleafpos].innerHTML=u[f]));s=parseInt(u[nt],10);r.p.tree_root_level===0?(v=s+1,y=s):(v=s,y=s-1);h="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+v*18+"px;'>";h+="<div style='"+(r.p.direction==="rtl"?"right:":"left:")+y*18+"px;' class='"+tt.icon_base+" ";u[o]!==undefined&&(u[o]=u[o]==="true"||u[o]===!0?!0:!1);u[f]==="true"||u[f]===!0?(h+=(u[a]!==undefined&&u[a]!==""?u[a]:r.p.treeIcons.leaf)+" tree-leaf treeclick",u[f]=!0,p="leaf"):(u[f]=!1,p="");u[e]=(u[e]==="true"||u[e]===!0?!0:!1)&&(u[o]||u[o]===undefined);h+=u[e]===!1?u[f]===!0?"'":r.p.treeIcons.plus+" tree-plus treeclick'":u[f]===!0?"'":r.p.treeIcons.minus+" tree-minus treeclick'";h+="><\/div><\/div>";n(r.rows[t].cells[l]).wrapInner("<span class='cell-wrapper"+p+"'><\/span>").prepend(h);s!==parseInt(r.p.tree_root_level,10)&&(g=n(r).jqGrid("isVisibleNode",u),g||n(r.rows[t]).css("display","none"));n(r.rows[t].cells[l]).find("div.treeclick").on("click",function(t){var u=t.target||t.srcElement,o=n.jgrid.stripPref(r.p.idPrefix,n(u,r.rows).closest("tr.jqgrow")[0].id),i=r.p._index[o];return r.p.data[i][f]||(r.p.data[i][e]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),!1});if(r.p.ExpandColClick===!0)n(r.rows[t].cells[l]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(t){var o=t.target||t.srcElement,u=n.jgrid.stripPref(r.p.idPrefix,n(o,r.rows).closest("tr.jqgrow")[0].id),i=r.p._index[u];return r.p.data[i][f]||(r.p.data[i][e]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),n(r).jqGrid("setSelection",u),!1});t++}n(r).triggerHandler("jqGridAfterSetTreeNode",[c,i]);n.isFunction(r.p.afterSetTreeNode)&&r.p.afterSetTreeNode.call(r,c,i)}})},setTreeGrid:function(){return this.each(function(){var t=this,i=0,u,s=!1,r,f,e,h=[],o=n.jgrid.styleUI[t.p.styleUI||"jQueryUI"].treegrid;if(t.p.treeGrid){t.p.treedatatype||n.extend(t.p,{treedatatype:t.p.datatype});t.p.loadonce&&(t.p.treedatatype="local");t.p.subGrid=!1;t.p.altRows=!1;t.p.pgbuttons=!1;t.p.pginput=!1;t.p.gridview=!0;t.p.rowTotal===null&&(t.p.rowNum=1e4);t.p.multiselect=!1;t.p.rowList=[];t.p.expColInd=0;u=o.icon_plus;t.p.styleUI==="jQueryUI"&&(u+=t.p.direction==="rtl"?"w":"e");t.p.treeIcons=n.extend({plus:u,minus:o.icon_minus,leaf:o.icon_leaf},t.p.treeIcons||{});t.p.treeGridModel==="nested"?t.p.treeReader=n.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader):t.p.treeGridModel==="adjacency"&&(t.p.treeReader=n.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader));for(f in t.p.colModel)if(t.p.colModel.hasOwnProperty(f)){r=t.p.colModel[f].name;r!==t.p.ExpandColumn||s||(s=!0,t.p.expColInd=i);i++;for(e in t.p.treeReader)t.p.treeReader.hasOwnProperty(e)&&t.p.treeReader[e]===r&&h.push(r)}n.each(t.p.treeReader,function(r,u){u&&n.inArray(u,h)===-1&&(r==="leaf_field"&&(t.p._treeleafpos=i),i++,t.p.colNames.push(u),t.p.colModel.push({name:u,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=n(i).jqGrid("getNodeChildren",t),e=i.p.treeReader.expanded_field,f=t[i.p.localReader.id],u=n(i).triggerHandler("jqGridBeforeExpandTreeGridRow",[f,t,r]);(u===undefined&&(u=!0),u&&n.isFunction(i.p.beforeExpandTreeGridRow)&&(u=i.p.beforeExpandTreeGridRow.call(i,f,t,r)),u!==!1)&&(n(r).each(function(){var t=i.p.idPrefix+n.jgrid.getAccessor(this,i.p.localReader.id);n(n(i).jqGrid("getGridRowById",t)).css("display","");this[e]&&n(i).jqGrid("expandRow",this)}),n(i).triggerHandler("jqGridAfterExpandTreeGridRow",[f,t,r]),n.isFunction(i.p.afterExpandTreeGridRow)&&i.p.afterExpandTreeGridRow.call(i,f,t,r))}})},collapseRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=n(i).jqGrid("getNodeChildren",t),e=i.p.treeReader.expanded_field,f=t[i.p.localReader.id],u=n(i).triggerHandler("jqGridBeforeCollapseTreeGridRow",[f,t,r]);(u===undefined&&(u=!0),u&&n.isFunction(i.p.beforeCollapseTreeGridRow)&&(u=i.p.beforeCollapseTreeGridRow.call(i,f,t,r)),u!==!1)&&(n(r).each(function(){var t=i.p.idPrefix+n.jgrid.getAccessor(this,i.p.localReader.id);n(n(i).jqGrid("getGridRowById",t)).css("display","none");this[e]&&n(i).jqGrid("collapseRow",this)}),n(i).triggerHandler("jqGridAfterCollapseTreeGridRow",[f,t,r]),n.isFunction(i.p.afterCollapseTreeGridRow)&&i.p.afterCollapseTreeGridRow.call(i,f,t,r))}})},getRootNodes:function(t){var i=[];return this.each(function(){var r=this,e,u,f;if(r.grid&&r.p.treeGrid){typeof t!="boolean"&&(t=!1);f=t?n(r).jqGrid("getRowData",null,!0):r.p.data;switch(r.p.treeGridModel){case"nested":e=r.p.treeReader.level_field;n(f).each(function(){parseInt(this[e],10)===parseInt(r.p.tree_root_level,10)&&(t?i.push(r.p.data[r.p._index[this[r.p.keyName]]]):i.push(this))});break;case"adjacency":u=r.p.treeReader.parent_id_field;n(f).each(function(){(this[u]===null||String(this[u]).toLowerCase()==="null")&&(t?i.push(r.p.data[r.p._index[this[r.p.keyName]]]):i.push(this))})}}}),i},getNodeDepth:function(t){var i=null;return this.each(function(){var r,u;if(this.grid&&this.p.treeGrid){r=this;switch(r.p.treeGridModel){case"nested":u=r.p.treeReader.level_field;i=parseInt(t[u],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":i=n(r).jqGrid("getNodeAncestors",t).length}}}),i},getNodeParent:function(t){var i=null;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var f=r.p.treeReader.left_field,e=r.p.treeReader.right_field,o=r.p.treeReader.level_field,h=parseInt(t[f],10),c=parseInt(t[e],10),l=parseInt(t[o],10);n(this.p.data).each(function(){if(parseInt(this[o],10)===l-1&&parseInt(this[f],10)<h&&parseInt(this[e],10)>c)return i=this,!1});break;case"adjacency":for(var a=r.p.treeReader.parent_id_field,s=r.p.localReader.id,v=t[s],u=r.p._index[v];u--;)if(String(r.p.data[u][s])===String(n.jgrid.stripPref(r.p.idPrefix,t[a]))){i=r.p.data[u];break}}}),i},getNodeChildren:function(t,i){var r=[];return this.each(function(){var u=this,f,o,e,l,a;if(u.grid&&u.p.treeGrid){o=i?this.rows.length:this.p.data.length;switch(u.p.treeGridModel){case"nested":var s=u.p.treeReader.left_field,h=u.p.treeReader.right_field,c=u.p.treeReader.level_field,v=parseInt(t[s],10),y=parseInt(t[h],10),p=parseInt(t[c],10);for(f=0;f<o;f++)e=i?u.p.data[u.p._index[this.rows[f].id]]:u.p.data[f],e&&parseInt(e[c],10)===p+1&&parseInt(e[s],10)>v&&parseInt(e[h],10)<y&&r.push(e);break;case"adjacency":for(l=u.p.treeReader.parent_id_field,a=u.p.localReader.id,f=0;f<o;f++)e=i?u.p.data[u.p._index[this.rows[f].id]]:u.p.data[f],e&&String(e[l])===String(n.jgrid.stripPref(u.p.idPrefix,t[a]))&&r.push(e)}}}),r},getFullTreeNode:function(t,i){var r=[];return this.each(function(){var u=this,e,o=u.p.treeReader.expanded_field,h,c;if(u.grid&&u.p.treeGrid){(i==null||typeof i!="boolean")&&(i=!1);switch(u.p.treeGridModel){case"nested":var f=u.p.treeReader.left_field,l=u.p.treeReader.right_field,s=u.p.treeReader.level_field,a=parseInt(t[f],10),v=parseInt(t[l],10),y=parseInt(t[s],10);n(this.p.data).each(function(){parseInt(this[s],10)>=y&&parseInt(this[f],10)>=a&&parseInt(this[f],10)<=v&&(i&&(this[o]=!0),r.push(this))});break;case"adjacency":t&&(r.push(t),h=u.p.treeReader.parent_id_field,c=u.p.localReader.id,n(this.p.data).each(function(t){for(e=r.length,t=0;t<e;t++)if(String(n.jgrid.stripPref(u.p.idPrefix,r[t][c]))===String(this[h])){i&&(this[o]=!0);r.push(this);break}}))}}}),r},getNodeAncestors:function(t,i,r){var u=[];return i===undefined&&(i=!1),this.each(function(){if(this.grid&&this.p.treeGrid){r=r===undefined?!1:this.p.treeReader.expanded_field;for(var f=n(this).jqGrid("getNodeParent",t);f;){if(r)try{f[r]=!0}catch(e){}i?u.unshift(f):u.push(f);f=n(this).jqGrid("getNodeParent",f)}}}),u},isVisibleNode:function(t){var i=!0;return this.each(function(){var r=this,u,f;r.grid&&r.p.treeGrid&&(u=n(r).jqGrid("getNodeAncestors",t),f=r.p.treeReader.expanded_field,n(u).each(function(){return i=i&&this[f],i?void 0:!1}))}),i},isNodeLoaded:function(t){var i;return this.each(function(){var r=this,f,u;r.grid&&r.p.treeGrid&&(f=r.p.treeReader.leaf_field,u=r.p.treeReader.loaded,i=t!==undefined?t[u]!==undefined?t[u]:t[f]||n(r).jqGrid("getNodeChildren",t).length>0?!0:!1:!1)}),i},setLeaf:function(t,i,r){return this.each(function(){var e=n.jgrid.getAccessor(t,this.p.localReader.id),o=n("#"+e,this.grid.bDiv)[0],s=this.p.treeReader.leaf_field,u,f;try{u=this.p._index[e];u!=null&&(this.p.data[u][s]=i)}catch(h){}i===!0?n("div.treeclick",o).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf"):i===!1&&(f=this.p.treeIcons.minus+" tree-minus",r&&(f=this.p.treeIcons.plus+" tree-plus"),n("div.treeclick",o).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(f))})},reloadNode:function(t,i){return this.each(function(){var e,f;if(this.grid&&this.p.treeGrid){if(e=this.p.localReader.id,f=this.p.selrow,n(this).jqGrid("delChildren",t[e]),i===undefined&&(i=!1),!i&&!jQuery._data(this,"events").jqGridAfterSetTreeNode)n(this).on("jqGridAfterSetTreeNode.reloadNode",function(){var r=this.p.treeReader.leaf_field,t,i;this.p.reloadnode&&(t=this.p.reloadnode,i=n(this).jqGrid("getNodeChildren",t),t[r]&&i.length?n(this).jqGrid("setLeaf",t,!1):t[r]||i.length!==0||n(this).jqGrid("setLeaf",t,!0));this.p.reloadnode=!1});var s=this.p.treeReader.expanded_field,h=this.p.treeReader.parent_id_field,c=this.p.treeReader.loaded,o=this.p.treeReader.level_field,l=this.p.treeReader.leaf_field,a=this.p.treeReader.left_field,v=this.p.treeReader.right_field,r=n.jgrid.getAccessor(t,this.p.localReader.id),u=n("#"+r,this.grid.bDiv)[0];t[s]=!0;t[l]||n("div.treeclick",u).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=u.rowIndex;this.p.datatype=this.p.treedatatype;this.p.reloadnode=t;i&&(this.p.treeANode=u.rowIndex>0?u.rowIndex-1:1,n(this).jqGrid("delRowData",r));this.p.treeGridModel==="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:r,n_left:t[a],n_right:t[v],n_level:t[o]}}):n(this).jqGrid("setGridParam",{postData:{nodeid:r,parentid:t[h],n_level:t[o]}});n(this).trigger("reloadGrid");t[c]=!0;this.p.treeGridModel==="nested"?n(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):n(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this,u=this.p.treeReader.expanded_field,s=this.p.treeReader.parent_id_field,h=this.p.treeReader.loaded,o=this.p.treeReader.level_field,c=this.p.treeReader.left_field,l=this.p.treeReader.right_field;if(!t[u]){var i=n.jgrid.getAccessor(t,this.p.localReader.id),f=n("#"+this.p.idPrefix+n.jgrid.jqID(i),this.grid.bDiv)[0],a=this.p._index[i],r=n(e).triggerHandler("jqGridBeforeExpandTreeGridNode",[i,t]);if(r===undefined&&(r=!0),r&&n.isFunction(this.p.beforeExpandTreeGridNode)&&(r=this.p.beforeExpandTreeGridNode.call(this,i,t)),r===!1)return;n(this).jqGrid("isNodeLoaded",this.p.data[a])?(t[u]=!0,n("div.treeclick",f).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[u]=!0,n("div.treeclick",f).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=f.rowIndex,this.p.datatype=this.p.treedatatype,this.p.treeGridModel==="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:i,n_left:t[c],n_right:t[l],n_level:t[o]}}):n(this).jqGrid("setGridParam",{postData:{nodeid:i,parentid:t[s],n_level:t[o]}}),n(this).trigger("reloadGrid"),t[h]=!0,this.p.treeGridModel==="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):n(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}));n(e).triggerHandler("jqGridAfterExpandTreeGridNode",[i,t]);n.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,i,t)}}})},collapseNode:function(t){return this.each(function(){var u,f;if(this.grid&&this.p.treeGrid&&(u=this.p.treeReader.expanded_field,f=this,t[u])){var i=n.jgrid.getAccessor(t,this.p.localReader.id),e=n("#"+this.p.idPrefix+n.jgrid.jqID(i),this.grid.bDiv)[0],r=n(f).triggerHandler("jqGridBeforeCollapseTreeGridNode",[i,t]);if(r===undefined&&(r=!0),r&&n.isFunction(this.p.beforeCollapseTreeGridNode)&&(r=this.p.beforeCollapseTreeGridNode.call(this,i,t)),t[u]=!1,r===!1)return;n("div.treeclick",e).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");n(f).triggerHandler("jqGridAfterCollapseTreeGridNode",[i,t]);n.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,i,t)}})},SortTree:function(t,i,r,u){return this.each(function(){if(this.grid&&this.p.treeGrid){var f,l,c,e=[],o=this,s,h,a=n(this).jqGrid("getRootNodes",o.p.search);for(s=n.jgrid.from.call(this,a),s.orderBy(t,i,r,u),h=s.select(),f=0,l=h.length;f<l;f++)c=h[f],e.push(c),n(this).jqGrid("collectChildrenSortTree",e,c,t,i,r,u);n.each(e,function(t){var i=n.jgrid.getAccessor(this,o.p.localReader.id);n("#"+n.jgrid.jqID(o.p.id)+" tbody tr:eq("+t+")").after(n("tr#"+n.jgrid.jqID(i),o.grid.bDiv))});s=null;h=null;e=null}})},searchTree:function(t){var f=t.length||0,i=[],e,h=[],r=[],s,c,l,u,o;return this.each(function(){if(this.grid&&this.p.treeGrid&&f)for(e=this.p.localReader.id;f--;){if(i=n(this).jqGrid("getNodeAncestors",t[f],!0,!0),i.push(t[f]),s=i[0][e],n.inArray(s,h)!==-1){for(u=0,c=i.length;u<c;u++){var a=!1;for(o=0,l=r.length;o<l;o++)if(i[u][e]===r[o][e]){a=!0;break}a||r.push(i[u])}continue}else h.push(s);r=r.concat(i)}}),r},collectChildrenSortTree:function(t,i,r,u,f,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var o,l,s,a,h,c;for(a=n(this).jqGrid("getNodeChildren",i,this.p.search),h=n.jgrid.from.call(this,a),h.orderBy(r,u,f,e),c=h.select(),o=0,l=c.length;o<l;o++)s=c[o],t.push(s),n(this).jqGrid("collectChildrenSortTree",t,s,r,u,f,e)}})},setTreeRow:function(t,i){var r=!1;return this.each(function(){var u=this;u.grid&&u.p.treeGrid&&(r=n(u).jqGrid("setRowData",t,i))}),r},delTreeNode:function(t){return this.each(function(){var i=this,a=i.p.localReader.id,e,o=i.p.treeReader.left_field,s=i.p.treeReader.right_field,h,l,r,u,f,c;if(i.grid&&i.p.treeGrid&&(f=i.p._index[t],f!==undefined)){if(h=parseInt(i.p.data[f][s],10),l=h-parseInt(i.p.data[f][o],10)+1,c=n(i).jqGrid("getFullTreeNode",i.p.data[f]),c.length>0)for(e=0;e<c.length;e++)n(i).jqGrid("delRowData",c[e][a]);if(i.p.treeGridModel==="nested"){if(r=n.jgrid.from.call(i,i.p.data).greater(o,h,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][o]=parseInt(r[u][o],10)-l);if(r=n.jgrid.from.call(i,i.p.data).greater(s,h,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][s]=parseInt(r[u][s],10)-l)}}})},delChildren:function(t){return this.each(function(){var i=this,a=i.p.localReader.id,s=i.p.treeReader.left_field,h=i.p.treeReader.right_field,c,l,r,u,f,e,o;if(i.grid&&i.p.treeGrid&&(f=i.p._index[t],f!==undefined)){if(c=parseInt(i.p.data[f][h],10),l=c-parseInt(i.p.data[f][s],10)+1,e=n(i).jqGrid("getFullTreeNode",i.p.data[f]),e.length>0)for(o=0;o<e.length;o++)e[o][a]!==t&&n(i).jqGrid("delRowData",e[o][a]);if(i.p.treeGridModel==="nested"){if(r=n.jgrid.from(i.p.data).greater(s,c,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][s]=parseInt(r[u][s],10)-l);if(r=n.jgrid.from(i.p.data).greater(h,c,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][h]=parseInt(r[u][h],10)-l)}}})},addChildNode:function(t,i,r,u){var f=this[0],rt,w,b,e,o;if(r){var v=f.p.treeReader.expanded_field,y=f.p.treeReader.leaf_field,ut=f.p.treeReader.level_field,et=f.p.treeReader.parent_id_field,a=f.p.treeReader.left_field,s=f.p.treeReader.right_field,k=f.p.treeReader.loaded,d,g,c,nt,h,ft,tt=0,p=i,it,l;if(u===undefined&&(u=!1),t==null){if(h=f.p.data.length-1,h>=0)while(h>=0)tt=Math.max(tt,parseInt(f.p.data[h][f.p.localReader.id],10)),h--;t=tt+1}if(rt=n(f).jqGrid("getInd",i),it=!1,i===undefined||i===null||i===""?(i=null,p=null,d="last",nt=f.p.tree_root_level,h=f.p.data.length+1):(d="after",g=f.p._index[i],c=f.p.data[g],i=c[f.p.localReader.id],nt=parseInt(c[ut],10)+1,w=n(f).jqGrid("getFullTreeNode",c),w.length?(h=w[w.length-1][f.p.localReader.id],p=h,h=n(f).jqGrid("getInd",p)+1):h=n(f).jqGrid("getInd",i)+1,c[y]&&(it=!0,c[v]=!0,n(f.rows[rt]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(f.p.treeIcons.leaf+" tree-leaf").addClass(f.p.treeIcons.minus+" tree-minus"),f.p.data[g][y]=!1,c[k]=!0)),ft=h+1,r[v]===undefined&&(r[v]=!1),r[k]===undefined&&(r[k]=!1),r[ut]=nt,r[y]===undefined&&(r[y]=!0),f.p.treeGridModel==="adjacency"&&(r[et]=i),f.p.treeGridModel==="nested")if(i!==null){if(l=parseInt(c[s],10),b=n.jgrid.from.call(f,f.p.data),b=b.greaterOrEquals(s,l,{stype:"integer"}),e=b.select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][a]=e[o][a]>l?parseInt(e[o][a],10)+2:e[o][a],e[o][s]=e[o][s]>=l?parseInt(e[o][s],10)+2:e[o][s]);r[a]=l;r[s]=l+1}else{if(l=parseInt(n(f).jqGrid("getCol",s,!1,"max"),10),e=n.jgrid.from.call(f,f.p.data).greater(a,l,{stype:"integer"}).select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][a]=parseInt(e[o][a],10)+2);if(e=n.jgrid.from.call(f,f.p.data).greater(s,l,{stype:"integer"}).select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][s]=parseInt(e[o][s],10)+2);r[a]=l+1;r[s]=l+2}(i===null||n(f).jqGrid("isNodeLoaded",c)||it)&&(n(f).jqGrid("addRowData",t,r,d,p),n(f).jqGrid("setTreeNode",h,ft));c&&!c[v]&&u&&n(f.rows[rt]).find("div.treeclick").click()}}});n.fn.jqDrag=function(n){return b(this,n,"d")};n.fn.jqResize=function(n,t){return b(this,n,"r",t)};n.jqDnR={dnr:{},e:0,drag:function(n){return u.k=="d"?f.css({left:u.X+n.pageX-u.pX,top:u.Y+n.pageY-u.pY}):(f.css({width:Math.max(n.pageX-u.pX+u.W,0),height:Math.max(n.pageY-u.pY+u.H,0)}),s&&c.css({width:Math.max(n.pageX-s.pX+s.W,0),height:Math.max(n.pageY-s.pY+s.H,0)})),!1},stop:function(){n(document).off("mousemove",v.drag).off("mouseup",v.stop)}};var v=n.jqDnR,u=v.dnr,f=v.e,c,s,b=function(t,i,r,e){return t.each(function(){i=i?n(i,t):t;i.on("mousedown",{e:t,k:r},function(t){var r=t.data,i={};if(f=r.e,c=e?n(e):!1,f.css("position")!="relative")try{f.position(i)}catch(o){}if(u={X:i.left||l("left")||0,Y:i.top||l("top")||0,W:l("width")||f[0].scrollWidth||0,H:l("height")||f[0].scrollHeight||0,pX:t.pageX,pY:t.pageY,k:r.k},s=c&&r.k!="d"?{X:i.left||y("left")||0,Y:i.top||y("top")||0,W:c[0].offsetWidth||y("width")||0,H:c[0].offsetHeight||y("height")||0,pX:t.pageX,pY:t.pageY,k:r.k}:!1,n("input.hasDatepicker",f[0])[0])try{n("input.hasDatepicker",f[0]).datepicker("hide")}catch(h){}return n(document).mousemove(n.jqDnR.drag).mouseup(n.jqDnR.stop),!1})})},l=function(n){return parseInt(f.css(n),10)||!1},y=function(n){return parseInt(c.css(n),10)||!1};n.fn.tinyDraggable=function(t){var i=n.extend({handle:0,exclude:0},t);return this.each(function(){var r,u,t=n(this),f=i.handle?n(i.handle,t):t;f.on({mousedown:function(f){if(!i.exclude||!~n.inArray(f.target,n(i.exclude,t))){f.preventDefault();var e=t.offset();r=f.pageX-e.left;u=f.pageY-e.top;n(document).on("mousemove.drag",function(n){t.offset({top:n.pageY-u,left:n.pageX-r})})}},mouseup:function(){n(document).off("mousemove.drag")}})})};n.fn.jqm=function(t){var r={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:i,ajaxText:"",target:i,modal:i,toTop:i,onShow:i,onHide:i,onLoad:i};return this.each(function(){if(this._jqm)return e[this._jqm].c=n.extend({},e[this._jqm].c,t);a++;this._jqm=a;e[a]={c:n.extend(r,n.jqm.params,t),a:i,w:n(this).addClass("jqmID"+a),s:a};r.trigger&&n(this).jqmAddTrigger(r.trigger)})};n.fn.jqmAddClose=function(n){return g(this,n,"jqmHide")};n.fn.jqmAddTrigger=function(n){return g(this,n,"jqmShow")};n.fn.jqmShow=function(t){return this.each(function(){n.jqm.open(this._jqm,t)})};n.fn.jqmHide=function(t){return this.each(function(){n.jqm.close(this._jqm,t)})};n.jqm={hash:{},open:function(t,r){var u=e[t],f=u.c,v="."+f.closeClass,l=parseInt(u.w.css("z-index")),o,s,c,a;return(l=l>0?l:3e3,o=n("<div><\/div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":l-1,opacity:f.overlay/100}),u.a)?i:(u.t=r,u.a=!0,u.w.css("z-index",l),f.modal?(h[0]||setTimeout(function(){new d("bind")},1),h.push(t)):f.overlay>0?f.closeoverlay&&u.w.jqmAddClose(o):o=i,o&&u.w.before(o.addClass(f.overlayClass)),u.o=o?o:i,f.ajax?(s=f.target||u.w,c=f.ajax,s=typeof s=="string"?n(s,u.w):n(s),c=c.substr(0,1)==="@"?n(r).attr(c.substring(1)):c,s.html(f.ajaxText).load(c,function(){f.onLoad&&f.onLoad.call(this,u);v&&u.w.jqmAddClose(n(v,u.w));k(u)})):v&&u.w.jqmAddClose(n(v,u.w)),f.toTop&&u.o&&u.w.before('<span id="jqmP'+u.w[0]._jqm+'"><\/span>').insertAfter(u.o),f.onShow?f.onShow(u):u.w.show(),k(u),n(".jqmWindow.jqmEQ, .jqmWindow2.jqmEQ").length&&(a=n(u.w).parents(".jqmWindow, .jqmWindow2").length?n(n(u.w).parents(".jqmWindow, .jqmWindow2")[0]):undefined,n("body").addClass("hideover"),a!==undefined&&(a.addClass("hideover"),(a.attr("id").indexOf("dialog_ei")>=0||a.attr("id").indexOf("dialog_PopUpOuter")>=0)&&n("body").removeClass("hideover")),n(u.w).scrollTop(0),n('[id^="dialog_ei"], [id^="dialog_PopUpOuter"]').removeClass("hideover")),i)},close:function(t){var r=e[t],u;if(!r.a)return i;if(r.a=i,h[0]&&(h.pop(),h[0]||new d("unbind")),r.c.toTop&&r.o&&n("#jqmP"+r.w[0]._jqm).after(r.w).remove(),r.c.onHide)r.c.onHide(r);else r.w.hide(),r.o&&r.o.remove();return n(".jqmWindow.jqmEQ, .jqmWindow2.jqmEQ").length&&(n(n(r.w).parents(".jqmWindow, .jqmWindow2")[0]).removeClass("hideover"),u=!0,n(".jqmWindow.jqmEQ, .jqmWindow2.jqmEQ").each(function(t,i){u=u?!(n(i).css("display")=="block"):u}),u&&n("body").removeClass("hideover")),i},params:{}};var a=0,e=n.jqm.hash,h=[],i=!1,k=function(n){n.c.focusField===undefined&&(n.c.focusField=0);n.c.focusField>=0&&l(n)},l=function(t){try{n(":input:visible",t.w)[parseInt(t.c.focusField,10)].focus()}catch(i){}},d=function(t){n(document)[t]("keypress",p)[t]("keydown",p)[t]("mousedown",p)},p=function(t){var i=e[h[h.length-1]],r=!n(t.target).parents(".jqmID"+i.s)[0];return r&&(n(".jqmID"+i.s).each(function(){var u=n(this),i=u.offset();if(i.top<=t.pageY&&t.pageY<=i.top+u.height()&&i.left<=t.pageX&&t.pageX<=i.left+u.width())return r=!1,!1}),l(i)),!r},g=function(t,r,u){return t.each(function(){var t=this._jqm;n(r).each(function(){this[u]||(this[u]=[],n(this).click(function(){var n,t;for(n in{jqmShow:1,jqmHide:1})for(t in this[n]);return e[this[n][t]]&&e[this[n][t]].w[n](this),i}));this[u].push(t)})})};n.fmatter={};n.extend(n.fmatter,{isBoolean:function(n){return typeof n=="boolean"},isObject:function(t){return t&&(typeof t=="object"||n.isFunction(t))||!1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0}});n.fn.fmatter=function(t,i,r,u,f){var e=i;r=n.extend({},n.jgrid.getRegional(this,"formatter"),r);try{e=n.fn.fmatter[t].call(this,i,r,u,f)}catch(o){}return e};n.fmatter.util={NumberFormat:function(t,i){var s,h,l,f,c,e;if(n.fmatter.isNumber(t)||(t*=1),n.fmatter.isNumber(t)){var a=t<0,r=String(t),o=i.decimalSeparator||".",u;if(n.fmatter.isNumber(i.decimalPlaces)&&(s=i.decimalPlaces,h=Math.pow(10,s),r=String(Math.round(t*h)/h),u=r.lastIndexOf("."),s>0))for(u<0?(r+=o,u=r.length-1):o!=="."&&(r=r.replace(".",o));r.length-1-u<s;)r+="0";if(i.thousandsSeparator){for(l=i.thousandsSeparator,u=r.lastIndexOf(o),u=u>-1?u:r.length,f=r.substring(u),c=-1,e=u;e>0;e--)c++,c%3==0&&e!==u&&(!a||e>1)&&(f=l+f),f=r.charAt(e-1)+f;r=f}return r=i.prefix?i.prefix+r:r,i.suffix?r+i.suffix:r}return t}};n.fn.fmatter.defaultFormat=function(t,i){return n.fmatter.isValue(t)&&t!==""?t:i.defaultValue||"&#160;"};n.fn.fmatter.email=function(t,i){return n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"<\/a>"};n.fn.fmatter.checkbox=function(t,i){var r=n.extend({},i.checkbox),u,f;return i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),u=r.disabled===!0?'disabled="disabled"':"",(n.fmatter.isEmpty(t)||t===undefined)&&(t=n.fn.fmatter.defaultFormat(t,r)),t=String(t),t=(t+"").toLowerCase(),f=t.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+f+' value="'+t+'" offval="no" '+u+"/>"};n.fn.fmatter.link=function(t,i){var r={target:i.target},u="";return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),!n.fmatter.isEmpty(t))?"<a "+u+' href="'+t+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.showlink=function(t,i){var r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},u="",f;return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),f=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam,n.fmatter.isString(t)||n.fmatter.isNumber(t))?"<a "+u+' href="'+f+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.integer=function(t,i){var r=n.extend({},i.integer);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.number=function(t,i){var r=n.extend({},i.number);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.currency=function(t,i){var r=n.extend({},i.currency);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.date=function(t,i,r,u){var f=n.extend({},i.date);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(f=n.extend({},f,i.colModel.formatoptions)),!f.reformatAfterEdit&&u==="edit")?n.fn.fmatter.defaultFormat(t,i):n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.jgrid.parseDate.call(this,f.srcformat,t,f.newformat,f)};n.fn.fmatter.select=function(t,i){var r,f,o,c,s,e,u,l,a,h;if(t=String(t),r=!1,f=[],i.colModel.formatoptions!==undefined?(r=i.colModel.formatoptions.value,o=i.colModel.formatoptions.separator===undefined?":":i.colModel.formatoptions.separator,c=i.colModel.formatoptions.delimiter===undefined?";":i.colModel.formatoptions.delimiter):i.colModel.editoptions!==undefined&&(r=i.colModel.editoptions.value,o=i.colModel.editoptions.separator===undefined?":":i.colModel.editoptions.separator,c=i.colModel.editoptions.delimiter===undefined?";":i.colModel.editoptions.delimiter),r)if(s=(i.colModel.editoptions!=null&&i.colModel.editoptions.multiple===!0)==!0?!0:!1,e=[],s&&(e=t.split(","),e=n.map(e,function(t){return n.trim(t)})),n.fmatter.isString(r)){for(l=r.split(c),a=0,h=0;h<l.length;h++)if(u=l[h].split(o),u.length>2&&(u[1]=n.map(u,function(n,t){if(t>0)return n}).join(o)),s)n.inArray(u[0],e)>-1&&(f[a]=u[1],a++);else if(n.trim(u[0])===n.trim(t)){f[0]=u[1];break}}else n.fmatter.isObject(r)&&(s?f=n.map(e,function(n){return r[n]}):f[0]=r[t]||"");return t=f.join(", "),t===""?n.fn.fmatter.defaultFormat(t,i):t};n.fn.fmatter.rowactions=function(t){var c=n(this).closest("tr.jqgrow"),f=c.attr("id"),v=n(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),r=n("#"+v),o=r[0],e=o.p,s=e.colModel[n.jgrid.getCellIndex(this)],u=s.frozen?n("tr#"+f+" td:eq("+n.jgrid.getCellIndex(this)+") > div",r):n(this).parent(),i={extraparam:{}},y=function(t,r){n.isFunction(i.afterSave)&&i.afterSave.call(o,t,r);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide()},l=function(t){n.isFunction(i.afterRestore)&&i.afterRestore.call(o,t);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide()},a,h;s.formatoptions!==undefined&&(a=n.extend(!0,{},s.formatoptions),i=n.extend(i,a));e.editOptions!==undefined&&(i.editOptions=e.editOptions);e.delOptions!==undefined&&(i.delOptions=e.delOptions);c.hasClass("jqgrid-new-row")&&(i.extraparam[e.prmNames.oper]=e.prmNames.addoper);h={keys:i.keys,oneditfunc:i.onEdit,successfunc:i.onSuccess,url:i.url,extraparam:i.extraparam,aftersavefunc:y,errorfunc:i.onError,afterrestorefunc:l,restoreAfterError:i.restoreAfterError,mtype:i.mtype};switch(t){case"edit":r.jqGrid("editRow",f,h);u.find("div.ui-inline-edit,div.ui-inline-del").hide();u.find("div.ui-inline-save,div.ui-inline-cancel").show();r.triggerHandler("jqGridAfterGridComplete");break;case"save":r.jqGrid("saveRow",f,h)&&(u.find("div.ui-inline-edit,div.ui-inline-del").show(),u.find("div.ui-inline-save,div.ui-inline-cancel").hide(),r.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":r.jqGrid("restoreRow",f,l);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide();r.triggerHandler("jqGridAfterGridComplete");break;case"del":r.jqGrid("delGridRow",f,i.delOptions);break;case"formedit":r.jqGrid("setSelection",f);r.jqGrid("editGridRow",f,i.editOptions)}};n.fn.fmatter.actions=function(t,i){var s={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},u=i.rowId,e="",r,h=n.jgrid.getRegional(this,"nav"),c=n.jgrid.styleUI[i.styleUI||"jQueryUI"].fmatter,f=n.jgrid.styleUI[i.styleUI||"jQueryUI"].common,o;return(i.colModel.formatoptions!==undefined&&(s=n.extend(s,i.colModel.formatoptions)),u===undefined||n.fmatter.isEmpty(u))?"":(o="onmouseover=jQuery(this).addClass('"+f.hover+"'); onmouseout=jQuery(this).removeClass('"+f.hover+"');  ",s.editformbutton?(r="id='jEditButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+o,e+="<div title='"+h.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+f.icon_base+" "+c.icon_edit+"'><\/span><\/div>"):s.editbutton&&(r="id='jEditButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+o,e+="<div title='"+h.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+f.icon_base+" "+c.icon_edit+"'><\/span><\/div>"),s.delbutton&&(r="id='jDeleteButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+o,e+="<div title='"+h.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+r+"><span class='"+f.icon_base+" "+c.icon_del+"'><\/span><\/div>"),r="id='jSaveButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+o,e+="<div title='"+h.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+r+"><span class='"+f.icon_base+" "+c.icon_save+"'><\/span><\/div>",r="id='jCancelButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+o,e+="<div title='"+h.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+r+"><span class='"+f.icon_base+" "+c.icon_cancel+"'><\/span><\/div>","<div style='margin-left:8px;'>"+e+"<\/div>")};n.unformat=function(t,i,r,u){var e,h=i.colModel.formatter,f=i.colModel.formatoptions||{},o,l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,a=i.colModel.unformat||n.fn.fmatter[h]&&n.fn.fmatter[h].unformat,c,s,v;if(a!==undefined&&n.isFunction(a))e=a.call(this,n(t).text(),i,t);else if(h!==undefined&&n.fmatter.isString(h)){c=n.jgrid.getRegional(this,"formatter")||{};switch(h){case"integer":f=n.extend({},c.integer,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"");break;case"number":f=n.extend({},c.number,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"").replace(f.decimalSeparator,".");break;case"currency":f=n.extend({},c.currency,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text();f.prefix&&f.prefix.length&&(e=e.substr(f.prefix.length));f.suffix&&f.suffix.length&&(e=e.substr(0,e.length-f.suffix.length));e=e.replace(s,"").replace(f.decimalSeparator,".");break;case"checkbox":v=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];e=n("input",t).is(":checked")?v[0]:v[1];break;case"select":e=n.unformat.select(t,i,r,u);break;case"actions":return"";default:e=n(t).text()}}return e!==undefined?e:u===!0?n(t).text():n.jgrid.htmlDecode(n(t).html())};n.unformat.select=function(t,i,r,u){var c=[],s=n(t).text(),v,y,l;if(u===!0)return s;var e=n.extend({},i.colModel.formatoptions!==undefined?i.colModel.formatoptions:i.colModel.editoptions),p=e.separator===undefined?":":e.separator,w=e.delimiter===undefined?";":e.delimiter;if(e.value){var h=e.value,a=e.multiple===!0?!0:!1,o=[],f;if(a&&(o=s.split(","),o=n.map(o,function(t){return n.trim(t)})),n.fmatter.isString(h)){for(v=h.split(w),y=0,l=0;l<v.length;l++)if(f=v[l].split(p),f.length>2&&(f[1]=n.map(f,function(n,t){if(t>0)return n}).join(p)),a)n.inArray(n.trim(f[1]),o)>-1&&(c[y]=f[0],y++);else if(n.trim(f[1])===n.trim(s)){c[0]=f[0];break}}else(n.fmatter.isObject(h)||n.isArray(h))&&(a||(o[0]=s),c=n.map(o,function(t){var i;return n.each(h,function(n,r){if(r===t)return i=n,!1}),i!==undefined?i:void 0}));return c.join(", ")}return s||""};n.unformat.date=function(t,i){var r=n.jgrid.getRegional(this,"formatter.date")||{};return(i.formatoptions!==undefined&&(r=n.extend({},r,i.formatoptions)),!n.fmatter.isEmpty(t))?n.jgrid.parseDate.call(this,r.newformat,t,r.srcformat,r):n.fn.fmatter.defaultFormat(t,i)};o=n();n.fn.html5sortable=function(t){var i=String(t);return t=n.extend({connectWith:!1},t),this.each(function(){var f,e,s,u;if(/^enable|disable|destroy$/.test(i)){f=n(this).children(n(this).data("items")).attr("draggable",i==="enable");i==="destroy"&&f.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");return}f=n(this).children(t.items);u=n("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+t.placeholderClass+'">').html("&nbsp;");f.find(t.handle).mousedown(function(){e=!0}).mouseup(function(){e=!1});n(this).data("items",t.items);o=o.add(u);t.connectWith&&n(t.connectWith).add(this).data("connectWith",t.connectWith);f.attr("draggable","true").on("dragstart.h5s",function(i){if(t.handle&&!e)return!1;e=!1;var u=i.originalEvent.dataTransfer;u.effectAllowed="move";u.setData("Text","dummy");s=(r=n(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){r&&(r.removeClass("sortable-dragging").show(),o.detach(),s!==r.index()&&r.parent().trigger("sortupdate",{item:r,startindex:s,endindex:r.index()}),r=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,u]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){return!f.is(r)&&t.connectWith!==n(r).parent().data("connectWith")?!0:i.type==="drop"?(i.stopPropagation(),o.filter(":visible").after(r),r.trigger("dragend.h5s"),!1):(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",f.is(this)?(t.forcePlaceholderSize&&u.height(r.outerHeight()),r.hide(),n(this)[u.index()<n(this).index()?"after":"before"](u),o.not(u).detach()):o.is(this)||n(this).children(t.items).length||(o.detach(),n(this).append(u)),!1)})})};n.extend(n.jgrid,{stringify:function(n){return JSON.stringify(n,function(n,t){return typeof t=="function"?t.toString():t})},parseFunc:function(n){return JSON.parse(n,function(n,t){if(typeof t=="string"&&t.indexOf("function")!==-1){var i=t.split(" ");return i[0].trim()==="function"&&t.trim().slice(-1)==="}"?eval("("+t+")"):t}return t})},encode:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(t,i){var r=n.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},i||{}),u=this,e=function(n,t){return n==="#text"?r.encode?u.encode(t):t:typeof t=="function"?"<"+n+"><![CDATA["+t+"]\]><\/"+n+">\n":t===""?"<"+n+">__EMPTY_STRING_<\/"+n+">\n":"<"+n+">"+(r.encode?u.encode(t):t)+"<\/"+n+">\n"},o=function(n,t){for(var i,r=[],u=0;u<t.length;u++)i=t[u],r[r.length]=typeof i=="undefined"||i==null?"<"+n+" />":typeof i=="object"&&i.constructor==Array?o(n,i):typeof i=="object"?f(n,i):e(n,i);return r.length||(r[0]="<"+n+">__EMPTY_ARRAY_<\/"+n+">\n"),r.join("")},f=function(n,t){var c=[],a=[],s,i,l,h;for(s in t)t.hasOwnProperty(s)&&(i=t[s],s.charAt(0)!==r.attr_prefix?c[c.length]=i==null?"<"+s+" />":typeof i=="object"&&i.constructor===Array?o(s,i):typeof i=="object"?f(s,i):e(s,i):a[a.length]=" "+s.substring(1)+'="'+(r.encode?u.encode(i):i)+'"');return l=a.join(""),h=c.join(""),n==null||(h=c.length>0?h.match(/\n/)?"<"+n+l+">\n"+h+"<\/"+n+">\n":"<"+n+l+">"+h+"<\/"+n+">\n":"<"+n+l+" />\n"),h},s=f(null,t);return r.xmlDecl+s},xmlToJSON:function(t,i){var u=n.extend({force_array:[],attr_prefix:"-"},i||{}),f,e,o;if(t){if(f={},u.force_array)for(e=0;e<u.force_array.length;e++)f[u.force_array[e]]=1;typeof t=="string"&&(t=n.parseXML(t));t.documentElement&&(t=t.documentElement);var s=function(n,t,i,r){if(typeof r=="string")if(r.indexOf("function")!==-1)r=eval("("+r+")");else switch(r){case"__EMPTY_ARRAY_":r=[];break;case"__EMPTY_STRING_":r="";break;case"false":r=!1;break;case"true":r=!0}f[t]?(i===1&&(n[t]=[]),n[t][n[t].length]=r):i===1?n[t]=r:i===2?n[t]=[n[t],r]:n[t][n[t].length]=r},h=function(n){var l,r,f,t,i,e,o,c;if(n.nodeType!==7){if(n.nodeType===3||n.nodeType===4)return(l=n.nodeValue.match(/[^\x00-\x20]/),l==null)?void 0:n.nodeValue;if(f={},n.attributes&&n.attributes.length)for(r={},t=0;t<n.attributes.length;t++)(i=n.attributes[t].nodeName,typeof i=="string")&&(e=n.attributes[t].nodeValue,e)&&(i=u.attr_prefix+i,typeof f[i]=="undefined"&&(f[i]=0),f[i]++,s(r,i,f[i],e));if(n.childNodes&&n.childNodes.length){for(o=!0,r&&(o=!1),t=0;t<n.childNodes.length&&o;t++)(c=n.childNodes[t].nodeType,c!==3&&c!==4)&&(o=!1);if(o)for(r||(r=""),t=0;t<n.childNodes.length;t++)r+=n.childNodes[t].nodeValue;else for(r||(r={}),t=0;t<n.childNodes.length;t++)(i=n.childNodes[t].nodeName,typeof i=="string")&&(e=h(n.childNodes[t]),e)&&(typeof f[i]=="undefined"&&(f[i]=0),f[i]++,s(r,i,f[i],e))}return r}},r=h(t);return f[t.nodeName]&&(r=[r]),t.nodeType!==11&&(o={},o[t.nodeName]=r,r=o),r}},saveAs:function(t,i,r){var e,o,f,u;r=n.extend(!0,{type:"plain/text;charset=utf-8"},r||{});f=[];i=i==null||i===""?"jqGridFile.txt":i;n.isArray(t)?f=t:f[0]=t;try{e=new File(f,i,r)}catch(s){e=new Blob(f,r)}window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(e,i):(o=URL.createObjectURL(e),u=document.createElement("a"),u.href=o,u.download=i,document.body.appendChild(u),u.click(),setTimeout(function(){document.body.removeChild(u);window.URL.revokeObjectURL(o)},0))}});n.jgrid=n.jgrid||{};n.extend(n.jgrid,{formatCell:function(t,i,r,u,f){var e,o;return u.formatter!==undefined?(o={rowId:"",colModel:u,gid:f.p.id,pos:i,styleUI:""},e=n.isFunction(u.formatter)?u.formatter.call(f,t,o,r):n.fmatter?n.fn.fmatter.call(f,u.formatter,t,o,r):t):e=t,e},formatCellCsv:function(n,t){n=n==null?"":String(n);try{n=n.replace(t._regexsep,t.separatorReplace).replace(/\r\n/g,t.replaceNewLine).replace(/\n/g,t.replaceNewLine)}catch(i){n=""}return t.escquote&&(n=n.replace(t._regexquot,t.escquote+t.quote)),(n.indexOf(t.separator)===-1||n.indexOf(t.qoute)===-1)&&(n=t.quote+n+t.quote),n},excelCellPos:function(n){for(var i="A".charCodeAt(0),u="Z".charCodeAt(0),r=u-i+1,t="";n>=0;)t=String.fromCharCode(n%r+i)+t,n=Math.floor(n/r)-1;return t},makeNode:function(t,i,r){var u=t.createElement(i);return r&&(r.attr&&n(u).attr(r.attr),r.children&&n.each(r.children,function(n,t){u.appendChild(t)}),r.text&&u.appendChild(t.createTextNode(r.text))),u},xmlToZip:function(t,i){var a=this,s=new XMLSerializer,h=s.serializeToString(n.parseXML(n.jgrid.excelStrings["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")===-1,c,f,r,l,o,e=[],u;n.each(i,function(i,v){if(n.isPlainObject(v))c=t.folder(i),a.xmlToZip(c,v);else{if(h){for(f=v.childNodes[0],r=f.attributes.length-1;r>=0;r--){var y=f.attributes[r].nodeName,p=f.attributes[r].nodeValue;y.indexOf(":")!==-1&&(e.push({name:y,value:p}),f.removeAttribute(y))}for(r=0,l=e.length;r<l;r++)o=v.createAttribute(e[r].name.replace(":","_dt_b_namespace_token_")),o.value=e[r].value,f.setAttributeNode(o)}u=s.serializeToString(v);h&&(u.indexOf("<?xml")===-1&&(u='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+u),u=u.replace(/_dt_b_namespace_token_/g,":"));u=u.replace(/<row xmlns="" /g,"<row ").replace(/<cols xmlns="">/g,"<cols>").replace(/<mergeCells xmlns="" /g,"<mergeCells ");t.file(i,u)}})},excelStrings:{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><\/Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><\/Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><\/Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/><\/bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/><\/sheets><\/workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><\/worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /><\/font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /><\/font><font><sz val="11" /><name val="Calibri" /><b /><\/font><font><sz val="11" /><name val="Calibri" /><i /><\/font><font><sz val="11" /><name val="Calibri" /><u /><\/font><\/fonts><fills count="6"><fill><patternFill patternType="none" /><\/fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /><\/patternFill><\/fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /><\/patternFill><\/fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /><\/patternFill><\/fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /><\/patternFill><\/fill><\/fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /><\/border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /><\/left><right style="thin"><color auto="1" /><\/right><top style="thin"><color auto="1" /><\/top><bottom style="thin"><color auto="1" /><\/bottom><diagonal /><\/border><\/borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /><\/cellStyleXfs><cellXfs count="2"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"><alignment horizontal="center" /><\/xf><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><\/cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /><\/cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /><\/styleSheet>'}});n.jgrid.extend({exportToCsv:function(t){t=n.extend(!0,{separator:",",separatorReplace:" ",quote:'"',escquote:'"',newLine:"\r\n",replaceNewLine:" ",includeCaption:!0,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.csv",mimetype:"text/csv;charset=utf-8",returnAsString:!1},t||{});var i="";if(this.each(function(){function ht(t,i){function p(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function v(t,r,e,o){for(var h=p(t,r,e),c,a=h.cnt,v=new Array(i.collen),w=0,l,s=o;s<y;s++)f[s].hidden||(l="{0}",n.each(h.summary,function(){if(this.nm===f[s].name){f[s].summaryTpl&&(l=f[s].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;c=u.formatter("",this.v,s,this)}catch(t){c=this.v}return v[w]=n.jgrid.formatCellCsv(n.jgrid.stripHtml(n.jgrid.template(l,c)),i),!1}}),w++);return v}var o="",r=u.p.groupingView,h=[],a=r.groupField.length,f=u.p.colModel,y=f.length,s=0,c,e,l;return n.each(f,function(n,t){for(var i=0;i<a;i++)if(r.groupField[i]===t.name){h[i]=n;break}}),c=n.makeArray(r.groupSummary),c.reverse(),n.each(r.groups,function(y,p){var k,b,it,d;s++;try{e=n.isArray(r.formatDisplayField)&&n.isFunction(r.formatDisplayField[p.idx])?r.formatDisplayField[p.idx].call(u,p.displayValue,p.value,u.p.colModel[h[p.idx]],p.idx,r):u.formatter("",p.displayValue,h[p.idx],p.value)}catch(et){e=p.displayValue}if(k="",k=n.isFunction(r.groupText[p.idx])?r.groupText[p.idx].call(u,e,p.cnt,p.summary):n.jgrid.template(r.groupText[p.idx],e,p.cnt,p.summary),typeof k=="string"||typeof k=="number"||(k=e),b=r.groupSummaryPos[p.idx]==="header"?v(y,0,r.groups,0):new Array(i.collen),b[0]=n.jgrid.formatCellCsv(n.jgrid.stripHtml(k),i),o+=b.join(i.separator)+i.newLine,it=a-1===p.idx,it){for(var nt=r.groups[y+1],w,rt=0,ut=p.startRow,tt,ft=nt!==undefined?nt.startRow:r.groups[y].startRow+r.groups[y].cnt,g=ut;g<ft;g++){if(!t[g-rt])break;for(tt=t[g-rt],l=0,w=0;w<f.length;w++)f[w].hidden||(b[l]=n.jgrid.formatCellCsv(n.jgrid.formatCell(tt[f[w].name],w,tt,f[w],u),i),l++);o+=b.join(i.separator)+i.newLine}if(r.groupSummaryPos[p.idx]!=="header"){if(nt!==undefined){for(d=0;d<r.groupField.length;d++)if(nt.dataIndex===r.groupField[d])break;s=r.groupField.length-d}for(w=0;w<s;w++)c[w]&&(b=v(y,w,r.groups,0),o+=b.join(i.separator)+i.newLine);s=d}}}),o}var c,l,a,d,v,g,nt,y,tt;t._regexsep=new RegExp(t.separator,"g");t._regexquot=new RegExp(t.quote,"g");var u=this,h=this.addLocalData(!0),et=h.length,s=u.p.colModel,ot=s.length,st=u.p.colNames,r,e=0,p,w="",f,o,it="",rt="",ut="",ft="",b=[],k=[];if(c=[],a=[],n.each(s,function(i,r){r.exportcol===undefined&&(r.exportcol=!0);r.name!=="cb"&&r.name!=="rn"||r.hidden||(k.push(i),r.hidden=!0);r.exportcol||r.hidden||(a.push(i),r.hidden=!0);!r.hidden&&r.exportcol&&(b.push(n.jgrid.formatCellCsv(st[i],t)),c.push(r.name))}),t.includeLabels&&(ft=b.join(t.separator)+t.newLine),t.collen=b.length,u.p.grouping)w+=ht(h,t);else while(e<et){for(p=h[e],f=[],o=0,r=0;r<ot;r++)s[r].hidden||(f[o]=n.jgrid.formatCellCsv(n.jgrid.formatCell(p[s[r].name],r,p,s[r],u),t),o++);w+=f.join(t.separator)+t.newLine;e++}if(h=null,f=new Array(t.collen),t.includeCaption&&u.p.caption){for(e=t.collen;--e;)f[e]="";f[0]=n.jgrid.formatCellCsv(u.p.caption,t);it+=f.join(t.separator)+t.newLine}if(t.includeGroupHeader&&u.p.groupHeader&&u.p.groupHeader.length)for(d=u.p.groupHeader,r=0;r<d.length;r++){for(v=d[r].groupHeaders,e=0,f=[],l=0;l<c.length;l++){for(f[e]="",o=0;o<v.length;o++)v[o].startColumnName===c[l]&&(f[e]=n.jgrid.formatCellCsv(v[o].titleText,t));e++}rt+=f.join(t.separator)+t.newLine}if(t.includeFooter&&u.p.footerrow&&(g=n(".ui-jqgrid-ftable",this.sDiv),g.length)){for(nt=g[0].rows[0],r=0,e=0,f=[];r<nt.cells.length;)y=nt.cells[r],tt=n(y).attr("aria-describedby").slice(-3),y.hidden||tt==="_cb"||tt==="_rn"||(f[e]=n.jgrid.formatCellCsv(n(y).text(),t),e++),r++;ut+=f.join(t.separator)+t.newLine}for(i=it+rt+ft+w+ut,r=0;r<k.length;r++)s[k[r]].hidden=!1;for(r=0;r<a.length;r++)s[a[r]].hidden=!1}),t.returnAsString)return i;n.jgrid.saveAs(i,t.fileName,{type:t.mimetype})},exportToExcel:function(t){t=n.extend(!0,{includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.xlsx",mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",maxlength:40,onBeforeExport:null,replaceStr:null},t||{});this.each(function(){function at(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")}function vt(t){function p(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function a(t,r,u,f){for(var h=p(t,r,u),c,a=h.cnt,w=v(i.header),l,s=f;s<y;s++)o[s].hidden||o[s].exportcol||(l="{0}",n.each(h.summary,function(){if(this.nm===o[s].name){o[s].summaryTpl&&(l=o[s].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;c=e.formatter("",this.v,s,this)}catch(t){c=this.v}return w[this.nm]=n.jgrid.stripHtml(n.jgrid.template(l,c)),!1}}));return w}function v(n){for(var i={},t=0;t<n.length;t++)i[n[t]]="";return i}var r=e.p.groupingView,h=[],l=r.groupField.length,y=o.length,f=0,c,u;n.each(o,function(n,t){for(var i=0;i<l;i++)if(r.groupField[i]===t.name){h[i]=n;break}});c=n.makeArray(r.groupSummary);c.reverse();n.each(r.groups,function(o,y){var p,w,nt,tt,rt,b;f++;try{u=n.isArray(r.formatDisplayField)&&n.isFunction(r.formatDisplayField[y.idx])?r.formatDisplayField[y.idx].call(e,y.displayValue,y.value,e.p.colModel[h[y.idx]],y.idx,r):e.formatter("",y.displayValue,h[y.idx],y.value)}catch(et){u=y.displayValue}if(p="",p=n.isFunction(r.groupText[y.idx])?r.groupText[y.idx].call(e,u,y.cnt,y.summary):n.jgrid.template(r.groupText[y.idx],u,y.cnt,y.summary),typeof p=="string"||typeof p=="number"||(p=u),w=r.groupSummaryPos[y.idx]==="header"?a(o,0,r.groups,0):v(i.header),nt=Object.keys(w),w[nt[0]]=n.jgrid.stripHtml(new Array(y.idx*5).join(" ")+p),s(w,!0),tt=l-1===y.idx,tt){for(var g=r.groups[o+1],d,it=0,ut=y.startRow,ft=g!==undefined?g.startRow:r.groups[o].startRow+r.groups[o].cnt,k=ut;k<ft;k++){if(!t[k-it])break;rt=t[k-it];s(rt,!1)}if(r.groupSummaryPos[y.idx]!=="header"){if(g!==undefined){for(b=0;b<r.groupField.length;b++)if(g.dataIndex===r.groupField[b])break;f=r.groupField.length-b}for(d=0;d<f;d++)c[d]&&(w=a(o,d,r.groups,0),s(w,!0));f=b}}})}for(var e=this,h=n.jgrid.excelStrings,ft=0,f=n.parseXML(h["xl/worksheets/sheet1.xml"]),lt=f.getElementsByTagName("sheetData")[0],d={_rels:{".rels":n.parseXML(h["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":n.parseXML(h["xl/_rels/workbook.xml.rels"])},"workbook.xml":n.parseXML(h["xl/workbook.xml"]),"styles.xml":n.parseXML(h["xl/styles.xml"]),worksheets:{"sheet1.xml":f}},"[Content_Types].xml":n.parseXML(h["[Content_Types].xml"])},o=e.p.colModel,r=0,i={body:e.addLocalData(!0),header:[],footer:[],width:[],map:[]},et,g,nt,s,l,b,c,st,ht,it,k,ct,rt,a,ut,u=0,v=o.length;u<v;u++)(o[u].exportcol===undefined&&(o[u].exportcol=!0),!o[u].hidden&&o[u].name!=="cb"&&o[u].name!=="rn"&&o[u].exportcol)&&(i.header[r]=o[u].name,i.width[r]=5,i.map[r]=u,r++);if(et=n.isFunction(t.replaceStr)?t.replaceStr:at,s=function(r,u){var h,c,l,s,a;for(g=ft+1,nt=n.jgrid.makeNode(f,"row",{attr:{r:g}}),h=0;h<i.header.length;h++)c=n.jgrid.excelCellPos(h)+""+g,s=n.isArray(r)&&u?e.p.colNames[i.map[h]]:r[i.header[h]],s==null&&(s=""),u||(s=s!==""?n.jgrid.formatCell(s,i.map[h],r,o[i.map[h]],e):s),i.width[h]=Math.max(i.width[h],Math.min(parseInt(s.length,10),t.maxlength)),typeof s=="number"||s.match&&n.trim(s).match(/^-?\d+(\.\d+)?$/)&&!n.trim(s).match(/^0\d+/)?l=n.jgrid.makeNode(f,"c",{attr:{t:"n",r:c},children:[n.jgrid.makeNode(f,"v",{text:s})]}):(a=s.replace?et(s):s,l=n.jgrid.makeNode(f,"c",{attr:{t:"inlineStr",r:c},children:{row:n.jgrid.makeNode(f,"is",{children:{row:n.jgrid.makeNode(f,"t",{text:a})}})}})),nt.appendChild(l);lt.appendChild(nt);ft++},n("sheets sheet",d.xl["workbook.xml"]).attr("name",t.sheetName),t.includeGroupHeader&&e.p.groupHeader&&e.p.groupHeader.length){for(var ot=e.p.groupHeader,y=[],tt=0,p,w=0;w<ot.length;w++){for(l=ot[w].groupHeaders,b={},tt++,u=0,u=0;u<i.header.length;u++)for(p=i.header[u],b[p]="",c=0;c<l.length;c++)l[c].startColumnName===p&&(b[p]=l[c].titleText,st=n.jgrid.excelCellPos(u)+tt,ht=n.jgrid.excelCellPos(u+l[c].numberOfColumns-1)+tt,y.push({ref:st+":"+ht}));s(b,!0)}for(n("row c",f).attr("s","2"),it=n.jgrid.makeNode(f,"mergeCells",{attr:{count:y.length}}),n("worksheet",f).append(it),r=0;r<y.length;r++)it.appendChild(n.jgrid.makeNode(f,"mergeCell",{attr:y[r]}))}if(t.includeLabels&&(s(i.header,!0),n("row:last c",f).attr("s","2")),e.p.grouping)vt(i.body);else for(k=0,ct=i.body.length;k<ct;k++)s(i.body[k],!1);if(t.includeFooter||e.p.footerrow){i.footer=n(e).jqGrid("footerData","get");for(r in i.footer)i.footer.hasOwnProperty(r)&&(i.footer[r]=n.jgrid.stripHtml(i.footer[r]));s(i.footer,!0);n("row:last c",f).attr("s","2")}for(rt=n.jgrid.makeNode(f,"cols"),n("worksheet",f).prepend(rt),r=0,v=i.width.length;r<v;r++)rt.appendChild(n.jgrid.makeNode(f,"col",{attr:{min:r+1,max:r+1,width:i.width[r],customWidth:1}}));if(n.isFunction(t.onBeforeExport))t.onBeforeExport(d);i=null;try{a=new JSZip;ut={type:"blob",mimeType:t.mimetype};n.jgrid.xmlToZip(a,d);a.generateAsync?a.generateAsync(ut).then(function(i){n.jgrid.saveAs(i,t.fileName,{type:t.mimetype})}):n.jgrid.saveAs(a.generate(ut),t.fileName,{type:t.mimetype})}catch(yt){throw yt;}})},exportToPdf:function(t){return t=n.extend(!0,{title:null,orientation:"portrait",pageSize:"A4",description:null,onBeforeExport:null,download:"download",includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.pdf",mimetype:"application/pdf"},t||{}),this.each(function(){function rt(t){function y(t,r){for(var h=0,c=[],o=0;o<u.length;o++)s={text:t[u[o]]==null?"":r?n.jgrid.formatCell(t[u[o]]+"",v[h],a[e],f[v[h]],i):t[u[o]],alignment:b[o],style:"tableBody"},c.push(s),h++;return c}function nt(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function k(t,r,e,o){for(var h=nt(t,r,e),c,a=h.cnt,v=d(u),l,s=o;s<g;s++)!f[s].hidden&&f[s].exportcol&&(l="{0}",n.each(h.summary,function(){if(this.nm===f[s].name){f[s].summaryTpl&&(l=f[s].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;c=i.formatter("",this.v,s,this)}catch(t){c=this.v}return v[this.nm]=n.jgrid.stripHtml(n.jgrid.template(l,c)),!1}}));return v}function d(n){for(var i={},t=0;t<n.length;t++)i[n[t]]="";return i}var r=i.p.groupingView,l=[],w=r.groupField.length,f=i.p.colModel,g=f.length,h=0,p,o;n.each(f,function(n,t){for(var i=0;i<w;i++)if(r.groupField[i]===t.name){l[i]=n;break}});p=n.makeArray(r.groupSummary);p.reverse();n.each(r.groups,function(f,e){var s,a,tt,it,ut,v;h++;try{o=n.isArray(r.formatDisplayField)&&n.isFunction(r.formatDisplayField[e.idx])?r.formatDisplayField[e.idx].call(i,e.displayValue,e.value,i.p.colModel[l[e.idx]],e.idx,r):i.formatter("",e.displayValue,l[e.idx],e.value)}catch(ot){o=e.displayValue}if(s="",s=n.isFunction(r.groupText[e.idx])?r.groupText[e.idx].call(i,o,e.cnt,e.summary):n.jgrid.template(r.groupText[e.idx],o,e.cnt,e.summary),typeof s=="string"||typeof s=="number"||(s=o),a=r.groupSummaryPos[e.idx]==="header"?k(f,0,r.groups,0):d(u),tt=Object.keys(a),a[tt[0]]=n.jgrid.stripHtml(new Array(e.idx*5).join(" ")+s),c.push(y(a,!1)),it=w-1===e.idx,it){for(var nt=r.groups[f+1],g,rt=0,ft=e.startRow,et=nt!==undefined?nt.startRow:r.groups[f].startRow+r.groups[f].cnt,b=ft;b<et;b++){if(!t[b-rt])break;ut=t[b-rt];c.push(y(ut,!0))}if(r.groupSummaryPos[e.idx]!=="header"){if(nt!==undefined){for(v=0;v<r.groupField.length;v++)if(nt.dataIndex===r.groupField[v])break;h=r.groupField.length-v}for(g=0;g<h;g++)p[g]&&(a=k(f,g,r.groups,0),c.push(y(a,!1)));h=v}}})}for(var i=this,c=[],o=i.p.colModel,s={},f,a=i.addLocalData(!0),u=[],e=0,v=[],l=[],tt=[],b={},h,k,d,y,g,it,p,nt,r=0,w=o.length;r<w;r++)(o[r].exportcol===undefined&&(o[r].exportcol=!0),!o[r].hidden&&o[r].name!=="cb"&&o[r].name!=="rn"&&o[r].exportcol)&&(s={text:i.p.colNames[r],style:"tableHeader"},l.push(s),u[e]=o[r].name,v[e]=r,tt.push(o[r].width),b[o[r].name]=o[r].align||"left",e++);if(t.includeGroupHeader&&i.p.groupHeader&&i.p.groupHeader.length)for(k=i.p.groupHeader,e=0;e<k.length;e++){for(d=[],y=k[e].groupHeaders,f=0;f<u.length;f++){for(s={text:"",style:"tableHeader"},h=0;h<y.length;h++)y[h].startColumnName===u[f]&&(s={text:y[h].titleText,colSpan:y[h].numberOfColumns,style:"tableHeader"});d.push(s);r++}c.push(d)}if(t.includeLabels&&c.push(l),i.p.grouping)rt(a);else for(e=0,w=a.length;e<w;e++){for(h=0,l=[],g=a[e],f=0;f<u.length;f++)s={text:g[u[f]]==null?"":n.jgrid.formatCell(g[u[f]]+"",v[h],a[e],o[v[h]],i),alignment:b[u[f]],style:"tableBody"},l.push(s),h++;c.push(l)}if(t.includeFooter&&i.p.footerrow){for(it=n(i).jqGrid("footerData","get"),l=[],f=0;f<u.length;f++)s={text:n.jgrid.stripHtml(it[u[f]]),style:"tableFooter",alignment:b[u[f]]},l.push(s);c.push(l)}p={pageSize:t.pageSize,pageOrientation:t.orientation,content:[{style:"tableExample",widths:tt,table:{headerRows:k!=null?0:1,body:c}}],styles:{tableHeader:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc",alignment:"center"},tableBody:{fontSize:10},tableFooter:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc"},title:{alignment:"center",fontSize:15},description:{}},defaultStyle:{fontSize:10}};t.description&&p.content.unshift({text:t.description,style:"description",margin:[0,0,0,12]});t.title&&p.content.unshift({text:t.title,style:"title",margin:[0,0,0,12]});n.isFunction(t.onBeforeExport)&&t.onBeforeExport.call(i,p);try{nt=pdfMake.createPdf(p);t.download==="open"?nt.open():nt.getBuffer(function(i){n.jgrid.saveAs(i,t.fileName,{type:t.mimetype})})}catch(ut){throw ut;}})}})});